[{"filePath":"/home/xopher/www/x/battle-chess/src/App.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/xopher/www/x/battle-chess/src/App.tsx:144:5\n  142 |     }\n  143 |     // eslint-disable-next-line react-hooks/set-state-in-effect\n> 144 |     setSeeds([...loadedSeeds.reverse(), ...DEFAULT_SEEDS]);\n      |     ^^^^^^^^ Avoid calling setState() directly within an effect\n  145 |   }, []);\n  146 |\n  147 |   const routeContextValue = useMemo(() => {","line":144,"column":5,"endLine":144,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/__tests__/livestream.test.ts","messages":[{"ruleId":"prefer-const","severity":2,"message":"'inventory' is never reassigned. Use 'const' instead.","line":32,"column":27,"messageId":"useConst","endLine":32,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":68,"messageId":"unexpectedAny","endLine":81,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2177,2180],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2177,2180],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it } from \"vitest\";\nimport { io } from \"socket.io-client\";\nimport {\n  createInitialState,\n  applyClassicalFormation,\n  generateElementalTerrain,\n} from \"@setup/setupLogic\";\nimport { getBestMove } from \"@ai/aiLogic\";\n\nconst SERVER_URL = \"http://localhost:3001\";\nconst ROOM_ID =\n  \"LIVE_SIM_\" + Math.random().toString(36).substring(2, 6).toUpperCase();\nconst MOVE_DELAY_MS = 2000;\nconst MAX_TURNS = 100;\n\ndescribe(\"Live Simulation Stream\", () => {\n  it(\"runs a simulation and streams it to the server\", async () => {\n    console.log(`ðŸš€ Connecting to ${SERVER_URL}`);\n    const socket = io(SERVER_URL);\n\n    await new Promise((resolve) => {\n      socket.on(\"connect\", () => {\n        console.log(`âœ… Connected! Room: ${ROOM_ID}`);\n        socket.emit(\"join_room\", ROOM_ID);\n        resolve(true);\n      });\n    });\n\n    const players = [\"red\", \"yellow\"];\n    const mode = \"2p-ns\";\n\n    let { board, terrain, inventory, terrainInventory } = createInitialState(\n      mode,\n      players,\n    );\n\n    const terrainSetupResult = generateElementalTerrain(\n      terrain,\n      board,\n      terrainInventory,\n      players,\n      mode as \"2p-ns\",\n    );\n    terrain = terrainSetupResult.terrain;\n    terrainInventory = terrainSetupResult.terrainInventory;\n\n    const setupResult = applyClassicalFormation(\n      board,\n      terrain,\n      inventory,\n      terrainInventory,\n      players,\n      mode,\n    );\n    board = setupResult.board;\n    terrain = setupResult.terrain;\n\n    let currentTurn = 0;\n    let currentPlayerIdx = 0;\n    let gameOver = false;\n\n    while (!gameOver && currentTurn < MAX_TURNS) {\n      const player = players[currentPlayerIdx];\n\n      // Sync state to server\n      socket.emit(\"update_game_state\", {\n        roomId: ROOM_ID,\n        newState: {\n          gameState: \"play\",\n          mode,\n          board,\n          terrain,\n          turn: player,\n          capturedBy: { red: [], yellow: [], green: [], blue: [] },\n          activePlayers: players,\n        },\n      });\n\n      // Search for move\n      console.log(`ðŸ¤– [${currentTurn}] AI Thinking for ${player}...`);\n      const bestMove = getBestMove(board, terrain, player, mode as any);\n\n      if (!bestMove) {\n        console.log(`âš ï¸ No move found for ${player}`);\n        break;\n      }\n\n      // Apply move\n      const { from, to } = bestMove;\n      board[to[0]][to[1]] = board[from[0]][from[1]];\n      board[from[0]][from[1]] = null;\n\n      console.log(`âœ¨ Move: [${from}] -> [${to}]`);\n      socket.emit(\"send_move\", { roomId: ROOM_ID, move: bestMove });\n\n      currentTurn++;\n      currentPlayerIdx = (currentPlayerIdx + 1) % 2;\n\n      await new Promise((r) => setTimeout(r, MOVE_DELAY_MS));\n\n      // Check if game is over (simple check)\n      let kings = 0;\n      board.forEach((row) =>\n        row.forEach((p) => {\n          if (p?.type === \"king\") kings++;\n        }),\n      );\n      if (kings < 2) {\n        console.log(\"ðŸ Game Over: King Captured!\");\n        gameOver = true;\n      }\n    }\n\n    console.log(\"âœ… Simulation stream complete.\");\n    socket.disconnect();\n  }, 600000);\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/__tests__/pieceStats.test.ts","messages":[{"ruleId":"no-useless-assignment","severity":2,"message":"This assigned value is not used in subsequent statements.","line":161,"column":15,"messageId":"unnecessaryAssignment","endLine":161,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it } from \"vitest\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\nimport { PIECES } from \"../engine/configs/unitDetails\";\nimport { getValidMoves } from \"../engine/logic/movement\";\nimport { TERRAIN_TYPES } from \"../engine/configs/terrainDetails\";\nimport { BOARD_SIZE } from \"../constants/core.constants\";\nimport type { BoardPiece, TerrainType } from \"../engine/types/game\";\n\nconst ITERATIONS_PER_MATCHUP = 500_000;\nconst MAX_TURNS = 10;\nconst TOTAL_TERRAIN_TILES = 32;\nconst TERRAIN_PER_HALF = TOTAL_TERRAIN_TILES / 2;\nconst BOARD_MIDPOINT = Math.floor(BOARD_SIZE / 2);\n\nconst NON_FLAT_TERRAIN_KEYS = [\n  TERRAIN_TYPES.TREES,\n  TERRAIN_TYPES.PONDS,\n  TERRAIN_TYPES.RUBBLE,\n  TERRAIN_TYPES.DESERT,\n];\n\nconst pickRandomNonFlat = (): TerrainType =>\n  NON_FLAT_TERRAIN_KEYS[\n    Math.floor(Math.random() * NON_FLAT_TERRAIN_KEYS.length)\n  ];\n\nconst generateTerrainWithDensity = (): TerrainType[][] => {\n  const terrain: TerrainType[][] = Array.from({ length: BOARD_SIZE }, () =>\n    Array(BOARD_SIZE).fill(TERRAIN_TYPES.FLAT),\n  );\n\n  const topHalf: [number, number][] = [];\n  const bottomHalf: [number, number][] = [];\n\n  for (let r = 0; r < BOARD_SIZE; r++) {\n    for (let c = 0; c < BOARD_SIZE; c++) {\n      const isTopHalf = r < BOARD_MIDPOINT;\n      if (isTopHalf) topHalf.push([r, c]);\n      else bottomHalf.push([r, c]);\n    }\n  }\n\n  for (let i = topHalf.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [topHalf[i], topHalf[j]] = [topHalf[j], topHalf[i]];\n  }\n  for (let i = bottomHalf.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [bottomHalf[i], bottomHalf[j]] = [bottomHalf[j], bottomHalf[i]];\n  }\n\n  for (let i = 0; i < TERRAIN_PER_HALF; i++) {\n    const [rT, cT] = topHalf[i];\n    terrain[rT][cT] = pickRandomNonFlat();\n    const [rB, cB] = bottomHalf[i];\n    terrain[rB][cB] = pickRandomNonFlat();\n  }\n\n  return terrain;\n};\n\ninterface TerrainStat {\n  total: number;\n  captures: number;\n  rate: number;\n}\n\ndescribe(\"Piece Statistics Generator\", () => {\n  it(\"generates piece capture threat surface statistics\", () => {\n    const pieceKeys = Object.values(PIECES);\n    const stats: Record<\n      string,\n      Record<\n        string,\n        {\n          total: number;\n          captures: number;\n          rate: number;\n          terrainStats: Record<string, TerrainStat>;\n        }\n      >\n    > = {};\n\n    for (const attacker of pieceKeys) {\n      stats[attacker] = {};\n\n      for (const defender of pieceKeys) {\n        let totalPlacements = 0;\n        let captures = 0;\n\n        const terrainStats: Record<string, TerrainStat> = {\n          [TERRAIN_TYPES.FLAT]: { total: 0, captures: 0, rate: 0 },\n          [TERRAIN_TYPES.TREES]: { total: 0, captures: 0, rate: 0 },\n          [TERRAIN_TYPES.PONDS]: { total: 0, captures: 0, rate: 0 },\n          [TERRAIN_TYPES.RUBBLE]: { total: 0, captures: 0, rate: 0 },\n          [TERRAIN_TYPES.DESERT]: { total: 0, captures: 0, rate: 0 },\n        };\n\n        for (let i = 0; i < ITERATIONS_PER_MATCHUP; i++) {\n          const rA = Math.floor(Math.random() * BOARD_SIZE);\n          const cA = Math.floor(Math.random() * BOARD_SIZE);\n          let rB = Math.floor(Math.random() * BOARD_SIZE);\n          let cB = Math.floor(Math.random() * BOARD_SIZE);\n\n          while (Math.abs(rA - rB) + Math.abs(cA - cB) < 2) {\n            rB = Math.floor(Math.random() * BOARD_SIZE);\n            cB = Math.floor(Math.random() * BOARD_SIZE);\n          }\n\n          const terrain = generateTerrainWithDensity();\n          const startTerrain = terrain[rA][cA];\n\n          totalPlacements++;\n          terrainStats[startTerrain].total++;\n\n          const boardState: (BoardPiece | null)[][] = Array.from(\n            { length: BOARD_SIZE },\n            () => Array(BOARD_SIZE).fill(null),\n          );\n\n          const p1: BoardPiece = { type: attacker, player: \"red\" };\n          const p2: BoardPiece = { type: defender, player: \"yellow\" };\n          boardState[rA][cA] = p1;\n          boardState[rB][cB] = p2;\n\n          let pA: number[] = [rA, cA];\n          let pB: number[] = [rB, cB];\n          let gameOver = false;\n          let turn = 0;\n\n          while (!gameOver && turn < MAX_TURNS) {\n            const isAttackerTurn = turn % 2 === 0;\n            const actingPlayer = isAttackerTurn ? \"red\" : \"yellow\";\n            const pos = isAttackerTurn ? pA : pB;\n            const piece = isAttackerTurn ? p1 : p2;\n            const targetPos = isAttackerTurn ? pB : pA;\n\n            const moves = getValidMoves(\n              pos[0],\n              pos[1],\n              piece,\n              actingPlayer,\n              boardState,\n              terrain,\n              \"2p-ns\",\n              1,\n            );\n\n            if (moves.length === 0) break;\n\n            const captureMove = moves.find(\n              (m) => m[0] === targetPos[0] && m[1] === targetPos[1],\n            );\n\n            if (captureMove) {\n              if (isAttackerTurn) {\n                captures++;\n                terrainStats[startTerrain].captures++;\n              }\n              gameOver = true;\n              break;\n            }\n\n            const bestMove = moves.reduce((best, curr) => {\n              const bestDist =\n                Math.abs(best[0] - targetPos[0]) +\n                Math.abs(best[1] - targetPos[1]);\n              const currDist =\n                Math.abs(curr[0] - targetPos[0]) +\n                Math.abs(curr[1] - targetPos[1]);\n              return currDist < bestDist ? curr : best;\n            }, moves[0]);\n\n            boardState[pos[0]][pos[1]] = null;\n            boardState[bestMove[0]][bestMove[1]] = piece;\n            if (isAttackerTurn) pA = bestMove;\n            else pB = bestMove;\n\n            turn++;\n          }\n        }\n\n        // Calculate rates\n        for (const tKey in terrainStats) {\n          const t = terrainStats[tKey];\n          t.rate = t.total > 0 ? (t.captures / t.total) * 100 : 0;\n        }\n\n        stats[attacker][defender] = {\n          total: totalPlacements,\n          captures,\n          rate: (captures / totalPlacements) * 100,\n          terrainStats,\n        };\n      }\n    }\n\n    const outputPath = path.resolve(__dirname, \"../assets/statistics.json\");\n    fs.writeFileSync(outputPath, JSON.stringify(stats, null, 2), \"utf8\");\n    console.log(\n      `Statistics generated with per-terrain data: ${ITERATIONS_PER_MATCHUP.toLocaleString()} per matchup`,\n    );\n  }, 900000);\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/__tests__/simulation.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":29,"messageId":"unexpectedAny","endLine":14,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[509,512],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[509,512],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":10,"messageId":"unexpectedAny","endLine":29,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[875,878],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[875,878],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":12,"messageId":"unexpectedAny","endLine":30,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[895,898],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[895,898],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-const","severity":2,"message":"'inventory' is never reassigned. Use 'const' instead.","line":61,"column":29,"messageId":"useConst","endLine":61,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'score' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":145,"column":15,"messageId":"unusedVar","endLine":145,"endColumn":20}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect } from \"vitest\";\nimport {\n  createInitialState,\n  applyClassicalFormation,\n  generateElementalTerrain,\n} from \"@setup/setupLogic\";\nimport { getBestMove } from \"@ai/aiLogic\";\nimport { getValidMoves, isPlayerInCheck } from \"@logic/gameLogic\";\nimport type { GameMode } from \"@engineTypes/game\";\nimport { BOARD_SIZE } from \"@constants/core.constants\";\nimport { PIECES } from \"@engineConfigs/unitDetails\";\n\n// Helper to find the king and check if captured\nconst isKingAlive = (board: any[][], player: string) => {\n  for (let r = 0; r < BOARD_SIZE; r++) {\n    for (let c = 0; c < BOARD_SIZE; c++) {\n      const p = board[r][c];\n      if (p && p.player === player && p.type === PIECES.KING) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n// Returns if there are arbitrary valid moves\nconst hasAnyValidMoves = (\n  player: string,\n  board: any[][],\n  terrain: any[][],\n  mode: GameMode,\n) => {\n  for (let r = 0; r < BOARD_SIZE; r++) {\n    for (let c = 0; c < BOARD_SIZE; c++) {\n      const p = board[r][c];\n      if (p && p.player === player) {\n        const moves = getValidMoves(r, c, p, player, board, terrain, mode, 0);\n        if (moves.length > 0) return true;\n      }\n    }\n  }\n  return false;\n};\n\ndescribe(\"CPU vs CPU Game Simulation\", () => {\n  const NUM_GAMES = 1;\n  const MAX_TURNS = 300; // Cap to ensure the game finishes and reports stats\n\n  it(\"runs a single simulation and outputs statistics\", () => {\n    let p1Wins = 0;\n    let p2Wins = 0;\n    let draws = 0;\n    let totalMovesToWin = 0;\n    let gamesFinished = 0;\n\n    for (let g = 0; g < NUM_GAMES; g++) {\n      const players = [\"red\", \"yellow\"];\n      const mode: GameMode = \"2p-ns\";\n\n      // Setup initial state\n      let { board, terrain, inventory, terrainInventory } = createInitialState(\n        mode,\n        players,\n      );\n\n      // Add Terrain (32 pieces)\n      const terrainSetupResult = generateElementalTerrain(\n        terrain,\n        board,\n        terrainInventory,\n        players,\n        mode,\n      );\n      terrain = terrainSetupResult.terrain;\n      terrainInventory = terrainSetupResult.terrainInventory;\n\n      // Setup classical board\n      const setupResult = applyClassicalFormation(\n        board,\n        terrain,\n        inventory,\n        terrainInventory,\n        players,\n        mode,\n      );\n      board = setupResult.board;\n      terrain = setupResult.terrain;\n\n      let currentTurn = 0;\n      let currentPlayerIdx = 0;\n      let gameOver = false;\n\n      while (!gameOver && currentTurn < MAX_TURNS) {\n        const player = players[currentPlayerIdx];\n\n        // 1. Check if king is dead (should not happen normally without checkmate first, but fallback)\n        if (!isKingAlive(board, player)) {\n          // This player lost\n          gameOver = true;\n          const winner = players[(currentPlayerIdx + 1) % 2];\n          if (winner === \"red\") p1Wins++;\n          else p2Wins++;\n          gamesFinished++;\n          totalMovesToWin += currentTurn;\n          continue;\n        }\n\n        // 2. Check for checkmate or stalemate\n        const hasMoves = hasAnyValidMoves(player, board, terrain, mode);\n        if (!hasMoves) {\n          gameOver = true;\n          if (isPlayerInCheck(player, board, terrain, mode)) {\n            // Checkmate! The other player won.\n            const winner = players[(currentPlayerIdx + 1) % 2];\n            if (winner === \"red\") p1Wins++;\n            else p2Wins++;\n            gamesFinished++;\n            totalMovesToWin += currentTurn;\n          } else {\n            // Stalemate\n            draws++;\n          }\n          continue;\n        }\n\n        // 3. AI gets best move\n        const bestMove = getBestMove(board, terrain, player, mode);\n\n        if (!bestMove) {\n          // AI failed to find a move despite `hasAnyValidMoves` being true\n          gameOver = true;\n          draws++;\n          continue;\n        }\n\n        // Apply Move\n        const [fr, fc] = bestMove.from;\n        const [tr, tc] = bestMove.to;\n\n        board[tr][tc] = board[fr][fc];\n        board[fr][fc] = null;\n\n        // Progress logging\n        if (currentTurn % 20 === 0) {\n          let score = 0;\n          board.forEach((row) =>\n            row.forEach((p) => {\n              if (p) score += p.player === \"red\" ? 1 : -1;\n            }),\n          );\n          // console.log(`Turn ${currentTurn}: Material Balance ${score}`);\n        }\n\n        // Next turn\n        currentTurn++;\n        currentPlayerIdx = (currentPlayerIdx + 1) % 2;\n      }\n\n      if (!gameOver && currentTurn >= MAX_TURNS) {\n        draws++; // Hit max turns\n        // console.log(`Game ${g} hit max turns`);\n      }\n    }\n\n    const averageMoves =\n      gamesFinished > 0 ? (totalMovesToWin / gamesFinished).toFixed(2) : 0;\n    const winRateP1 = ((p1Wins / NUM_GAMES) * 100).toFixed(1);\n    const winRateP2 = ((p2Wins / NUM_GAMES) * 100).toFixed(1);\n    const drawRate = ((draws / NUM_GAMES) * 100).toFixed(1);\n\n    console.log(`\\n--- SIMULATION RESULTS (${NUM_GAMES} Games) ---`);\n    console.log(`P1 Wins: ${p1Wins} (${winRateP1}%)`);\n    console.log(`P2 Wins: ${p2Wins} (${winRateP2}%)`);\n    console.log(`Draws/Timeouts: ${draws} (${drawRate}%)`);\n    console.log(`Average Moves/Half-Turns to Win: ${averageMoves}`);\n    console.log(`---------------------------------------\\n`);\n\n    expect(gamesFinished + draws).toBe(NUM_GAMES);\n    // You'd typically assert things here based on what you expect,\n    // e.g. ensuring it doesn't always timeout.\n    expect(draws).toBeLessThan(NUM_GAMES); // At least one game should end decisively, hopefully.\n  }, 300000); // Allow long timeout for test\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/context/RouteContext.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":100,"column":14,"messageId":"namedExport","endLine":100,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/Game.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":48,"messageId":"unexpectedAny","endLine":39,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1152,1155],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1152,1155],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-useless-assignment","severity":2,"message":"This assigned value is not used in subsequent statements.","line":45,"column":9,"messageId":"unnecessaryAssignment","endLine":45,"endColumn":26}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BOARD_SIZE } from \"@constants/core.constants\";\nimport type { Game } from \"boardgame.io\";\nimport { INVALID_MOVE } from \"boardgame.io/core\";\nimport { MAX_TERRAIN_PER_PLAYER } from \"@constants/terrain.constants\";\nimport { TERRAIN_TYPES } from \"@engineConfigs/terrainDetails\";\nimport { PIECES } from \"@engineConfigs/unitDetails\";\nimport {\n  createInitialState,\n  canPlaceUnit,\n  getPlayerCells,\n} from \"@setup/setupLogic\";\nimport type {\n  GameMode,\n  BoardPiece,\n  TerrainType,\n  PieceType,\n} from \"@engineTypes/game\";\n\nexport interface TrenchGameState {\n  board: (BoardPiece | null)[][];\n  terrain: TerrainType[][];\n  inventory: Record<string, PieceType[]>;\n  terrainInventory: Record<string, TerrainType[]>;\n  capturedBy: Record<string, BoardPiece[]>;\n  mode: GameMode;\n  activePlayers: string[];\n  readyPlayers: Record<string, boolean>;\n  playerMap: Record<string, string>;\n}\n\nexport interface TrenchGameSetupData {\n  mode?: GameMode;\n  board?: (BoardPiece | null)[][];\n  terrain?: TerrainType[][];\n  inventory?: Record<string, PieceType[]>;\n  terrainInventory?: Record<string, TerrainType[]>;\n}\n\nexport const TrenchGame: Game<TrenchGameState, any, TrenchGameSetupData> = {\n  name: \"battle-chess\",\n\n  setup: ({ setupData }) => {\n    const data = setupData as TrenchGameSetupData;\n    const mode: GameMode = data?.mode || \"2p-ns\";\n    let players: string[] = [];\n\n    // Initialize playerMap based on mode\n    const playerMap: Record<string, string> = {\n      \"0\": \"red\",\n      \"1\": \"yellow\",\n      \"2\": \"green\",\n      \"3\": \"blue\",\n    };\n\n    if (mode === \"2p-ns\") {\n      players = [\"red\", \"blue\"];\n      playerMap[\"0\"] = \"red\";\n      playerMap[\"1\"] = \"blue\";\n    } else if (mode === \"2p-ew\") {\n      players = [\"green\", \"yellow\"];\n      playerMap[\"0\"] = \"green\";\n      playerMap[\"1\"] = \"yellow\";\n    } else {\n      players = [\"red\", \"yellow\", \"green\", \"blue\"];\n    }\n\n    // Default to classic initial state if no board/terrain provided in setupData\n    const {\n      board: initialBoard,\n      terrain: initialTerrain,\n      inventory: initialInventory,\n      terrainInventory: initialTerrainInventory,\n    } = createInitialState(mode, players);\n\n    const board = data?.board || initialBoard;\n    const terrain = data?.terrain || initialTerrain;\n    const inventory = data?.inventory || initialInventory;\n    const terrainInventory = data?.terrainInventory || initialTerrainInventory;\n\n    return {\n      board,\n      terrain,\n      inventory,\n      terrainInventory,\n      capturedBy: {\n        red: [],\n        yellow: [],\n        green: [],\n        blue: [],\n      },\n      mode,\n      activePlayers: players,\n      readyPlayers: {},\n      playerMap,\n    };\n  },\n\n  phases: {\n    setup: {\n      start: true,\n      next: \"play\",\n      turn: {\n        activePlayers: { all: \"setup\" },\n      },\n      moves: {\n        placePiece: (\n          { G, playerID },\n          r: number,\n          c: number,\n          type: PieceType | null,\n        ) => {\n          const pid = G.playerMap[playerID];\n          if (!pid || !G.activePlayers.includes(pid)) return INVALID_MOVE;\n\n          // 1. Check territory\n          const myCells = getPlayerCells(pid, G.mode);\n          if (!myCells.some(([cellR, cellC]) => cellR === r && cellC === c)) {\n            return INVALID_MOVE;\n          }\n\n          const oldPiece = G.board[r][c];\n\n          if (type === null) {\n            // Remove piece\n            if (oldPiece && oldPiece.player === pid) {\n              G.inventory[pid].push(oldPiece.type);\n              G.board[r][c] = null;\n            }\n            return;\n          }\n\n          // 2. Check compatibility\n          if (!canPlaceUnit(type, G.terrain[r][c])) return INVALID_MOVE;\n\n          // 3. Check inventory\n          const idx = G.inventory[pid]?.indexOf(type);\n          if (idx === -1 || idx === undefined) return INVALID_MOVE;\n\n          // 4. Update\n          if (oldPiece && oldPiece.player === pid) {\n            G.inventory[pid].push(oldPiece.type);\n          }\n\n          G.board[r][c] = { type, player: pid };\n          G.inventory[pid].splice(idx, 1);\n        },\n\n        placeTerrain: (\n          { G, playerID },\n          r: number,\n          c: number,\n          type: TerrainType,\n        ) => {\n          const pid = G.playerMap[playerID];\n          if (!pid || !G.activePlayers.includes(pid)) return INVALID_MOVE;\n\n          // 1. Check territory\n          const myCells = getPlayerCells(pid, G.mode);\n          if (!myCells.some(([cellR, cellC]) => cellR === r && cellC === c)) {\n            return INVALID_MOVE;\n          }\n\n          const oldTerrain = G.terrain[r][c];\n\n          if (type === TERRAIN_TYPES.FLAT) {\n            // Remove terrain\n            if (oldTerrain !== TERRAIN_TYPES.FLAT) {\n              G.terrainInventory[pid].push(oldTerrain);\n              G.terrain[r][c] = TERRAIN_TYPES.FLAT as TerrainType;\n            }\n            return;\n          }\n\n          // 2. Check compatibility with existing unit\n          const unit = G.board[r][c];\n          if (unit && !canPlaceUnit(unit.type, type)) return INVALID_MOVE;\n\n          // 3. Check inventory\n          const idx = G.terrainInventory[pid]?.indexOf(type);\n          if (idx === -1 || idx === undefined) return INVALID_MOVE;\n\n          // 4. Check quota\n          const isTwoPlayer = G.mode === \"2p-ns\" || G.mode === \"2p-ew\";\n          const quota = isTwoPlayer\n            ? MAX_TERRAIN_PER_PLAYER.TWO_PLAYER\n            : MAX_TERRAIN_PER_PLAYER.FOUR_PLAYER;\n\n          let currentCount = 0;\n          for (const [cellR, cellC] of myCells) {\n            if (G.terrain[cellR][cellC] !== TERRAIN_TYPES.FLAT) currentCount++;\n          }\n\n          if (currentCount >= quota && G.terrain[r][c] === TERRAIN_TYPES.FLAT) {\n            return INVALID_MOVE;\n          }\n\n          // 5. Update\n          if (oldTerrain !== TERRAIN_TYPES.FLAT) {\n            G.terrainInventory[pid].push(oldTerrain);\n          }\n\n          G.terrain[r][c] = type;\n          G.terrainInventory[pid].splice(idx, 1);\n        },\n\n        ready: ({ G, playerID }, explicitPid?: string) => {\n          const pid = explicitPid || G.playerMap[playerID];\n          if (pid) G.readyPlayers[pid] = true;\n        },\n      },\n      endIf: ({ G }) => {\n        return G.activePlayers.every((p: string) => G.readyPlayers[p]);\n      },\n    },\n\n    play: {\n      turn: {\n        order: {\n          first: () => 0,\n          next: ({ G, ctx }) => (ctx.playOrderPos + 1) % G.activePlayers.length,\n        },\n      },\n      moves: {\n        movePiece: (\n          { G, playerID },\n          from: [number, number],\n          to: [number, number],\n        ) => {\n          const pid = G.playerMap[playerID];\n          if (!pid) return INVALID_MOVE;\n\n          const [fromR, fromC] = from;\n          const [toR, toC] = to;\n          const piece = G.board[fromR][fromC];\n\n          if (!piece || piece.player !== pid) return INVALID_MOVE;\n\n          const captured = G.board[toR][toC];\n\n          // Move piece\n          G.board[toR][toC] = piece;\n          G.board[fromR][fromC] = null;\n\n          // --- Pawn Promotion Logic ---\n          if (piece.type === PIECES.PAWN) {\n            let promoted = false;\n            if (G.mode === \"2p-ns\") {\n              if (pid === \"red\" && toR === BOARD_SIZE - 1) promoted = true;\n              if (pid === \"blue\" && toR === 0) promoted = true;\n            } else if (G.mode === \"2p-ew\") {\n              if (pid === \"green\" && toC === BOARD_SIZE - 1) promoted = true;\n              if (pid === \"yellow\" && toC === 0) promoted = true;\n            } else {\n              if (\n                pid === \"red\" &&\n                (toR === BOARD_SIZE - 1 || toC === BOARD_SIZE - 1)\n              )\n                promoted = true;\n              if (pid === \"yellow\" && (toR === BOARD_SIZE - 1 || toC === 0))\n                promoted = true;\n              if (pid === \"green\" && (toR === 0 || toC === BOARD_SIZE - 1))\n                promoted = true;\n              if (pid === \"blue\" && (toR === 0 || toC === 0))\n                promoted = true;\n            }\n\n            if (promoted) {\n              G.board[toR][toC] = {\n                ...piece,\n                type: PIECES.QUEEN as PieceType,\n              };\n            }\n          }\n\n          // Capture Logic\n          if (captured) {\n            if (captured.player === pid) return INVALID_MOVE;\n            G.capturedBy[pid].push(captured);\n\n            // Commander Capture Logic\n            if (captured.type === PIECES.KING) {\n              const victim = captured.player;\n              G.activePlayers = G.activePlayers.filter(\n                (p: string) => p !== victim,\n              );\n\n              // Transfer army\n              for (let r = 0; r < BOARD_SIZE; r++) {\n                for (let c = 0; c < BOARD_SIZE; c++) {\n                  if (G.board[r][c]?.player === victim) {\n                    G.board[r][c]!.player = pid;\n                  }\n                }\n              }\n            }\n          }\n\n          // Desert Rule\n          for (let r = 0; r < BOARD_SIZE; r++) {\n            for (let c = 0; c < BOARD_SIZE; c++) {\n              const p = G.board[r][c];\n              if (\n                p &&\n                p.player === pid &&\n                G.terrain[r][c] === TERRAIN_TYPES.DESERT\n              ) {\n                if (r !== toR || c !== toC) {\n                  // Eliminate piece left on desert\n                  if (p.type === PIECES.KING) {\n                    // Commander dies on desert -> entire army eliminated (reclaimed by environment)\n                    const victim = p.player;\n                    G.activePlayers = G.activePlayers.filter(\n                      (ap: string) => ap !== victim,\n                    );\n                    for (let row = 0; row < BOARD_SIZE; row++) {\n                      for (let col = 0; col < BOARD_SIZE; col++) {\n                        if (G.board[row][col]?.player === victim)\n                          G.board[row][col] = null;\n                      }\n                    }\n                  } else {\n                    G.board[r][c] = null;\n                  }\n                }\n              }\n            }\n          }\n        },\n      },\n    },\n  },\n\n  endIf: ({ G }) => {\n    if (G.activePlayers.length === 1) {\n      return { winner: G.activePlayers[0] };\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/_lazy.routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/AccordionSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/ActionBarSlot.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/ActiveFieldStrategy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/CheckAlert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/FogOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/GameStartOverlay.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/GameStartOverlay.tsx:22:5\n  20 |\n  21 |   useEffect(() => {\n> 22 |     setVisible(true);\n     |     ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  23 |   }, []);\n  24 |\n  25 |   const handleStart = () => {","line":22,"column":5,"endLine":22,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import TrenchessText from \"@/shared/components/atoms/TrenchessText\";\nimport React, { useEffect, useState } from \"react\";\nimport { Loader2 } from \"lucide-react\";\n\ninterface GameStartOverlayProps {\n  isOnline: boolean;\n  isLocked: boolean;\n  onLockIn: () => void;\n  onStart: () => void;\n}\n\nexport const GameStartOverlay: React.FC<GameStartOverlayProps> = ({\n  isOnline,\n  isLocked,\n  onLockIn,\n  onStart,\n}) => {\n  const [visible, setVisible] = useState(false);\n  const [isFadingOut, setIsFadingOut] = useState(false);\n\n  useEffect(() => {\n    setVisible(true);\n  }, []);\n\n  const handleStart = () => {\n    setIsFadingOut(true);\n    setTimeout(onStart, 500);\n  };\n\n  const handleLockIn = () => {\n    onLockIn();\n  };\n\n  return (\n    <div\n      className={`\n        fixed inset-0 z-[100] flex items-center justify-center\n        bg-slate-950/90 backdrop-blur-xl transition-opacity duration-500\n        ${visible && !isFadingOut ? \"opacity-100 pointer-events-auto\" : \"opacity-0 pointer-events-none\"}\n      `}\n    >\n      <div className=\"relative group scale-110 lg:scale-150\">\n        <div className=\"absolute inset-0 -m-20 bg-gradient-radial from-brand-red/20 via-brand-blue/10 to-transparent blur-3xl animate-pulse\" />\n\n        <div className=\"relative flex flex-col items-center gap-6\">\n          <div className=\"relative\">\n            <h1 className=\"text-6xl lg:text-8xl font-black italic tracking-tighter drop-shadow-[0_0_30px_rgba(255,255,255,0.3)]\">\n              <TrenchessText />\n            </h1>\n            <div className=\"absolute -bottom-2 left-0 w-full h-1 bg-gradient-to-r from-brand-red via-white to-brand-blue animate-shimmer\" />\n          </div>\n\n          <div className=\"overflow-hidden mb-8\">\n            <h2 className=\"text-2xl lg:text-3xl font-black uppercase tracking-[0.5em] text-slate-400 animate-[reveal-up_0.8s_ease-out_forwards]\">\n              Play Trenchess!\n            </h2>\n          </div>\n\n          {isOnline ? (\n            isLocked ? (\n              <div className=\"flex flex-col items-center gap-3\">\n                <Loader2 size={28} className=\"text-slate-400 animate-spin\" />\n                <span className=\"text-sm font-bold uppercase tracking-[0.3em] text-slate-500\">\n                  Waiting for others...\n                </span>\n              </div>\n            ) : (\n              <button\n                onClick={handleLockIn}\n                className=\"group relative px-12 py-4 rounded-full bg-slate-800/80 border border-slate-700/50 overflow-hidden transition-all duration-300 hover:scale-105 hover:bg-slate-800 hover:border-brand-red/50 hover:shadow-[0_0_30px_-5px_var(--tw-shadow-color)] shadow-brand-red/30 focus:outline-none focus:ring-2 focus:ring-brand-red/50 active:scale-95\"\n              >\n                <div className=\"absolute inset-0 bg-gradient-to-r from-brand-red/20 to-brand-blue/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n                <span className=\"relative z-10 text-xl font-bold tracking-[0.2em] uppercase text-white drop-shadow-sm group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-white group-hover:via-white group-hover:to-brand-red transition-all duration-300\">\n                  Lock In\n                </span>\n                <div className=\"absolute inset-x-0 bottom-0 h-px bg-gradient-to-r from-transparent via-white/50 to-transparent scale-x-0 group-hover:scale-x-100 transition-transform duration-500 ease-out\" />\n              </button>\n            )\n          ) : (\n            <button\n              onClick={handleStart}\n              className=\"group relative px-12 py-4 rounded-full bg-slate-800/80 border border-slate-700/50 overflow-hidden transition-all duration-300 hover:scale-105 hover:bg-slate-800 hover:border-brand-red/50 hover:shadow-[0_0_30px_-5px_var(--tw-shadow-color)] shadow-brand-red/30 focus:outline-none focus:ring-2 focus:ring-brand-red/50 active:scale-95\"\n            >\n              <div className=\"absolute inset-0 bg-gradient-to-r from-brand-red/20 to-brand-blue/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n              <span className=\"relative z-10 text-xl font-bold tracking-[0.2em] uppercase text-white drop-shadow-sm group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-white group-hover:via-white group-hover:to-brand-red transition-all duration-300\">\n                Start\n              </span>\n              <div className=\"absolute inset-x-0 bottom-0 h-px bg-gradient-to-r from-transparent via-white/50 to-transparent scale-x-0 group-hover:scale-x-100 transition-transform duration-500 ease-out\" />\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/JsonTreeViewer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/MultiplayerLobbyStatus.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":16,"messageId":"unexpectedAny","endLine":5,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[121,124],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[121,124],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { Sword } from \"lucide-react\";\n\ninterface MultiplayerLobbyStatusProps {\n  multiplayer: any;\n}\n\nexport const MultiplayerLobbyStatus: React.FC<MultiplayerLobbyStatusProps> = ({\n  multiplayer,\n}) => {\n  if (!multiplayer?.roomId) return null;\n\n  return (\n    <div className=\"flex flex-col gap-2\">\n      {/* Readiness Status of others */}\n      <div className=\"flex items-center justify-between text-[10px] font-bold text-slate-400 uppercase tracking-widest\">\n        <span>Lobby Status</span>\n        <span>\n          {\n            multiplayer.players.filter(\n              (p: string) => multiplayer.readyPlayers[p],\n            ).length\n          }\n          /{multiplayer.players.length} Ready\n        </span>\n      </div>\n\n      <div className=\"flex gap-2 justify-center\">\n        {multiplayer.players.map((pid: string, i: number) => {\n          const isReady = multiplayer.readyPlayers[pid];\n          const isMe = pid === multiplayer.socketId;\n          return (\n            <div\n              key={pid}\n              className={`w-8 h-8 rounded-full flex items-center justify-center border-2 transition-all ${isReady ? \"bg-emerald-500 border-emerald-400 text-white\" : \"bg-slate-200 dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-400\"}`}\n              title={isMe ? \"You\" : `Player ${i + 1}`}\n            >\n              {isReady ? (\n                <Sword size={14} />\n              ) : (\n                <span className=\"text-[10px]\">{i + 1}</span>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/PiecePlacementPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/PlayerAvatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/PlayerBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/PlayerTypeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/TerrainOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/UnitChip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/UnitIcons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/VictoryOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/ZenPlayerTabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/atoms/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/ActionBarPalette.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/ArmyRoster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/DeploymentActionButtons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/DeploymentFooterControls.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":17,"messageId":"unexpectedAny","endLine":8,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[271,274],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[271,274],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { RotateCcw } from \"lucide-react\";\nimport { PLAYER_CONFIGS } from \"@constants/unit.constants\";\nimport type { PieceType, TerrainType } from \"@engineTypes/game\";\n\ninterface DeploymentFooterControlsProps {\n  isZen: boolean;\n  multiplayer?: any;\n  activePlayers: string[];\n  turn: string;\n  setTurn: (pid: string) => void;\n  setPlacementPiece: (piece: PieceType | null) => void;\n  setPlacementTerrain: (terrain: TerrainType | null) => void;\n  isAllPlaced: boolean;\n  isCurrentPlayerReady?: boolean;\n  setSelectedCell: (cell: null) => void;\n  setValidMoves: (moves: number[][]) => void;\n  ready?: () => void;\n  startGame?: () => void;\n}\n\nexport const DeploymentFooterControls: React.FC<\n  DeploymentFooterControlsProps\n> = ({\n  isZen,\n  multiplayer,\n  activePlayers,\n  turn,\n  setTurn,\n  setPlacementPiece,\n  setPlacementTerrain,\n  isAllPlaced,\n  isCurrentPlayerReady,\n  setSelectedCell,\n  setValidMoves,\n  startGame,\n}) => {\n  if (isZen || multiplayer?.roomId) return null;\n\n  return (\n    <>\n      <button\n        onClick={() => {\n          const idx = activePlayers.indexOf(turn);\n          const next = activePlayers[(idx + 1) % activePlayers.length];\n          setTurn(next);\n          setPlacementPiece(null);\n          setPlacementTerrain(null);\n        }}\n        className=\"w-full py-3 bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 border border-slate-200 dark:border-white/5 rounded-xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-3 transition-all cursor-pointer\"\n      >\n        <RotateCcw size={16} /> Next Commander\n      </button>\n\n      <button\n        disabled={!isAllPlaced && !isCurrentPlayerReady}\n        onClick={() => {\n          if (isAllPlaced) {\n            if (startGame) startGame();\n            setSelectedCell(null);\n            setValidMoves([]);\n          } else {\n            const idx = activePlayers.indexOf(turn);\n            const next = activePlayers[(idx + 1) % activePlayers.length];\n            setTurn(next);\n            setPlacementPiece(null);\n            setPlacementTerrain(null);\n          }\n        }}\n        className={`w-full py-4 rounded-xl font-black text-lg uppercase tracking-tighter transition-all ${\n          isAllPlaced\n            ? \"bg-emerald-600 hover:bg-emerald-500 text-white shadow-lg cursor-pointer\"\n            : isCurrentPlayerReady\n              ? `${PLAYER_CONFIGS[turn].bg} hover:brightness-110 text-white shadow-lg cursor-pointer`\n              : \"bg-slate-100 dark:bg-white/5 opacity-40 cursor-not-allowed\"\n        }`}\n      >\n        {isAllPlaced ? \"Commence War\" : \"Finish Deployment\"}\n      </button>\n    </>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/DeploymentTerrainPalette.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/DeploymentUnitPalette.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/GameStateDebug.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":20,"messageId":"unexpectedAny","endLine":53,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1455,1458],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1455,1458],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":30,"messageId":"unexpectedAny","endLine":53,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1465,1468],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1465,1468],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback } from \"react\";\nimport AccordionSection from \"../atoms/AccordionSection\";\nimport JsonTreeViewer from \"../atoms/JsonTreeViewer\";\nimport type {\n  GameState,\n  GameMode,\n  SetupMode,\n  PieceType,\n  TerrainType,\n} from \"@engineTypes/game\";\n\ninterface OnlineInfo {\n  roomId: string | null;\n  playerIndex: number | null;\n  isHost: boolean;\n  isConnected: boolean;\n  players: string[];\n  serverUrl: string;\n}\n\ninterface DebugRowProps {\n  label: string;\n  children: React.ReactNode;\n}\n\nconst DebugRow: React.FC<DebugRowProps> = ({ label, children }) => (\n  <div className=\"flex justify-between gap-3\">\n    <span className=\"text-slate-500 whitespace-nowrap\">{label}</span>\n    <span className=\"text-slate-200 text-right truncate\">{children}</span>\n  </div>\n);\n\ninterface GameStateDebugProps {\n  gameState: GameState;\n  mode: GameMode;\n  turn: string;\n  setupMode: SetupMode;\n  activePlayers: string[];\n  getPlayerDisplayName: (pid: string) => string;\n  placementPiece: PieceType | null;\n  placementTerrain: TerrainType | null;\n  isFlipped: boolean;\n  inventoryCounts: Record<string, number>;\n  terrainInventoryCounts: Record<string, number>;\n  placedCount: number;\n  maxPlacement: number;\n  setGameState?: (s: GameState) => void;\n  setMode?: (m: GameMode) => void;\n  setTurn?: (t: string) => void;\n  setSetupMode?: (s: SetupMode) => void;\n  showBgDebug?: boolean;\n  setShowBgDebug?: (val: boolean) => void;\n  bgioState?: { G: any; ctx: any } | null;\n  onlineInfo?: OnlineInfo;\n}\n\nconst GameStateDebug: React.FC<GameStateDebugProps> = ({\n  gameState,\n  mode,\n  turn,\n  setupMode,\n  activePlayers,\n  getPlayerDisplayName,\n  placementPiece,\n  placementTerrain,\n  isFlipped,\n  inventoryCounts,\n  terrainInventoryCounts,\n  placedCount,\n  maxPlacement,\n  setGameState,\n  setMode,\n  setTurn,\n  setSetupMode,\n  showBgDebug,\n  setShowBgDebug,\n  bgioState,\n  onlineInfo,\n}) => {\n  const [activeSection, setActiveSection] = useState<string | null>(\n    onlineInfo?.roomId ? \"online\" : \"game\",\n  );\n  const [copiedKey, setCopiedKey] = useState<string | null>(null);\n\n  const toggleSection = (section: string) => {\n    setActiveSection((curr) => (curr === section ? null : section));\n  };\n\n  const copyToClipboard = useCallback((text: string, key: string) => {\n    navigator.clipboard.writeText(text).then(() => {\n      setCopiedKey(key);\n      setTimeout(() => setCopiedKey(null), 1500);\n    });\n  }, []);\n\n  const gameStateValue = setGameState ? (\n    <select\n      className=\"bg-slate-800 text-amber-400 border border-slate-700 rounded px-1 outline-none text-right cursor-pointer\"\n      value={gameState}\n      onChange={(e) => setGameState(e.target.value as GameState)}\n    >\n      <option value=\"menu\">menu</option>\n      <option value=\"setup\">setup</option>\n      <option value=\"play\">play</option>\n      <option value=\"library\">library</option>\n      <option value=\"how-to-play\">how-to-play</option>\n      <option value=\"zen-garden\">zen-garden</option>\n    </select>\n  ) : (\n    <span\n      className={`font-bold ${gameState === \"setup\" ? \"text-emerald-400\" : gameState === \"play\" ? \"text-amber-400\" : \"text-slate-400\"}`}\n    >\n      {gameState}\n    </span>\n  );\n\n  const modeValue = setMode ? (\n    <select\n      className=\"bg-slate-800 text-slate-200 border border-slate-700 rounded px-1 outline-none text-right cursor-pointer\"\n      value={mode}\n      onChange={(e) => setMode(e.target.value as GameMode)}\n    >\n      <option value=\"2p-ns\">2p-ns</option>\n      <option value=\"2p-ew\">2p-ew</option>\n      <option value=\"4p\">4p</option>\n    </select>\n  ) : (\n    mode\n  );\n\n  const turnValue = setTurn ? (\n    <select\n      className=\"bg-slate-800 text-slate-200 border border-slate-700 rounded px-1 outline-none text-right max-w-[120px] cursor-pointer\"\n      value={turn}\n      onChange={(e) => setTurn(e.target.value)}\n    >\n      {activePlayers.map((p) => (\n        <option key={p} value={p}>\n          {getPlayerDisplayName(p)} ({p})\n        </option>\n      ))}\n    </select>\n  ) : (\n    `${getPlayerDisplayName(turn)} (${turn})`\n  );\n\n  const setupModeValue = setSetupMode ? (\n    <select\n      className=\"bg-slate-800 text-slate-200 border border-slate-700 rounded px-1 outline-none text-right cursor-pointer\"\n      value={setupMode}\n      onChange={(e) => setSetupMode(e.target.value as SetupMode)}\n    >\n      <option value=\"terrain\">terrain</option>\n      <option value=\"units\">units</option>\n    </select>\n  ) : (\n    setupMode\n  );\n\n  const bgDebugValue = setShowBgDebug ? (\n    <button\n      onClick={() => setShowBgDebug(!showBgDebug)}\n      className={`px-2 py-0.5 rounded text-[10px] font-bold ${\n        showBgDebug\n          ? \"bg-amber-500/20 text-amber-400 border border-amber-500/50\"\n          : \"bg-slate-800 text-slate-400 border border-slate-700\"\n      }`}\n    >\n      {showBgDebug ? \"ON\" : \"OFF\"}\n    </button>\n  ) : showBgDebug ? (\n    \"ON\"\n  ) : (\n    \"OFF\"\n  );\n\n  const hasUnits = Object.keys(inventoryCounts).length > 0;\n  const hasTerrain = Object.keys(terrainInventoryCounts).length > 0;\n  const isOnlineRoom = !!onlineInfo?.roomId;\n\n  return (\n    <div className=\"bg-slate-900/80 backdrop-blur-md border border-white/[0.06] rounded-xl p-4 text-xs font-mono shadow-xl max-h-[90vh] flex flex-col transition-all duration-300\">\n      <h3 className=\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 mb-2 shrink-0\">\n        Debug\n      </h3>\n\n      <div className=\"flex-1 overflow-y-auto custom-scrollbar space-y-1 pr-1\">\n        {isOnlineRoom && onlineInfo && (\n          <AccordionSection\n            title=\"Online\"\n            isOpen={activeSection === \"online\"}\n            onToggle={() => toggleSection(\"online\")}\n          >\n            <div className=\"space-y-1.5\">\n              <DebugRow label=\"Status\">\n                <span\n                  className={`font-bold ${\n                    onlineInfo.isConnected\n                      ? \"text-emerald-400\"\n                      : \"text-rose-400\"\n                  }`}\n                >\n                  {onlineInfo.isConnected ? \"â— Connected\" : \"â—‹ Offline\"}\n                </span>\n              </DebugRow>\n              <DebugRow label=\"Room Code\">\n                <span className=\"flex items-center gap-1.5\">\n                  <span className=\"text-amber-300 font-bold tracking-wide\">\n                    {onlineInfo.roomId}\n                  </span>\n                  <button\n                    onClick={() => copyToClipboard(onlineInfo.roomId!, \"room\")}\n                    className=\"text-[9px] px-1.5 py-0.5 rounded bg-slate-700 hover:bg-slate-600 text-slate-300 transition-colors\"\n                  >\n                    {copiedKey === \"room\" ? \"âœ“\" : \"copy\"}\n                  </button>\n                </span>\n              </DebugRow>\n              <DebugRow label=\"Share Link\">\n                <button\n                  onClick={() =>\n                    copyToClipboard(\n                      `${window.location.origin}${window.location.pathname}?room=${onlineInfo.roomId}`,\n                      \"link\",\n                    )\n                  }\n                  className=\"text-[9px] px-1.5 py-0.5 rounded bg-slate-700 hover:bg-slate-600 text-slate-300 transition-colors\"\n                >\n                  {copiedKey === \"link\" ? \"âœ“ Copied!\" : \"Copy Link\"}\n                </button>\n              </DebugRow>\n              <DebugRow label=\"Your Slot\">\n                {(() => {\n                  if (onlineInfo.playerIndex === null) return \"â€”\";\n                  const mappedId =\n                    bgioState?.G?.playerMap?.[\n                      onlineInfo.playerIndex.toString()\n                    ];\n                  const dName = mappedId ? getPlayerDisplayName(mappedId) : \"\";\n                  return dName\n                    ? `Slot ${onlineInfo.playerIndex} (${dName})`\n                    : `Slot ${onlineInfo.playerIndex}`;\n                })()}\n              </DebugRow>\n              <DebugRow label=\"Role\">\n                <span\n                  className={\n                    onlineInfo.isHost ? \"text-amber-400\" : \"text-slate-300\"\n                  }\n                >\n                  {onlineInfo.isHost ? \"Host\" : \"Guest\"}\n                </span>\n              </DebugRow>\n              <DebugRow label=\"Players Joined\">\n                {onlineInfo.players.length} joined\n              </DebugRow>\n              <DebugRow label=\"Server\">\n                <span className=\"truncate text-slate-400 text-[9px]\">\n                  {onlineInfo.serverUrl}\n                </span>\n              </DebugRow>\n            </div>\n          </AccordionSection>\n        )}\n\n        <AccordionSection\n          title=\"Game State\"\n          isOpen={activeSection === \"game\"}\n          onToggle={() => toggleSection(\"game\")}\n        >\n          <div className=\"space-y-1.5\">\n            <DebugRow label=\"State\">{gameStateValue}</DebugRow>\n            <DebugRow label=\"Mode\">{modeValue}</DebugRow>\n            <DebugRow label=\"Turn\">{turnValue}</DebugRow>\n            <DebugRow label=\"Setup Mode\">{setupModeValue}</DebugRow>\n            <DebugRow label=\"Players\">\n              {activePlayers\n                .map((p) => `${getPlayerDisplayName(p)} (${p})`)\n                .join(\", \")}\n            </DebugRow>\n            <DebugRow label=\"Placement Piece\">{placementPiece || \"â€”\"}</DebugRow>\n            <DebugRow label=\"Placement Terrain\">\n              {placementTerrain || \"â€”\"}\n            </DebugRow>\n            <DebugRow label=\"Flipped\">{isFlipped ? \"Yes\" : \"No\"}</DebugRow>\n            <DebugRow label=\"Terrain Placed\">\n              {placedCount} / {maxPlacement}\n            </DebugRow>\n            <DebugRow label=\"BG.IO Debug\">{bgDebugValue}</DebugRow>\n          </div>\n        </AccordionSection>\n\n        {hasUnits && (\n          <AccordionSection\n            title=\"Unit Inventory\"\n            isOpen={activeSection === \"units\"}\n            onToggle={() => toggleSection(\"units\")}\n          >\n            <div className=\"space-y-1\">\n              {Object.entries(inventoryCounts).map(([type, count]) => (\n                <div key={type} className=\"flex justify-between\">\n                  <span className=\"text-slate-500\">{type}</span>\n                  <span\n                    className={\n                      count > 0 ? \"text-emerald-400\" : \"text-slate-600\"\n                    }\n                  >\n                    {count}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </AccordionSection>\n        )}\n\n        {hasTerrain && (\n          <AccordionSection\n            title=\"Terrain Inventory\"\n            isOpen={activeSection === \"terrain\"}\n            onToggle={() => toggleSection(\"terrain\")}\n          >\n            <div className=\"space-y-1\">\n              {Object.entries(terrainInventoryCounts).map(([type, count]) => (\n                <div key={type} className=\"flex justify-between\">\n                  <span className=\"text-slate-500\">{type}</span>\n                  <span\n                    className={count > 0 ? \"text-blue-400\" : \"text-slate-600\"}\n                  >\n                    {count}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </AccordionSection>\n        )}\n\n        <AccordionSection\n          title=\"BG.IO â€” G Object\"\n          isOpen={activeSection === \"bgio-g\"}\n          onToggle={() => toggleSection(\"bgio-g\")}\n        >\n          <div className=\"py-1\">\n            <JsonTreeViewer data={bgioState?.G ?? null} />\n          </div>\n        </AccordionSection>\n\n        <AccordionSection\n          title=\"BG.IO â€” Ctx\"\n          isOpen={activeSection === \"bgio-ctx\"}\n          onToggle={() => toggleSection(\"bgio-ctx\")}\n        >\n          <div className=\"py-1\">\n            <JsonTreeViewer data={bgioState?.ctx ?? null} />\n          </div>\n        </AccordionSection>\n      </div>\n    </div>\n  );\n};\n\nexport default GameStateDebug;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/HelpControls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/MultiplayerFooterControls.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":17,"messageId":"unexpectedAny","endLine":6,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[179,182],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[179,182],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":26,"messageId":"unexpectedAny","endLine":9,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[276,279],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[276,279],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { MultiplayerLobbyStatus } from \"../atoms/MultiplayerLobbyStatus\";\n\ninterface MultiplayerFooterControlsProps {\n  isZen: boolean;\n  multiplayer?: any;\n  startGame?: () => void;\n  setSelectedCell: (cell: null) => void;\n  setValidMoves: (moves: any[]) => void;\n  ready?: () => void;\n  isCurrentPlayerReady?: boolean;\n  isAllPlaced: boolean;\n}\n\nexport const MultiplayerFooterControls: React.FC<\n  MultiplayerFooterControlsProps\n> = ({\n  isZen,\n  multiplayer,\n  startGame,\n  setSelectedCell,\n  setValidMoves,\n  ready,\n  isCurrentPlayerReady,\n  isAllPlaced,\n}) => {\n  if (isZen || !multiplayer?.roomId) return null;\n\n  return (\n    <div className=\"space-y-3\">\n      <MultiplayerLobbyStatus multiplayer={multiplayer} />\n\n      {multiplayer.isHost &&\n      multiplayer.players.every((p: string) => multiplayer.readyPlayers[p]) ? (\n        <button\n          onClick={() => {\n            if (startGame) startGame();\n            setSelectedCell(null);\n            setValidMoves([]);\n          }}\n          className=\"w-full py-4 rounded-xl font-black text-lg uppercase tracking-tighter transition-all bg-amber-500 hover:bg-amber-400 text-white shadow-lg animate-pulse cursor-pointer\"\n        >\n          START GAME\n        </button>\n      ) : (\n        <button\n          onClick={() => {\n            if (multiplayer?.roomId) {\n              if (multiplayer.toggleReady && multiplayer.socketId) {\n                multiplayer.toggleReady(\n                  !multiplayer.readyPlayers[multiplayer.socketId],\n                );\n              }\n            } else if (ready) {\n              ready();\n            }\n          }}\n          className={`w-full py-4 rounded-xl font-black text-lg uppercase tracking-tighter transition-all flex items-center justify-center gap-2 ${\n            multiplayer.socketId &&\n            multiplayer.readyPlayers[multiplayer.socketId]\n              ? \"bg-slate-800 dark:bg-slate-700 text-white\"\n              : (isCurrentPlayerReady ?? isAllPlaced)\n                ? \"bg-emerald-600 hover:bg-emerald-500 text-white shadow-lg\"\n                : \"bg-slate-100 dark:bg-white/5 opacity-50 cursor-not-allowed\"\n          }`}\n          disabled={!(isCurrentPlayerReady ?? isAllPlaced)}\n        >\n          {multiplayer.socketId &&\n          multiplayer.readyPlayers[multiplayer.socketId]\n            ? \"CANCEL READY\"\n            : \"MARK READY\"}\n        </button>\n      )}\n\n      {multiplayer.socketId &&\n        multiplayer.readyPlayers[multiplayer.socketId] &&\n        !multiplayer.players.every(\n          (p: string) => multiplayer.readyPlayers[p],\n        ) && (\n          <div className=\"text-center text-[10px] font-bold text-slate-400 uppercase tracking-widest animate-pulse\">\n            Waiting for other players...\n          </div>\n        )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/ReadyUpPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":39,"messageId":"unexpectedAny","endLine":90,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2827,2830],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2827,2830],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { Bomb } from \"lucide-react\";\nimport { PLAYER_CONFIGS } from \"@constants/unit.constants\";\nimport { PlayerTypeToggle } from \"../atoms/PlayerTypeToggle\";\n\ninterface ReadyUpPanelProps {\n  gameState?: string;\n  playerID: string;\n  isReady: boolean;\n  playerType: \"human\" | \"computer\";\n  setPlayerType?: (val: \"human\" | \"computer\") => void;\n  isOnline: boolean;\n  isLocalTurn: boolean;\n  onSelect?: () => void;\n  placedCount: number;\n  maxPlacement: number;\n  unitsPlaced: number;\n  onResetTerrain?: () => void;\n  onResetUnits?: () => void;\n}\n\n/**\n * ReadyUpPanel â€” Sidebar component for final deployment confirmation.\n */\nexport const ReadyUpPanel: React.FC<ReadyUpPanelProps> = ({\n  gameState,\n  playerID,\n  isReady,\n  playerType,\n  setPlayerType,\n  isOnline,\n  isLocalTurn,\n  onSelect,\n  placedCount,\n  maxPlacement,\n  unitsPlaced,\n  onResetTerrain,\n  onResetUnits,\n}) => {\n  const unitsReady = unitsPlaced >= 16;\n  const terrainReady = placedCount >= maxPlacement;\n  const cfg = PLAYER_CONFIGS[playerID];\n\n  return (\n    <div\n      onClick={() => {\n        if (!isReady && !isLocalTurn) onSelect?.();\n      }}\n      className={`\n        relative overflow-hidden\n        bg-slate-900/80 backdrop-blur-md border rounded-xl p-5 space-y-4 shadow-xl\n        transition-all duration-700\n        ${!isReady && !isLocalTurn ? \"cursor-pointer hover:border-white/20\" : \"\"}\n        ${\n          isReady\n            ? `border-${cfg.color}/50 ring-1 ring-${cfg.color}/20 shadow-[0_0_30px_rgba(var(--${cfg.color.split(\"-\")[0]}-rgb),0.2)]`\n            : isLocalTurn\n              ? \"border-white/20 shadow-white/5\"\n              : \"border-white/[0.06] opacity-60 grayscale-[0.5]\"\n        }\n      `}\n    >\n      {/* Ready Background Animation */}\n      {isReady && (\n        <div className=\"absolute inset-0 pointer-events-none overflow-hidden opacity-20\">\n          <div\n            className={`absolute inset-[-100%] bg-gradient-to-r from-transparent via-${cfg.color}/30 to-transparent animate-[gradient-move_3s_linear_infinite] rotate-45`}\n          />\n        </div>\n      )}\n\n      {/* Header */}\n      <div className=\"flex items-center justify-between gap-4\">\n        <div className=\"space-y-0.5\">\n          <h3\n            className={`text-[11px] font-black uppercase tracking-[0.2em] ${isReady ? cfg.text : \"text-slate-400\"}`}\n          >\n            {cfg.name}\n          </h3>\n          <p className=\"text-[9px] text-slate-500 leading-relaxed uppercase tracking-wider font-bold\">\n            {isReady ? \"Ready to Strike\" : \"Preparing Forces\"}\n          </p>\n        </div>\n\n        {/* Local CPU/Human Toggle */}\n        {!isOnline && setPlayerType && (\n          <PlayerTypeToggle\n            turn={playerID}\n            playerTypes={{ [playerID]: playerType }}\n            setPlayerTypes={(updater: any) => {\n              const newState =\n                typeof updater === \"function\"\n                  ? updater({ [playerID]: playerType })\n                  : updater;\n              setPlayerType(newState[playerID]);\n            }}\n          />\n        )}\n      </div>\n\n      {/* Conditionally rendered content for setup phase vs play phase */}\n      {gameState === \"play\" ? (\n        <div className=\"mt-4\">\n          <button\n            onClick={() => console.log(\"Forfeit clicked\")}\n            className={`\n              w-full py-3.5 text-center rounded-xl font-black text-xs uppercase italic tracking-[0.2em]\n              transition-all duration-300 border\n              bg-brand-red/10 text-brand-red border-brand-red/30 hover:bg-brand-red/20 hover:border-brand-red/50 hover:shadow-[0_0_20px_rgba(255,0,0,0.2)]\n            `}\n          >\n            FORFEIT\n          </button>\n        </div>\n      ) : (\n        <>\n          <div className=\"grid grid-cols-2 gap-3\">\n            {/* Terrain Stats */}\n            <div\n              className={`\n              flex flex-col p-2.5 rounded-lg border transition-colors\n              ${isReady ? `bg-${cfg.color}/5 border-${cfg.color}/20` : \"bg-white/[0.02] border-white/[0.04]\"}\n            `}\n            >\n              <div className=\"flex items-center justify-between mb-1\">\n                <span className=\"text-[9px] uppercase font-bold text-slate-500 tracking-widest\">\n                  Terrain\n                </span>\n                {onResetTerrain && (\n                  <button\n                    onClick={onResetTerrain}\n                    className=\"text-red-400/60 hover:text-red-400 transition-colors\"\n                  >\n                    <Bomb size={12} />\n                  </button>\n                )}\n              </div>\n              <div className=\"flex items-end justify-between\">\n                <span\n                  className={`text-sm font-black font-mono leading-none ${terrainReady ? \"text-emerald-400\" : \"text-slate-400\"}`}\n                >\n                  {placedCount}/{maxPlacement}\n                </span>\n                <span className=\"text-[8px] font-black uppercase tracking-tighter text-slate-600\">\n                  {terrainReady ? \"Ready\" : \"Incomp\"}\n                </span>\n              </div>\n            </div>\n\n            {/* Unit Stats */}\n            <div\n              className={`\n              flex flex-col p-2.5 rounded-lg border transition-colors\n              ${isReady ? `bg-${cfg.color}/5 border-${cfg.color}/20` : \"bg-white/[0.02] border-white/[0.04]\"}\n            `}\n            >\n              <div className=\"flex items-center justify-between mb-1\">\n                <span className=\"text-[9px] uppercase font-bold text-slate-500 tracking-widest\">\n                  Chessmen\n                </span>\n                {onResetUnits && (\n                  <button\n                    onClick={onResetUnits}\n                    className=\"text-red-400/60 hover:text-red-400 transition-colors\"\n                  >\n                    <Bomb size={12} />\n                  </button>\n                )}\n              </div>\n              <div className=\"flex items-end justify-between\">\n                <span\n                  className={`text-sm font-black font-mono leading-none ${unitsReady ? \"text-emerald-400\" : \"text-slate-400\"}`}\n                >\n                  {unitsPlaced}/16\n                </span>\n                <span className=\"text-[8px] font-black uppercase tracking-tighter text-slate-600\">\n                  {unitsReady ? \"Ready\" : \"Incomp\"}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Not current turn indicator */}\n          {!isLocalTurn && !isReady && (\n            <div className=\"w-full py-3 text-center text-[10px] font-bold uppercase tracking-[0.2em] text-slate-600 border border-dashed border-white/5 rounded-lg\">\n              Preparing...\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/SeedLibrary.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":17,"messageId":"unexpectedAny","endLine":7,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[241,244],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[241,244],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { Database } from \"lucide-react\";\nimport { deserializeGame } from \"@utils/gameUrl\";\nimport type { BoardPiece, TerrainType, PieceType } from \"@engineTypes/game\";\n\ninterface SeedLibraryProps {\n  librarySeeds: any[];\n  setBoard?: (board: (BoardPiece | null)[][]) => void;\n  setTerrain?: (terrain: TerrainType[][]) => void;\n  setPlacementPiece: (piece: PieceType | null) => void;\n  setPlacementTerrain: (terrain: TerrainType | null) => void;\n}\n\nexport const SeedLibrary: React.FC<SeedLibraryProps> = ({\n  librarySeeds,\n  setBoard,\n  setTerrain,\n  setPlacementPiece,\n  setPlacementTerrain,\n}) => {\n  if (librarySeeds.length === 0) return null;\n\n  return (\n    <div className=\"mt-4 pt-4 border-t border-slate-200 dark:border-white/10\">\n      <h3 className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 flex items-center gap-2\">\n        <Database size={12} /> Seed Library\n      </h3>\n      <div className=\"space-y-2 max-h-48 overflow-y-auto pr-1 custom-scrollbar\">\n        {librarySeeds.map((item) => (\n          <button\n            key={item.id}\n            onClick={() => {\n              const parsed = deserializeGame(item.seed);\n              if (parsed && setBoard && setTerrain) {\n                if (\n                  confirm(`Load \"${item.name}\"? Unsaved changes will be lost.`)\n                ) {\n                  setBoard(parsed.board);\n                  setTerrain(parsed.terrain);\n                  setPlacementPiece(null);\n                  setPlacementTerrain(null);\n                }\n              }\n            }}\n            className=\"w-full bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 rounded-xl p-3 text-left transition-all border border-transparent hover:border-slate-300 dark:hover:border-white/20 group\"\n          >\n            <div className=\"font-bold text-xs text-slate-700 dark:text-slate-200 truncate group-hover:text-amber-500 transition-colors\">\n              {item.name}\n            </div>\n            <div className=\"text-[9px] text-slate-400 font-medium mt-1 flex justify-between\">\n              <span>{new Date(item.createdAt).toLocaleDateString()}</span>\n              <span className=\"uppercase tracking-widest opacity-50\">\n                {item.mode}\n              </span>\n            </div>\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/TerrainPreviewGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/UnitIntelCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/ZenActions.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":25,"messageId":"unexpectedAny","endLine":8,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[196,199],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[196,199],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { Copy, Save } from \"lucide-react\";\n\ninterface ZenActionsProps {\n  mirrorBoard?: () => void;\n  handleSave: () => void;\n  copied: boolean;\n  setGameState: (state: any) => void;\n  handleClearBoard: () => void;\n}\n\nexport const ZenActions: React.FC<ZenActionsProps> = ({\n  mirrorBoard,\n  handleSave,\n  copied,\n  setGameState,\n  handleClearBoard,\n}) => {\n  return (\n    <div className=\"space-y-3\">\n      <button\n        onClick={mirrorBoard}\n        className=\"w-full py-4 bg-amber-600 hover:bg-amber-500 text-white rounded-2xl font-black text-sm uppercase tracking-widest transition-all flex items-center justify-center gap-2 shadow-xl shadow-amber-900/20 hover:scale-[1.02] active:scale-95 mb-1\"\n      >\n        <Copy size={18} /> Mirror to Opposite\n      </button>\n      <button\n        onClick={handleSave}\n        className={`w-full py-4 rounded-2xl font-black text-sm uppercase tracking-widest transition-all flex items-center justify-center gap-2 shadow-xl ${copied ? \"bg-emerald-600 text-white shadow-emerald-500/25\" : \"bg-white dark:bg-slate-800 text-slate-800 dark:text-white border border-slate-200 dark:border-white/10 hover:scale-[1.02]\"}`}\n      >\n        {copied ? (\n          \"Link Copied!\"\n        ) : (\n          <>\n            <Save size={18} /> Save & Share\n          </>\n        )}\n      </button>\n      <div className=\"grid grid-cols-2 gap-3\">\n        <button\n          onClick={() => setGameState(\"menu\")}\n          className=\"py-3 bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 dark:hover:bg-slate-700 rounded-2xl font-black text-[10px] uppercase tracking-widest text-slate-500 border border-transparent transition-all hover:text-slate-700 dark:hover:text-slate-300\"\n        >\n          Exit Editor\n        </button>\n        <button\n          onClick={handleClearBoard}\n          className=\"py-3 bg-red-100 dark:bg-red-900/20 hover:bg-red-200 dark:hover:bg-red-900/40 rounded-2xl font-black text-[10px] uppercase tracking-widest text-brand-red dark:text-brand-red border border-red-200 dark:border-brand-red/20 transition-all\"\n        >\n          Clear Board\n        </button>\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/molecules/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/BoardCell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/BoardPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/ChessCardDetail.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":66,"messageId":"unexpectedAny","endLine":43,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1577,1580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1577,1580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\nimport { ShieldPlus, UserPlus } from \"lucide-react\";\nimport { PIECES, INITIAL_ARMY } from \"@engineConfigs/unitDetails\";\nimport { isUnitProtected } from \"@logic/gameLogic\";\nimport { canUnitTraverseTerrain } from \"@setup/terrainCompat\";\nimport { UNIT_DETAILS, unitColorMap } from \"@engineConfigs/unitDetails\";\nimport { TERRAIN_DETAILS } from \"@engineConfigs/terrainDetails\";\nimport type { PieceType, TerrainType } from \"@engineTypes/game\";\n\ninterface ChessCardDetailProps {\n  unitType: string;\n  darkMode: boolean;\n  selectedTerrainIdx?: number;\n}\n\nconst ChessCardDetail: React.FC<ChessCardDetailProps> = ({\n  unitType,\n  darkMode,\n  selectedTerrainIdx: controlledTerrainIdx,\n}) => {\n  const [internalTerrainIdx, setInternalTerrainIdx] = useState(-1);\n  const activeTerrainIdx = controlledTerrainIdx ?? internalTerrainIdx;\n\n  const textColor = darkMode ? \"text-slate-100\" : \"text-slate-800\";\n  const subtextColor = darkMode ? \"text-slate-400\" : \"text-slate-500\";\n  const gridBorderColor = darkMode ? \"border-slate-800\" : \"border-slate-200\";\n\n  const unit = INITIAL_ARMY.find((u) => u.type === unitType);\n  if (!unit) return null;\n\n  const details = UNIT_DETAILS[unitType];\n  if (!details) return null;\n\n  const colors = unitColorMap[unitType];\n  const IconComp = unit.lucide;\n\n  // Dynamic border style based on terrain affinity\n\n  const renderTerrainIcons = () => {\n    return (\n      <div className=\"flex gap-4 justify-center\">\n        {TERRAIN_DETAILS.map((t, idx) => {\n          const isProtected = isUnitProtected(unitType, t.key as any);\n          const canTraverse = canUnitTraverseTerrain(\n            unitType as PieceType,\n            t.key as TerrainType,\n          );\n          const isActive = idx === activeTerrainIdx;\n          const TIcon = t.icon;\n\n          return (\n            <div\n              key={idx}\n              onClick={() => setInternalTerrainIdx(isActive ? -1 : idx)}\n              className={`\n                relative p-3 rounded-xl transition-all duration-300 cursor-pointer group\n                ${isActive ? \"scale-110 ring-2 ring-offset-2 ring-offset-slate-900\" : \"hover:scale-105 opacity-70 hover:opacity-100\"}\n                ${isActive ? colors.ring : \"ring-transparent\"}\n                ${!canTraverse ? \"grayscale opacity-30\" : \"\"}\n                ${t.color.bg} ${t.color.text} border ${t.color.border}\n              `}\n            >\n              <TIcon size={20} />\n\n              {isProtected && (\n                <div className=\"absolute -top-2 -right-2 bg-white dark:bg-slate-800 rounded-full p-0.5 shadow-md border border-slate-200 dark:border-slate-700\">\n                  <ShieldPlus size={10} className={colors.text} />\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  const renderMovePreview = () => {\n    const previewGridSize = 7;\n    const center = 3;\n    const moves = details.movePattern(center, center);\n    const newMoves = details.newMovePattern\n      ? details.newMovePattern(center, center)\n      : [];\n    const attacks = details.attackPattern\n      ? details.attackPattern(center, center)\n      : [];\n\n    return (\n      <div\n        className={`p-4 rounded-2xl ${darkMode ? \"bg-slate-800/50\" : \"bg-slate-100\"} border ${gridBorderColor}`}\n      >\n        <div\n          className=\"grid gap-1 w-40 h-40\"\n          style={{\n            gridTemplateColumns: `repeat(${previewGridSize}, 1fr)`,\n          }}\n        >\n          {Array.from({ length: previewGridSize * previewGridSize }).map(\n            (_, i) => {\n              const r = Math.floor(i / previewGridSize);\n              const c = i % previewGridSize;\n              const isCenter = r === center && c === center;\n              const isMove = moves.some(([mr, mc]) => mr === r && mc === c);\n              const isAttack = attacks.some(([ar, ac]) => ar === r && ac === c);\n              const isNewMove = newMoves.some(\n                ([nr, nc]) => nr === r && nc === c,\n              );\n\n              let cellClass = darkMode ? \"bg-slate-700/30\" : \"bg-slate-200/50\";\n\n              if (isCenter) {\n                cellClass = darkMode\n                  ? \"bg-white text-slate-900\"\n                  : \"bg-slate-900 text-white\";\n              } else if (isAttack) {\n                cellClass = \"bg-brand-red/80\";\n              } else if (isNewMove) {\n                cellClass = \"bg-amber-500/80\";\n              } else if (isMove) {\n                cellClass = \"bg-emerald-500/80\";\n              }\n\n              return (\n                <div\n                  key={i}\n                  className={`\n                    rounded-sm flex items-center justify-center transition-colors duration-300\n                    ${cellClass}\n                    ${isCenter ? \"shadow-md scale-110 z-10 rounded-md\" : \"\"}\n                  `}\n                >\n                  {isCenter && <IconComp size={16} />}\n                </div>\n              );\n            },\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"w-full h-full flex flex-col\">\n      {/* 1. Full-width Header */}\n      <div\n        className={`w-full ${colors.ribbonBg} py-3 shadow-md flex items-center justify-center relative z-10`}\n      >\n        <span className=\"text-white text-sm font-bold uppercase tracking-[0.2em] px-4 text-center\">\n          {details.role}\n        </span>\n      </div>\n\n      {/* Main Content Area */}\n      <div className=\"flex-1 flex flex-col lg:grid lg:grid-cols-[1fr_1.5fr_1fr] gap-8 p-6 lg:p-10 items-center lg:items-start text-center lg:text-left overflow-y-auto\">\n        {/* Left Col: Identity */}\n        <div className=\"flex flex-col items-center gap-6 w-full\">\n          <div className={`relative group`}>\n            <div\n              className={`w-32 h-32 lg:w-40 lg:h-40 rounded-[2rem] flex items-center justify-center ${colors.bg} ${colors.text} border-2 ${colors.border} shadow-xl transition-transform duration-500 group-hover:scale-105 group-hover:rotate-1`}\n            >\n              <IconComp size={64} className=\"drop-shadow-sm\" />\n            </div>\n\n            {unitType === PIECES.PAWN && (\n              <div className=\"absolute -bottom-3 left-1/2 -translate-x-1/2 whitespace-nowrap bg-amber-500 text-white text-[10px] font-bold uppercase tracking-widest px-3 py-1 rounded-full shadow-md\">\n                Promotable\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex flex-col items-center gap-2\">\n            <span\n              className={`text-[10px] font-bold uppercase tracking-[0.2em] ${subtextColor}`}\n            >\n              Class Type\n            </span>\n            <span className={`text-sm font-bold ${textColor}`}>{unitType}</span>\n          </div>\n        </div>\n\n        {/* Center Col: Stats & Info */}\n        <div className=\"flex flex-col gap-6 w-full pt-4\">\n          <div className=\"flex flex-col gap-1 items-center lg:items-start\">\n            {details.subtitle && (\n              <div\n                className={`flex items-center gap-2 text-xs font-bold uppercase tracking-widest ${colors.text} mb-2`}\n              >\n                <UserPlus size={14} />\n                <span>{details.subtitle}</span>\n              </div>\n            )}\n            <h1\n              className={`text-4xl lg:text-5xl font-black uppercase tracking-tighter ${textColor} leading-none`}\n            >\n              {details.title}\n            </h1>\n          </div>\n\n          <div className=\"h-px w-24 bg-gradient-to-r from-slate-200 to-transparent dark:from-slate-700 mx-auto lg:mx-0\" />\n\n          {/* Description & Stats */}\n          <div className=\"flex flex-col gap-4\">\n            {/* Level Up Title */}\n            {details.levelUp && (\n              <div className=\"flex items-center gap-3\">\n                <div\n                  className={`w-1.5 h-1.5 rounded-full ${colors.bg} ${colors.ring}`}\n                />\n                <h4 className={`text-lg font-bold ${textColor}`}>\n                  {details.levelUp.title}\n                </h4>\n              </div>\n            )}\n\n            {/* Stat Points */}\n            <div className=\"flex flex-col gap-3 pl-4 lg:pl-0\">\n              {details.levelUp?.stats.map((stat, i) => (\n                <div\n                  key={i}\n                  className={`flex items-start gap-3 text-sm lg:text-base leading-relaxed ${subtextColor}`}\n                >\n                  <span\n                    className={`mt-2 w-1.5 h-1.5 rounded-full bg-slate-300 dark:bg-slate-600 shrink-0`}\n                  />\n                  <span>{stat}</span>\n                </div>\n              ))}\n              {details.desc?.map((line, i) => (\n                <div\n                  key={`d-${i}`}\n                  className={`flex items-start gap-3 text-sm lg:text-base leading-relaxed ${subtextColor}`}\n                >\n                  <span\n                    className={`mt-2 w-1.5 h-1.5 rounded-full bg-slate-300 dark:bg-slate-600 shrink-0`}\n                  />\n                  <span>{line}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Right Col: Tactical Grid */}\n        <div className=\"flex flex-col items-center lg:items-end w-full gap-4\">\n          {renderMovePreview()}\n          <div className=\"flex items-center gap-2 opacity-50\">\n            <div className=\"w-2 h-2 rounded-sm bg-emerald-500\" />\n            <span\n              className={`text-[10px] font-bold uppercase tracking-wider ${subtextColor}`}\n            >\n              Move\n            </span>\n            <div className=\"w-2 h-2 rounded-sm bg-brand-red ml-2\" />\n            <span\n              className={`text-[10px] font-bold uppercase tracking-wider ${subtextColor}`}\n            >\n              Attack\n            </span>\n          </div>\n        </div>\n      </div>\n\n      {/* Footer: Affinities */}\n      <div\n        className={`w-full py-6 mt-auto border-t ${darkMode ? \"border-slate-800\" : \"border-slate-100\"}`}\n      >\n        <div className=\"flex flex-col items-center gap-4\">\n          <span\n            className={`text-[10px] font-bold uppercase tracking-[0.2em] ${subtextColor} opacity-60`}\n          >\n            Terrain Mastery & Sanctuary\n          </span>\n          {renderTerrainIcons()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChessCardDetail;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/CornerControls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/DeploymentHeader.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":17,"messageId":"unexpectedAny","endLine":9,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[287,290],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[287,290],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { Sparkles, Sword } from \"lucide-react\";\nimport { PLAYER_CONFIGS } from \"@constants/unit.constants\";\nimport { PlayerTypeToggle } from \"../atoms/PlayerTypeToggle\";\n\ninterface DeploymentHeaderProps {\n  isZen: boolean;\n  gameState: string;\n  multiplayer?: any;\n  turn: string;\n  localPlayerName?: string;\n  playerTypes: Record<string, \"human\" | \"computer\">;\n  setPlayerTypes: React.Dispatch<\n    React.SetStateAction<Record<string, \"human\" | \"computer\">>\n  >;\n}\n\nexport const DeploymentHeader: React.FC<DeploymentHeaderProps> = ({\n  isZen,\n  gameState,\n  multiplayer,\n  turn,\n  localPlayerName,\n  playerTypes,\n  setPlayerTypes,\n}) => {\n  return (\n    <div className=\"flex items-center justify-between mb-6\">\n      <h2\n        className={`text-xl font-black flex items-center gap-3 uppercase tracking-tighter ${PLAYER_CONFIGS[localPlayerName || turn]?.text || \"text-slate-900\"}`}\n      >\n        {isZen ? (\n          <Sparkles size={24} className=\"text-emerald-500\" />\n        ) : (\n          <Sword size={24} />\n        )}\n        {isZen\n          ? \"Zen Garden\"\n          : gameState === \"setup\"\n            ? multiplayer?.roomId\n              ? \"Operation Deployment\"\n              : `Player ${PLAYER_CONFIGS[turn]?.name || \"\"}`\n            : \"Command Center\"}\n      </h2>\n\n      {!isZen && gameState === \"setup\" && !multiplayer?.roomId && (\n        <PlayerTypeToggle\n          turn={turn}\n          playerTypes={playerTypes}\n          setPlayerTypes={setPlayerTypes}\n        />\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/DeploymentPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":17,"messageId":"unexpectedAny","endLine":64,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2455,2458],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2455,2458],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Deployment panel component\nimport { useDeployment } from \"@hooks/useDeployment\";\nimport { SegmentedControl } from \"@molecules/SegmentedControl\";\nimport type {\n  GameState,\n  SetupMode,\n  PieceType,\n  TerrainType,\n  ArmyUnit,\n  BoardPiece,\n  GameMode,\n} from \"@engineTypes/game\";\n\n// Atomic Components\nimport { DeploymentHeader } from \"./DeploymentHeader\";\nimport { ZenPlayerTabs } from \"../atoms/ZenPlayerTabs\";\nimport { DeploymentTerrainPalette } from \"../molecules/DeploymentTerrainPalette\";\nimport { DeploymentUnitPalette } from \"../molecules/DeploymentUnitPalette\";\nimport { DeploymentActionButtons } from \"../molecules/DeploymentActionButtons\";\nimport { DeploymentFooterControls } from \"../molecules/DeploymentFooterControls\";\nimport { MultiplayerFooterControls } from \"../molecules/MultiplayerFooterControls\";\nimport { ArmyRoster } from \"../molecules/ArmyRoster\";\nimport { ZenActions } from \"../molecules/ZenActions\";\nimport { SeedLibrary } from \"../molecules/SeedLibrary\";\nimport { CheckAlert } from \"../atoms/CheckAlert\";\nimport { ActiveFieldStrategy } from \"../atoms/ActiveFieldStrategy\";\n\ninterface DeploymentPanelProps {\n  mode: GameMode;\n  terrain: TerrainType[][];\n  setTerrain?: (terrain: TerrainType[][]) => void;\n  gameState: GameState;\n  turn: string;\n  setupMode: SetupMode;\n  setSetupMode: (mode: SetupMode) => void;\n  pieceStyle: string;\n  inventory: Record<string, PieceType[]>;\n  terrainInventory: Record<string, TerrainType[]>;\n  placementPiece: PieceType | null;\n  setPlacementPiece: (piece: PieceType | null) => void;\n  placementTerrain: TerrainType | null;\n  setPlacementTerrain: (terrain: TerrainType | null) => void;\n  activePlayers: string[];\n  isAllPlaced: boolean;\n  isCurrentPlayerReady?: boolean;\n  getIcon: (unit: ArmyUnit, className?: string) => React.ReactNode;\n  getPlayerDisplayName: (pid: string) => string;\n  setTurn: (turn: string) => void;\n  setGameState: (state: GameState) => void;\n  setSelectedCell: (cell: null) => void;\n  setValidMoves: (moves: number[][]) => void;\n  randomizeTerrain: () => void;\n  generateElementalTerrain?: () => void;\n  randomizeUnits: () => void;\n  setClassicalFormation: () => void;\n  resetTerrain?: () => void;\n  resetUnits?: () => void;\n  mirrorBoard?: () => void;\n  inCheck: boolean;\n  board: (BoardPiece | null)[][];\n  setBoard?: (board: (BoardPiece | null)[][]) => void;\n  layoutName?: string;\n  setInventory?: (inventory: Record<string, PieceType[]>) => void;\n  multiplayer?: any; // Using any to avoid circular deps or complex matching, but ideally MultiplayerState\n  localPlayerId?: string;\n  playerTypes: Record<string, \"human\" | \"computer\">;\n  setPlayerTypes: React.Dispatch<\n    React.SetStateAction<Record<string, \"human\" | \"computer\">>\n  >;\n  ready?: () => void;\n  startGame?: () => void;\n  localPlayerName?: string;\n}\n\nconst DeploymentPanel: React.FC<DeploymentPanelProps> = ({\n  mode,\n  terrain,\n  setTerrain,\n  gameState,\n  turn,\n  setupMode,\n  setSetupMode,\n  pieceStyle,\n  inventory,\n  terrainInventory,\n  placementPiece,\n  setPlacementPiece,\n  placementTerrain,\n  setPlacementTerrain,\n  activePlayers,\n  isAllPlaced,\n  isCurrentPlayerReady,\n  getIcon,\n  getPlayerDisplayName,\n  setTurn,\n  setGameState,\n  setSelectedCell,\n  setValidMoves,\n  randomizeTerrain,\n  generateElementalTerrain,\n  randomizeUnits,\n  setClassicalFormation,\n  resetTerrain,\n  resetUnits,\n  mirrorBoard,\n  inCheck,\n  board,\n  setBoard,\n  layoutName,\n  setInventory,\n  multiplayer,\n  playerTypes,\n  setPlayerTypes,\n  ready,\n  startGame,\n  localPlayerName,\n}) => {\n  const {\n    copied,\n    librarySeeds,\n    maxPlacement,\n    placedCount,\n    isZen,\n    handleSave,\n    handleClearBoard,\n  } = useDeployment({\n    mode,\n    gameState,\n    terrain,\n    setTerrain,\n    board,\n    setBoard,\n    activePlayers,\n    turn,\n    localPlayerName,\n    layoutName,\n    setInventory,\n  });\n\n  // Guard against uninitialized state (e.g. during multiplayer sync)\n  if (!terrain || !terrain.length || !board || !board.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"xl:col-span-3 max-w-[375px] space-y-6 order-2 xl:order-1 sticky top-24\">\n      <div className=\"bg-white/80 dark:bg-slate-900/80 rounded-[2.5rem] p-6 border border-slate-200 dark:border-white/5 shadow-2xl flex flex-col overflow-y-auto custom-scrollbar\">\n        <DeploymentHeader\n          isZen={isZen}\n          gameState={gameState}\n          multiplayer={multiplayer}\n          turn={turn}\n          localPlayerName={localPlayerName}\n          playerTypes={playerTypes}\n          setPlayerTypes={setPlayerTypes}\n        />\n\n        <ZenPlayerTabs\n          isZen={isZen}\n          activePlayers={activePlayers}\n          turn={turn}\n          setTurn={setTurn}\n        />\n\n        {(gameState === \"setup\" || isZen) && (\n          <div className=\"mb-6\">\n            <SegmentedControl\n              options={[\n                {\n                  label: (\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-red-400\">Trench</span>\n                      <small className=\"opacity-60 text-[10px] font-bold\">\n                        {placedCount}/{maxPlacement}\n                      </small>\n                    </div>\n                  ),\n                  value: \"terrain\",\n                  activeColor: \"bg-slate-600 dark:bg-slate-700\",\n                },\n                {\n                  label: (\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-blue-400\">Chess</span>\n                      <small className=\"opacity-60 text-[10px] font-bold\">\n                        {16 - (inventory[turn] || []).length}/16\n                      </small>\n                    </div>\n                  ),\n                  value: \"pieces\",\n                  activeColor: \"bg-slate-600 dark:bg-slate-700\",\n                },\n              ]}\n              value={setupMode}\n              onChange={(val) => setSetupMode(val as SetupMode)}\n              className=\"w-full\"\n            />\n          </div>\n        )}\n\n        {(gameState === \"setup\" || isZen) && (\n          <>\n            <div className={setupMode === \"terrain\" ? \"mb-5 block\" : \"hidden\"}>\n              <DeploymentTerrainPalette\n                turn={turn}\n                terrainInventory={terrainInventory}\n                placementTerrain={placementTerrain}\n                setPlacementTerrain={setPlacementTerrain}\n                setPlacementPiece={setPlacementPiece}\n                setSetupMode={setSetupMode}\n                isZen={isZen}\n                placedCount={placedCount}\n                maxPlacement={maxPlacement}\n              />\n            </div>\n\n            <div className={setupMode === \"pieces\" ? \"block\" : \"hidden\"}>\n              <DeploymentUnitPalette\n                turn={turn}\n                inventory={inventory}\n                placementPiece={placementPiece}\n                setPlacementPiece={setPlacementPiece}\n                setPlacementTerrain={setPlacementTerrain}\n                setSetupMode={setSetupMode}\n                pieceStyle={pieceStyle}\n                getIcon={getIcon}\n              />\n            </div>\n\n            {!isZen && (\n              <DeploymentActionButtons\n                setupMode={setupMode}\n                randomizeTerrain={randomizeTerrain}\n                generateElementalTerrain={generateElementalTerrain}\n                resetTerrain={resetTerrain}\n                randomizeUnits={randomizeUnits}\n                setClassicalFormation={setClassicalFormation}\n                resetUnits={resetUnits}\n              />\n            )}\n          </>\n        )}\n\n        {(gameState === \"setup\" || isZen) && (\n          <div className=\"mt-auto space-y-3 pt-6\">\n            <DeploymentFooterControls\n              isZen={isZen}\n              multiplayer={multiplayer}\n              activePlayers={activePlayers}\n              turn={turn}\n              setTurn={setTurn}\n              setPlacementPiece={setPlacementPiece}\n              setPlacementTerrain={setPlacementTerrain}\n              isAllPlaced={isAllPlaced}\n              isCurrentPlayerReady={isCurrentPlayerReady}\n              setSelectedCell={setSelectedCell}\n              setValidMoves={setValidMoves}\n              startGame={startGame}\n            />\n\n            <MultiplayerFooterControls\n              isZen={isZen}\n              multiplayer={multiplayer}\n              startGame={startGame}\n              setSelectedCell={setSelectedCell}\n              setValidMoves={setValidMoves}\n              ready={ready}\n              isCurrentPlayerReady={isCurrentPlayerReady}\n              isAllPlaced={isAllPlaced}\n            />\n          </div>\n        )}\n\n        {gameState === \"play\" && (\n          <div className=\"space-y-6\">\n            <CheckAlert inCheck={inCheck} />\n\n            <ActiveFieldStrategy\n              turn={turn}\n              getPlayerDisplayName={getPlayerDisplayName}\n            />\n\n            <ArmyRoster\n              turn={turn}\n              board={board}\n              pieceStyle={pieceStyle}\n              getIcon={getIcon}\n            />\n          </div>\n        )}\n      </div>\n\n      {isZen && (\n        <>\n          <ZenActions\n            mirrorBoard={mirrorBoard}\n            handleSave={handleSave}\n            copied={copied}\n            setGameState={setGameState}\n            handleClearBoard={handleClearBoard}\n          />\n          <SeedLibrary\n            librarySeeds={librarySeeds}\n            setBoard={setBoard}\n            setTerrain={setTerrain}\n            setPlacementPiece={setPlacementPiece}\n            setPlacementTerrain={setPlacementTerrain}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default DeploymentPanel;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/GameBoard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/HeaderLobby.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":16,"messageId":"unexpectedAny","endLine":6,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[224,227],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[224,227],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":30,"messageId":"unexpectedAny","endLine":89,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3352,3355],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3352,3355],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { Users, Copy, Wifi, LogOut, GlobeLock, Globe } from \"lucide-react\";\nimport RouteCard from \"@/app/routes/shared/components/molecules/RouteCard\";\n\ninterface HeaderLobbyProps {\n  multiplayer: any;\n  onClick?: () => void;\n  onMouseEnter?: () => void;\n  onMouseLeave?: () => void;\n}\n\nconst HeaderLobby: React.FC<HeaderLobbyProps> = ({\n  multiplayer,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n}) => {\n  if (!multiplayer) return null;\n\n  const { isConnected, roomId, players, leaveGame, isHost } = multiplayer;\n\n  const copyCode = () => {\n    if (roomId) {\n      navigator.clipboard.writeText(roomId);\n    }\n  };\n\n  // CONTAINER STYLE (Matching MenuCard)\n  const containerClass =\n    \"group flex flex-col items-center gap-6 bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border-4 border-slate-200/30 dark:border-white/5 hover:border-brand-blue shadow-2xl w-full h-full animate-in fade-in slide-in-from-bottom-8 duration-700 relative overflow-hidden transition-all hover:-translate-y-2 cursor-pointer\";\n\n  if (!isConnected) {\n    return (\n      <RouteCard\n        onClick={() => {}}\n        title=\"Connecting\"\n        description=\"Establishing server uplink\"\n        Icon={() => (\n          <div className=\"relative w-16 h-16 flex items-center justify-center\">\n            <Wifi size={64} className=\"text-brand-blue animate-pulse\" />\n          </div>\n        )}\n        color=\"blue\"\n        className=\"w-full h-full\"\n      />\n    );\n  }\n\n  if (roomId) {\n    // IN LOBBY STATE\n    return (\n      <div className={containerClass}>\n        <div className=\"absolute inset-0 bg-gradient-to-br from-brand-blue/0 to-brand-blue/0 group-hover:from-brand-blue/5 group-hover:to-brand-blue/10\" />\n\n        <div className=\"relative w-16 h-16 flex items-center justify-center\">\n          <Users size={64} className=\"text-brand-blue\" />\n        </div>\n\n        <div className=\"text-center relative z-10\">\n          <h3 className=\"text-2xl font-black uppercase tracking-widest text-slate-900 dark:text-white\">\n            Battle <span className=\"text-brand-blue\">Lobby</span>\n          </h3>\n          <p className=\"text-slate-400 dark:text-slate-500 mt-2 font-medium leading-relaxed\">\n            Room Code:{\" \"}\n            <span className=\"text-brand-blue font-bold\">{roomId}</span>\n          </p>\n        </div>\n\n        <div className=\"flex flex-col items-center gap-1 w-full text-center relative z-10\">\n          <button\n            onClick={copyCode}\n            className=\"group/copy flex items-center justify-center gap-3 w-full py-4 rounded-2xl bg-brand-blue/5 hover:bg-brand-blue/10 border border-brand-blue/20 transition-all cursor-pointer overflow-hidden\"\n            title=\"Click to Copy Link\"\n          >\n            <span className=\"text-3xl font-black tracking-[0.2em] font-mono text-brand-blue dark:text-brand-blue group-hover/copy:scale-105 transition-transform\">\n              {roomId}\n            </span>\n            <Copy\n              size={16}\n              className=\"text-brand-blue opacity-50 group-hover/copy:opacity-100\"\n            />\n          </button>\n        </div>\n\n        <div className=\"w-full h-px bg-slate-200 dark:bg-slate-800 relative z-10\" />\n\n        <div className=\"flex flex-col items-center gap-4 w-full relative z-10\">\n          <div className=\"flex -space-x-3\">\n            {players.map((p: any, i: number) => (\n              <div\n                key={i}\n                className=\"w-12 h-12 rounded-full bg-slate-900 dark:bg-slate-100 border-2 border-white dark:border-slate-900 flex items-center justify-center text-white dark:text-slate-900 text-sm font-black shadow-xl z-20 relative\"\n                title={p.name}\n              >\n                {p.name?.[0]?.toUpperCase() || \"P\"}\n              </div>\n            ))}\n            {Array.from({ length: Math.max(0, 4 - players.length) }).map(\n              (_, i) => (\n                <div\n                  key={`empty-${i}`}\n                  className=\"w-12 h-12 rounded-full bg-slate-200 dark:bg-slate-800/50 border-2 border-dashed border-slate-300 dark:border-slate-700\"\n                />\n              ),\n            )}\n          </div>\n          <span className=\"text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-widest\">\n            {players.length} / 4 PLAYERS\n          </span>\n        </div>\n\n        <div className=\"w-full h-px bg-slate-200 dark:bg-slate-800 relative z-10\" />\n\n        <div className=\"flex flex-col items-center gap-4 w-full relative z-10\">\n          <p className=\"text-[10px] font-bold text-center text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] px-4 leading-relaxed\">\n            {isHost\n              ? \"Lobby active. Configure the board and begin.\"\n              : \"Waiting for host to commence.\"}\n          </p>\n\n          <button\n            onClick={leaveGame}\n            className=\"group flex items-center gap-2 text-xs font-black text-brand-red hover:text-brand-red uppercase tracking-[0.2em] transition-all cursor-pointer\"\n          >\n            <LogOut\n              size={14}\n              className=\"group-hover:-translate-x-1 transition-transform\"\n            />\n            Abandon Room\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // NO LOBBY - CLEAN CARD\n  return (\n    <RouteCard\n      onClick={onClick || (() => {})}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      title=\"Worlds Change\"\n      description='\"Borders become Barbeques.\" (Online Play)'\n      Icon={Globe}\n      HoverIcon={GlobeLock}\n      color=\"blue\"\n      className=\"w-full h-full\"\n    />\n  );\n};\n\nexport default HeaderLobby;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/IntelPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":93,"column":17,"messageId":"unusedExpression","endLine":93,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":284,"column":71,"messageId":"unexpectedAny","endLine":284,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11809,11812],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11809,11812],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-useless-assignment","severity":2,"message":"This assigned value is not used in subsequent statements.","line":337,"column":5,"messageId":"unnecessaryAssignment","endLine":337,"endColumn":12},{"ruleId":"no-useless-assignment","severity":2,"message":"This assigned value is not used in subsequent statements.","line":338,"column":5,"messageId":"unnecessaryAssignment","endLine":338,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":397,"column":56,"messageId":"unexpectedAny","endLine":397,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16866,16869],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16866,16869],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Intel panel component\nimport { Info, Users, ThumbsUp, ThumbsDown, AlertTriangle } from \"lucide-react\";\nimport { isUnitProtected } from \"@logic/gameLogic\";\nimport { getTraversableTerrains } from \"@setup/terrainCompat\";\nimport { PLAYER_CONFIGS } from \"@constants/unit.constants\";\nimport { PIECES, INITIAL_ARMY } from \"@engineConfigs/unitDetails\";\nimport { TERRAIN_INTEL } from \"@engineConfigs/terrainDetails\";\nimport { TERRAIN_TYPES } from \"@engineConfigs/terrainDetails\";\nimport type {\n  GameState,\n  SetupMode,\n  PieceType,\n  TerrainType,\n  BoardPiece,\n  ArmyUnit,\n} from \"@engineTypes/game\";\nimport type {\n  UnitIntelPanelEntry,\n  TerrainIntelPanelEntry,\n} from \"@engineTypes/guide\";\n\nimport {\n  UNIT_INTEL_PANEL,\n  TERRAIN_INTEL_PANEL,\n} from \"@constants/intel.constants\";\nimport { UnitIntelCard } from \"../molecules/UnitIntelCard\";\nimport { TerrainPreviewGrid } from \"../molecules/TerrainPreviewGrid\";\n\ninterface IntelPanelProps {\n  gameState: GameState;\n  setupMode: SetupMode;\n  placementPiece: PieceType | null;\n  placementTerrain: TerrainType | null;\n  selectedCell: [number, number] | null;\n  board: (BoardPiece | null)[][];\n  terrain: TerrainType[][];\n  pieceStyle: string;\n  getIcon: (unit: ArmyUnit, className?: string) => React.ReactNode;\n  activePlayers?: string[];\n  capturedBy?: Record<string, BoardPiece[]>;\n}\n\nconst IntelPanel: React.FC<IntelPanelProps> = ({\n  gameState,\n  setupMode,\n  placementPiece,\n  placementTerrain,\n  selectedCell,\n  board,\n  terrain,\n  pieceStyle: _pieceStyle,\n  getIcon,\n  activePlayers = [\"red\", \"yellow\"],\n  capturedBy = {},\n}) => {\n  let activeData: UnitIntelPanelEntry | TerrainIntelPanelEntry | null = null;\n  let activeType: \"unit\" | \"terrain\" | null = null;\n\n  if (gameState === \"setup\" || gameState === \"zen-garden\") {\n    if (setupMode === \"pieces\" && placementPiece) {\n      activeData = UNIT_INTEL_PANEL[placementPiece];\n      activeType = \"unit\";\n    } else if (setupMode === \"terrain\" && placementTerrain) {\n      activeData = TERRAIN_INTEL_PANEL[placementTerrain];\n      activeType = \"terrain\";\n    }\n  } else if (gameState === \"play\" && selectedCell) {\n    const [r, c] = selectedCell;\n    const piece = board[r][c];\n    if (piece) {\n      activeData = UNIT_INTEL_PANEL[piece.type];\n      activeType = \"unit\";\n    } else {\n      activeData = TERRAIN_INTEL_PANEL[terrain[r][c]];\n      activeType = \"terrain\";\n    }\n  }\n\n  if (!activeData) {\n    if (gameState === \"play\") {\n      // Show Scoreboard / Game Status\n      return (\n        <div className=\"xl:col-span-3 order-3\">\n          <div className=\"bg-white/60 dark:bg-slate-900/40 p-6 rounded-[2.5rem] border border-slate-200 dark:border-white/5 sticky top-24 min-h-[400px] flex flex-col gap-4\">\n            <div className=\"text-center mb-2\">\n              <h3 className=\"text-xl font-black uppercase tracking-widest text-slate-400 dark:text-slate-500\">\n                Current Intel\n              </h3>\n            </div>\n\n            <div className=\"space-y-4\">\n              {activePlayers.map((pid) => {\n                PLAYER_CONFIGS[pid];\n                // Calculate army value\n                let armyValue = 0;\n\n                // Count current units for this player\n                const currentCounts: Record<string, number> = {};\n                board.forEach((row) => {\n                  row.forEach((cell) => {\n                    if (cell && cell.player === pid) {\n                      currentCounts[cell.type] =\n                        (currentCounts[cell.type] || 0) + 1;\n                    }\n                  });\n                });\n\n                INITIAL_ARMY.forEach((unit) => {\n                  const currentParams = UNIT_INTEL_PANEL[unit.type];\n                  const count = currentCounts[unit.type] || 0;\n\n                  // Add value for surviving units\n                  if (typeof currentParams.points === \"number\") {\n                    armyValue += count * currentParams.points;\n                  }\n                });\n\n                const capturedUnits = capturedBy[pid] || [];\n\n                // Calculate capture value\n                let captureValue = 0;\n                capturedUnits.forEach((piece) => {\n                  const unitParams = UNIT_INTEL_PANEL[piece.type];\n                  if (unitParams && typeof unitParams.points === \"number\") {\n                    captureValue += unitParams.points;\n                  }\n                });\n\n                return (\n                  <UnitIntelCard\n                    key={pid}\n                    pid={pid}\n                    armyValue={armyValue}\n                    captureValue={captureValue}\n                    capturedUnits={capturedUnits}\n                    getIcon={getIcon}\n                  />\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"xl:col-span-3 order-3\">\n        <div className=\"bg-white/60 dark:bg-slate-900/40 p-8 rounded-[2.5rem] border border-slate-200 dark:border-white/5 sticky top-24 min-h-[400px] flex flex-col items-center justify-center text-center\">\n          <div className=\"flex flex-col items-center gap-4 animate-in fade-in zoom-in-95 duration-700\">\n            <div className=\"w-20 h-20 rounded-full bg-slate-100 dark:bg-white/5 flex items-center justify-center mb-2 border border-slate-200 dark:border-white/5 shadow-inner\">\n              <Info size={40} className=\"text-slate-400 dark:text-slate-500\" />\n            </div>\n            <h3 className=\"text-4xl font-black uppercase tracking-tighter text-slate-900 dark:text-white mb-1\">\n              {setupMode === \"terrain\" ? \"Open the Trench\" : \"Crack the Game\"}\n            </h3>\n            <p className=\"text-sm font-black text-slate-500 dark:text-slate-400 max-w-[260px] leading-relaxed uppercase tracking-[0.2em]\">\n              {setupMode === \"terrain\"\n                ? \"Lay 16 pieces of trench however you wish.\"\n                : \"Lay your Chessmen however you wish.\"}\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (activeType === \"unit\") {\n    const unitData = activeData as UnitIntelPanelEntry;\n    const activePieceType =\n      placementPiece ||\n      (selectedCell && board[selectedCell[0]][selectedCell[1]]?.type);\n    const unit = INITIAL_ARMY.find((u) => u.type === activePieceType);\n\n    const previewGridSize = 8;\n    const centerRow = 4;\n    const centerCol = 3;\n    const moves = unitData.movePattern(centerRow, centerCol);\n\n    return (\n      <div className=\"xl:col-span-3 order-3\">\n        <div className=\"bg-white/60 dark:bg-slate-900/40 p-8 rounded-[2.5rem] border border-slate-200 dark:border-white/5 sticky top-24 min-h-[400px] flex flex-col items-center justify-center text-center\">\n          <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500 w-full\">\n            <div className=\"flex items-center gap-6 mb-8 text-left\">\n              <div\n                className={`w-24 h-24 bg-slate-200 dark:bg-slate-800 rounded-2xl flex items-center justify-center border border-slate-300 dark:border-slate-700 shadow-xl shrink-0 text-4xl \n                  ${selectedCell && terrain[selectedCell[0]][selectedCell[1]] && isUnitProtected(activePieceType!, terrain[selectedCell[0]][selectedCell[1]]) ? \"border-double border-[6px]\" : \"\"}\n                `}\n              >\n                {unit &&\n                  getIcon(unit, \"w-16 h-16 text-slate-900 dark:text-white\")}\n              </div>\n              <div>\n                <h3 className=\"text-3xl font-black uppercase tracking-tighter text-slate-900 dark:text-white leading-none mb-1\">\n                  {unitData.title}\n                </h3>\n                <div className=\"flex items-center gap-3\">\n                  <p className=\"text-sm font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-widest\">\n                    {unitData.role}\n                  </p>\n                  <span className=\"text-xs font-black text-slate-400 dark:text-slate-500 bg-slate-100 dark:bg-white/5 px-2 py-0.5 rounded-full border border-slate-200 dark:border-white/5\">\n                    {unitData.points === \"âˆž\" ? \"âˆž\" : unitData.points}{\" \"}\n                    {unitData.points === \"âˆž\"\n                      ? \"\"\n                      : unitData.points === 1\n                        ? \"PT\"\n                        : \"PTS\"}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-slate-100 dark:bg-slate-800/50 rounded-2xl p-4 mb-6 border border-slate-200 dark:border-white/5\">\n              <div className=\"text-xs font-black uppercase tracking-widest text-slate-400 mb-3 text-center\">\n                Movement Pattern\n              </div>\n              <div\n                className=\"grid gap-[2px] mx-auto w-64\"\n                style={{\n                  gridTemplateColumns: `repeat(${previewGridSize}, 1fr)`,\n                }}\n              >\n                {Array.from({\n                  length: previewGridSize * previewGridSize,\n                }).map((_, i) => {\n                  const r = Math.floor(i / previewGridSize);\n                  const c = i % previewGridSize;\n                  const isCenter = r === centerRow && c === centerCol;\n                  const isMove = moves.some(([mr, mc]) => mr === r && mc === c);\n\n                  const isDark = (r + c) % 2 === 1;\n                  const baseColor = isDark\n                    ? \"bg-slate-300 dark:bg-white/10\"\n                    : \"bg-slate-200 dark:bg-white/5\";\n\n                  return (\n                    <div\n                      key={i}\n                      className={`aspect-square rounded-[2px] transition-all flex items-center justify-center ${\n                        isCenter\n                          ? \"bg-slate-900 dark:bg-white z-10 scale-110 shadow-lg\"\n                          : isMove\n                            ? \"bg-emerald-500/80 shadow-emerald-500/50 shadow-sm\"\n                            : baseColor\n                      }`}\n                    >\n                      {isCenter &&\n                        unit &&\n                        getIcon(unit, \"w-4 h-4 text-white dark:text-black\")}\n                    </div>\n                  );\n                })}\n              </div>\n              {unitData.title === \"Bot\" && (\n                <p className=\"text-[10px] text-center text-slate-400 mt-2 font-bold uppercase\">\n                  (Direction depends on player)\n                </p>\n              )}\n            </div>\n\n            <p className=\"text-sm text-slate-500 dark:text-slate-400 font-bold leading-relaxed text-left border-l-4 border-slate-300 dark:border-slate-700 pl-4 mb-6\">\n              {unitData.desc}\n            </p>\n\n            {/* Terrain Compatibility */}\n            {activePieceType &&\n              (() => {\n                const traversable = getTraversableTerrains(activePieceType);\n                const allTerrains = [\n                  TERRAIN_TYPES.TREES,\n                  TERRAIN_TYPES.PONDS,\n                  TERRAIN_TYPES.RUBBLE,\n                  TERRAIN_TYPES.DESERT,\n                ];\n                return (\n                  <div className=\"bg-slate-100 dark:bg-slate-800/50 rounded-2xl p-4 border border-slate-200 dark:border-white/5\">\n                    <div className=\"text-xs font-black uppercase tracking-widest text-slate-400 mb-3 text-center\">\n                      Terrain Compatibility\n                    </div>\n                    <div className=\"grid grid-cols-4 gap-2\">\n                      {allTerrains.map((t) => {\n                        const intel = TERRAIN_INTEL[t];\n                        if (!intel) return null;\n                        const IconComp = intel.icon;\n                        const canTraverse = traversable.includes(t as any);\n                        const colorClass = intel.color;\n                        return (\n                          <div\n                            key={t}\n                            className={`flex flex-col items-center gap-1 p-2 rounded-xl transition-all ${canTraverse ? \"bg-emerald-500/10 border border-emerald-500/20\" : \"bg-brand-red/5 border border-brand-red/10 opacity-40\"}`}\n                          >\n                            <IconComp\n                              size={28}\n                              className={\n                                canTraverse ? colorClass : \"text-slate-500\"\n                              }\n                            />\n                            <span className=\"text-[8px] font-black uppercase tracking-wider text-slate-400\">\n                              {intel.label}\n                            </span>\n                            <span\n                              className={`text-[8px] font-black uppercase ${canTraverse ? \"text-emerald-500\" : \"text-brand-red\"}`}\n                            >\n                              {canTraverse ? \"âœ“\" : \"âœ—\"}\n                            </span>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                );\n              })()}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Terrain intel\n  const terrainData = activeData as TerrainIntelPanelEntry;\n  let bgClass = \"bg-slate-900/20\";\n  let borderClass = \"border-slate-500/30\";\n  let textClass = \"text-slate-500\";\n\n  if (terrainData.color === \"brand-red\") {\n    bgClass = \"bg-red-900/20\";\n    borderClass = \"border-brand-red/30\";\n    textClass = \"text-brand-red\";\n  } else if (terrainData.color === \"emerald\") {\n    bgClass = \"bg-emerald-900/20\";\n    borderClass = \"border-emerald-500/30\";\n    textClass = \"text-emerald-500\";\n  } else if (terrainData.color === \"brand-blue\") {\n    bgClass = \"bg-blue-900/20\";\n    borderClass = \"border-brand-blue/30\";\n    textClass = \"text-brand-blue\";\n  } else if (terrainData.color === \"sky\") {\n    bgClass = \"bg-sky-50 dark:bg-sky-900/20\";\n    borderClass = \"border-sky-200 dark:border-sky-500/30\";\n    bgClass = \"bg-sky-50 dark:bg-sky-900/20\";\n    borderClass = \"border-sky-200 dark:border-sky-500/30\";\n    textClass = \"text-sky-500 dark:text-sky-400\";\n  } else if (terrainData.color === \"amber\") {\n    bgClass = \"bg-amber-50 dark:bg-amber-900/20\";\n    borderClass = \"border-amber-200 dark:border-amber-500/30\";\n    textClass = \"text-amber-500 dark:text-amber-400\";\n  }\n\n  return (\n    <div className=\"xl:col-span-3 order-3\">\n      <div className=\"bg-white/60 dark:bg-slate-900/40 p-8 rounded-[2.5rem] border border-slate-200 dark:border-white/5 sticky top-24 min-h-[400px] flex flex-col items-center justify-center text-center\">\n        <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500 w-full\">\n          <div className=\"flex items-center gap-6 mb-8 text-left\">\n            <div\n              className={`w-24 h-24 rounded-2xl flex items-center justify-center border ${bgClass} ${borderClass} shadow-xl shrink-0`}\n            >\n              <terrainData.icon className={textClass} size={48} />\n            </div>\n            <div>\n              <h3\n                className={`text-3xl font-black uppercase tracking-tighter leading-none mb-1 ${textClass}`}\n              >\n                {terrainData.label}\n              </h3>\n              <p className=\"text-sm font-bold text-slate-400 uppercase tracking-widest\">\n                Terrain Type\n              </p>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            {terrainData.interactions.map((rule, i) => (\n              <div\n                key={i}\n                className=\"flex items-center justify-between p-3 bg-slate-50 dark:bg-white/5 rounded-xl border border-slate-200 dark:border-white/5\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  {(() => {\n                    const uType =\n                      PIECES[rule.unit.toUpperCase()] ||\n                      (rule.unit === \"Tank\" ? PIECES.ROOK : null) ||\n                      (rule.unit === \"Sniper\" ? PIECES.BISHOP : null) ||\n                      (rule.unit === \"Horseman\" ? PIECES.KNIGHT : null);\n                    const u = INITIAL_ARMY.find((x) => x.type === uType);\n\n                    // We need to know which terrain this is to check protection\n                    let tKey = null;\n                    if (terrainData.label === \"Swamp\")\n                      tKey = TERRAIN_TYPES.PONDS;\n                    else if (terrainData.label === \"Forest\")\n                      tKey = TERRAIN_TYPES.TREES;\n                    else if (terrainData.label === \"Mountains\")\n                      tKey = TERRAIN_TYPES.RUBBLE;\n                    else if (terrainData.label === \"Desert\")\n                      tKey = TERRAIN_TYPES.DESERT;\n\n                    const isProtected =\n                      tKey && isUnitProtected(uType as any, tKey);\n\n                    return u ? (\n                      <div\n                        className={\n                          isProtected\n                            ? \"border-double border-2 p-0.5 rounded-lg border-current\"\n                            : \"\"\n                        }\n                      >\n                        {getIcon(\n                          u,\n                          \"w-6 h-6 text-slate-700 dark:text-slate-300\",\n                        )}\n                      </div>\n                    ) : (\n                      <Users size={20} className=\"text-slate-400\" />\n                    );\n                  })()}\n                  <div className=\"text-left\">\n                    <span className=\"block text-xs font-black uppercase tracking-wider text-slate-700 dark:text-slate-300 leading-none mb-1\">\n                      {rule.unit}\n                    </span>\n                    <div className=\"flex items-center gap-1\">\n                      {rule.status === \"allow\" && (\n                        <ThumbsUp\n                          size={12}\n                          className=\"text-emerald-600 dark:text-emerald-400\"\n                        />\n                      )}\n                      {rule.status === \"block\" && (\n                        <ThumbsDown\n                          size={12}\n                          className=\"text-brand-red dark:text-brand-red\"\n                        />\n                      )}\n                      {rule.status === \"special\" && (\n                        <AlertTriangle\n                          size={12}\n                          className=\"text-amber-600 dark:text-amber-400\"\n                        />\n                      )}\n                      <span\n                        className={`text-[10px] font-bold uppercase tracking-wider ${\n                          rule.status === \"allow\"\n                            ? \"text-emerald-600 dark:text-emerald-400\"\n                            : rule.status === \"block\"\n                              ? \"text-brand-red dark:text-brand-red\"\n                              : \"text-amber-600 dark:text-amber-400\"\n                        }`}\n                      >\n                        {rule.text}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n\n                {rule.unit !== \"Others\" && (\n                  <TerrainPreviewGrid\n                    unitType={rule.unit}\n                    terrainData={terrainData}\n                  />\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default IntelPanel;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/MmoActionBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/SeedLibrary.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/SeedLibrary.tsx:114:11\n  112 |         const data = JSON.parse(stored);\n  113 |         if (Array.isArray(data)) {\n> 114 |           setSeeds(\n      |           ^^^^^^^^ Avoid calling setState() directly within an effect\n  115 |             data.sort(\n  116 |               (a, b) =>\n  117 |                 new Date(b.createdAt).getTime() -","line":114,"column":11,"endLine":114,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\n * Copyright (c) 2006 - 2026 Hall of the Gods, Inc.\n * All Rights Reserved.\n */\nimport React, { useState, useEffect } from \"react\";\nimport {\n  ChevronLeft,\n  Play,\n  Share2,\n  Calendar,\n  Search,\n  Database,\n  Pencil,\n  Bomb,\n} from \"lucide-react\";\nimport { deserializeGame, adaptSeedToMode } from \"@utils/gameUrl\";\nimport { PLAYER_CONFIGS } from \"@constants/unit.constants\";\nimport { INITIAL_ARMY } from \"@engineConfigs/unitDetails\";\nimport { getQuadrantBaseStyle } from \"@setup/boardLayouts\";\nimport type { GameMode } from \"@engineTypes/game\";\n\ninterface SeedItem {\n  id: string;\n  name: string;\n  seed: string;\n  mode: string;\n  createdAt: string;\n}\n\ninterface SeedLibraryProps {\n  onBack: () => void;\n  onLoadSeed: (seed: string) => void;\n  onEditInZen: (seed: string) => void;\n  activeMode?: GameMode | null;\n}\n\nexport const MiniBoard: React.FC<{\n  seed: string;\n  mode: string;\n  activeMode?: GameMode | null;\n}> = ({ seed, mode, activeMode }) => {\n  let data = deserializeGame(seed);\n  if (!data)\n    return (\n      <div className=\"w-full aspect-square bg-slate-800 rounded-xl flex items-center justify-center text-[10px] text-slate-500 uppercase font-black\">\n        Invalid Seed\n      </div>\n    );\n\n  // Adapt to active mode if provided\n  if (activeMode) {\n    data = adaptSeedToMode(data, activeMode);\n  }\n\n  const { board, terrain } = data;\n  const displayMode = activeMode || (mode as GameMode);\n  const size = 12;\n  const cells = [];\n\n  for (let r = 0; r < size; r++) {\n    for (let c = 0; c < size; c++) {\n      const piece = board[r][c];\n      const terr = terrain[r][c];\n      const baseStyle = getQuadrantBaseStyle(r, c, displayMode);\n\n      let cellClass = baseStyle;\n      if (terr === \"trees\") cellClass = \"bg-emerald-800/80\";\n      else if (terr === \"ponds\") cellClass = \"bg-blue-800/80\";\n      else if (terr === \"rubble\") cellClass = \"bg-stone-600/80\";\n      else if (terr === \"desert\")\n        cellClass =\n          \"bg-amber-400/80 shadow-[inset_0_0_10px_rgba(255,255,255,0.3)]\";\n\n      cells.push(\n        <div\n          key={`${r}-${c}`}\n          className={`${cellClass} w-full h-full rounded-[1px] relative flex items-center justify-center`}\n        >\n          {piece && (\n            <div\n              className={`text-[6px] ${PLAYER_CONFIGS[piece.player]?.text || \"text-white\"}`}\n            >\n              {INITIAL_ARMY.find((u) => u.type === piece.type)?.bold || \"â€¢\"}\n            </div>\n          )}\n        </div>,\n      );\n    }\n  }\n\n  return (\n    <div className=\"w-full aspect-square grid grid-cols-12 gap-[0.5px] bg-slate-900 border border-white/5 rounded-lg overflow-hidden p-1 shadow-inner\">\n      {cells}\n    </div>\n  );\n};\n\nconst SeedLibrary: React.FC<SeedLibraryProps> = ({\n  onBack,\n  onLoadSeed,\n  onEditInZen,\n  activeMode,\n}) => {\n  const [seeds, setSeeds] = useState<SeedItem[]>([]);\n  const [search, setSearch] = useState(\"\");\n  const [copiedId, setCopiedId] = useState<string | null>(null);\n\n  useEffect(() => {\n    const stored = localStorage.getItem(\"trenchess_seeds\");\n    if (stored) {\n      try {\n        const data = JSON.parse(stored);\n        if (Array.isArray(data)) {\n          setSeeds(\n            data.sort(\n              (a, b) =>\n                new Date(b.createdAt).getTime() -\n                new Date(a.createdAt).getTime(),\n            ),\n          );\n        }\n      } catch (e) {\n        console.error(\"Failed to parse seeds\", e);\n      }\n    }\n  }, []);\n\n  const handleDelete = (id: string) => {\n    if (confirm(\"Permanently delete this seed?\")) {\n      const updated = seeds.filter((s) => s.id !== id);\n      setSeeds(updated);\n      localStorage.setItem(\"trenchess_seeds\", JSON.stringify(updated));\n    }\n  };\n\n  const handleCopyLink = (seed: string, id: string) => {\n    const url = new URL(window.location.href);\n    url.searchParams.set(\"seed\", seed);\n    navigator.clipboard.writeText(url.toString()).then(() => {\n      setCopiedId(id);\n      setTimeout(() => setCopiedId(null), 2000);\n    });\n  };\n\n  const filteredSeeds = seeds.filter(\n    (s) =>\n      s.name.toLowerCase().includes(search.toLowerCase()) ||\n      s.mode.toLowerCase().includes(search.toLowerCase()),\n  );\n\n  return (\n    <div className=\"min-h-screen bg-stone-100 dark:bg-[#050b15] text-slate-900 dark:text-slate-100 flex flex-col items-center p-4 md:p-8 transition-colors\">\n      <div className=\"w-full max-w-7xl\">\n        {/* Header */}\n        <div className=\"flex flex-col md:flex-row items-center justify-between gap-6 mb-12\">\n          <div className=\"flex items-center gap-6\">\n            <button\n              onClick={onBack}\n              className=\"w-12 h-12 rounded-2xl bg-white dark:bg-slate-900 border border-slate-200 dark:border-white/5 shadow-xl flex items-center justify-center hover:scale-105 active:scale-95 transition-all text-slate-500 hover:text-slate-900 dark:hover:text-white cursor-pointer\"\n            >\n              <ChevronLeft size={24} />\n            </button>\n            <div>\n              <h1 className=\"text-4xl font-black uppercase tracking-tighter flex items-center gap-3\">\n                <Database className=\"text-amber-500\" size={32} />\n                Seed Library\n              </h1>\n              <p className=\"text-slate-500 dark:text-slate-400 font-bold text-xs uppercase tracking-widest mt-1\">\n                Your Vault of Tactical Formations\n              </p>\n            </div>\n          </div>\n\n          <div className=\"relative group w-full md:w-96\">\n            <Search\n              className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-amber-500 transition-colors\"\n              size={18}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"SEARCH BY NAME OR MODE...\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              className=\"w-full bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-white/5 rounded-2xl py-4 pl-12 pr-4 text-xs font-black uppercase tracking-widest focus:outline-none focus:border-amber-500/50 transition-all placeholder:text-slate-300 dark:placeholder:text-slate-700 shadow-xl\"\n            />\n          </div>\n        </div>\n\n        {filteredSeeds.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center py-32 text-center opacity-30\">\n            <Database size={64} className=\"mb-4\" />\n            <h3 className=\"text-2xl font-black uppercase tracking-tighter\">\n              No Seeds Found\n            </h3>\n            <p className=\"text-sm font-bold uppercase tracking-widest mt-2\">\n              Save your first layout in Zen Garden to see it here.\n            </p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n            {filteredSeeds.map((item) => (\n              <div\n                key={item.id}\n                className=\"bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-white/5 rounded-[2.5rem] p-6 shadow-2xl hover:scale-[1.02] transition-all group relative overflow-hidden flex flex-col\"\n              >\n                {/* Mini Board Preview */}\n                <div className=\"mb-6 relative\">\n                  <MiniBoard\n                    seed={item.seed}\n                    mode={item.mode}\n                    activeMode={activeMode}\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-white/10 dark:from-black/40 to-transparent pointer-events-none rounded-lg\" />\n\n                  {/* Board Mode Badge */}\n                  <div className=\"absolute bottom-4 left-0 right-0 z-10 flex items-center justify-center pointer-events-none\">\n                    <div className=\"bg-slate-900/80 backdrop-blur-md text-white px-3 py-1.5 rounded-full border border-white/10 shadow-xl flex items-center justify-center\">\n                      <span className=\"text-[8px] font-black uppercase tracking-[0.2em] leading-none\">\n                        {item.mode}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Seed Info */}\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-black uppercase tracking-tighter truncate leading-tight group-hover:text-amber-500 transition-colors\">\n                    {item.name}\n                  </h3>\n                  <div className=\"flex items-center gap-2 text-slate-400 text-[10px] font-bold uppercase tracking-widest mt-2\">\n                    <Calendar size={12} />\n                    {new Date(item.createdAt).toLocaleDateString()}\n                  </div>\n                </div>\n\n                {/* Actions */}\n                <div className=\"mt-6 grid grid-cols-2 gap-2\">\n                  <button\n                    onClick={() => onLoadSeed(item.seed)}\n                    className=\"flex items-center justify-center gap-2 bg-brand-red hover:bg-brand-red/80 text-white py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-brand-red/20 cursor-pointer\"\n                  >\n                    <Play size={14} /> Play\n                  </button>\n                  <button\n                    onClick={() => onEditInZen(item.seed)}\n                    className=\"flex items-center justify-center gap-2 bg-emerald-600/10 hover:bg-emerald-600/20 text-emerald-600 dark:text-emerald-400 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border border-emerald-500/20 cursor-pointer\"\n                  >\n                    <Pencil size={14} /> Edit\n                  </button>\n                </div>\n\n                <div className=\"mt-2 grid grid-cols-2 gap-2\">\n                  <button\n                    onClick={() => handleCopyLink(item.seed, item.id)}\n                    className={`flex items-center justify-center gap-2 ${copiedId === item.id ? \"bg-amber-500 text-white cursor-default\" : \"bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 text-slate-500 dark:text-slate-400 cursor-pointer\"} py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all`}\n                  >\n                    {copiedId === item.id ? (\n                      <>\n                        <Play size={14} /> Copied\n                      </>\n                    ) : (\n                      <>\n                        <Share2 size={14} /> Share\n                      </>\n                    )}\n                  </button>\n                  <button\n                    onClick={() => handleDelete(item.id)}\n                    className=\"flex items-center justify-center gap-2 bg-slate-100 dark:bg-white/5 hover:bg-brand-red/10 hover:text-brand-red text-slate-500 dark:text-slate-400 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all cursor-pointer\"\n                  >\n                    <Bomb size={14} /> Delete\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SeedLibrary;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/Shoutbox.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":16,"messageId":"unexpectedAny","endLine":5,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[154,157],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[154,157],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":30,"messageId":"unexpectedAny","endLine":75,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2245,2248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2245,2248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from \"react\";\nimport { Send, MessageSquare } from \"lucide-react\";\n\ninterface ShoutboxProps {\n  multiplayer: any;\n  darkMode: boolean;\n}\n\nconst Shoutbox: React.FC<ShoutboxProps> = ({ multiplayer, darkMode }) => {\n  const [text, setText] = useState(\"\");\n  const messagesContainerRef = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = () => {\n    if (messagesContainerRef.current) {\n      messagesContainerRef.current.scrollTo({\n        top: messagesContainerRef.current.scrollHeight,\n        behavior: \"smooth\",\n      });\n    }\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [multiplayer?.chatMessages]);\n\n  const handleSend = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (text.trim() && multiplayer?.sendMessage) {\n      multiplayer.sendMessage(text.trim());\n      setText(\"\");\n    }\n  };\n\n  const messages = multiplayer?.chatMessages || [];\n\n  return (\n    <div\n      className={`flex flex-col h-full w-full max-w-md rounded-2xl overflow-hidden border-2 ${\n        darkMode\n          ? \"bg-slate-900/50 border-slate-800 backdrop-blur-md\"\n          : \"bg-white/80 border-slate-200 backdrop-blur-md shadow-xl\"\n      }`}\n    >\n      {/* Header */}\n      <div\n        className={`px-4 py-3 flex items-center gap-2 border-b ${\n          darkMode\n            ? \"border-slate-800 bg-slate-800/50\"\n            : \"border-slate-100 bg-slate-50/50\"\n        }`}\n      >\n        <MessageSquare size={18} className=\"text-brand-blue\" />\n        <h3\n          className={`font-black uppercase tracking-tighter text-sm ${\n            darkMode ? \"text-slate-300\" : \"text-slate-600\"\n          }`}\n        >\n          Shoutbox\n        </h3>\n      </div>\n\n      {/* Messages */}\n      <div\n        ref={messagesContainerRef}\n        className=\"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar\"\n      >\n        {messages.length === 0 ? (\n          <div className=\"h-full flex flex-col items-center justify-center opacity-30 text-center px-8\">\n            <MessageSquare size={48} className=\"mb-2\" />\n            <p className=\"text-sm font-medium italic\">\n              \"No communications yet. The void is silent.\"\n            </p>\n          </div>\n        ) : (\n          messages.map((msg: any) => {\n            const isMe = msg.senderId === multiplayer.socketId;\n            return (\n              <div\n                key={msg.id}\n                className={`flex flex-col ${isMe ? \"items-end\" : \"items-start\"}`}\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  {!isMe && (\n                    <span\n                      className={`text-[10px] font-black uppercase px-1.5 py-0.5 rounded ${\n                        msg.playerIndex === 0\n                          ? \"bg-white text-slate-900 border border-slate-400\"\n                          : msg.playerIndex === 1\n                            ? \"bg-slate-900 text-white\"\n                            : \"bg-slate-500 text-white\"\n                      }`}\n                    >\n                      P{msg.playerIndex + 1}\n                    </span>\n                  )}\n                  <span className=\"text-[10px] text-slate-500 font-bold\">\n                    {new Date(msg.timestamp).toLocaleTimeString([], {\n                      hour: \"2-digit\",\n                      minute: \"2-digit\",\n                    })}\n                  </span>\n                  {isMe && (\n                    <span\n                      className={`text-[10px] font-black uppercase px-1.5 py-0.5 rounded ${\n                        msg.playerIndex === 0\n                          ? \"bg-white text-slate-900 border border-slate-400\"\n                          : msg.playerIndex === 1\n                            ? \"bg-slate-900 text-white\"\n                            : \"bg-slate-500 text-white\"\n                      }`}\n                    >\n                      Me\n                    </span>\n                  )}\n                </div>\n                <div\n                  className={`px-3 py-2 rounded-2xl max-w-[85%] text-sm font-medium ${\n                    isMe\n                      ? \"bg-brand-blue text-white rounded-tr-none\"\n                      : darkMode\n                        ? \"bg-slate-800 text-slate-200 rounded-tl-none border border-slate-700\"\n                        : \"bg-slate-100 text-slate-800 rounded-tl-none border border-slate-200\"\n                  }`}\n                >\n                  {msg.text}\n                </div>\n              </div>\n            );\n          })\n        )}\n      </div>\n\n      {/* Input */}\n      <form\n        onSubmit={handleSend}\n        className={`p-3 border-t ${\n          darkMode\n            ? \"border-slate-800 bg-slate-950/30\"\n            : \"border-slate-100 bg-white\"\n        }`}\n      >\n        <div className=\"relative flex items-center\">\n          <input\n            type=\"text\"\n            value={text}\n            onChange={(e) => setText(e.target.value)}\n            placeholder=\"Send a message...\"\n            className={`w-full py-2.5 pl-4 pr-12 rounded-xl text-sm outline-none transition-all ${\n              darkMode\n                ? \"bg-slate-800 border-2 border-transparent focus:border-brand-blue/50 text-slate-200\"\n                : \"bg-slate-50 border-2 border-transparent focus:border-brand-blue/30 text-slate-800 shadow-inner\"\n            }`}\n          />\n          <button\n            type=\"submit\"\n            disabled={!text.trim()}\n            className={`absolute right-2 p-1.5 rounded-lg transition-all ${\n              text.trim()\n                ? \"text-brand-blue hover:bg-brand-blue/10 scale-100\"\n                : \"text-slate-400 opacity-30 scale-90\"\n            }`}\n          >\n            <Send size={18} />\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Shoutbox;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/TerrainDetailsPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":55,"messageId":"unexpectedAny","endLine":76,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2620,2623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2620,2623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":76,"messageId":"unexpectedAny","endLine":97,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3237,3240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3237,3240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\n * Copyright (c) 2006 - 2026 Hall of the Gods, Inc.\n * All Rights Reserved.\n *\n * TerrainDetailsPanel - Detailed view of the selected terrain\n */\nimport React from \"react\";\nimport {\n  ChevronLeft,\n  ChevronRight,\n  ShieldPlus,\n  Sparkles,\n  X,\n} from \"lucide-react\";\nimport { INITIAL_ARMY } from \"@engineConfigs/unitDetails\";\nimport { TERRAIN_INTEL } from \"@engineConfigs/terrainDetails\";\nimport { TERRAIN_TYPES } from \"@engineConfigs/terrainDetails\";\nimport { isUnitProtected } from \"@logic/gameLogic\";\nimport { canUnitTraverseTerrain } from \"@setup/terrainCompat\";\nimport { unitColorMap } from \"@engineConfigs/unitDetails\";\nimport type { PieceType, TerrainType } from \"@engineTypes/game\";\n\ninterface TerrainDetailsPanelProps {\n  darkMode: boolean;\n  terrainTypeKey: string;\n  selectedUnit?: string;\n  onUnitSelect?: (unitType: string) => void;\n  onNext?: () => void;\n  onPrev?: () => void;\n  prevTerrainIcon?: React.ReactNode;\n  nextTerrainIcon?: React.ReactNode;\n  prevTerrainColors?: { bg: string; text: string; border: string };\n  nextTerrainColors?: { bg: string; text: string; border: string };\n}\n\nconst TerrainDetailsPanel: React.FC<TerrainDetailsPanelProps> = ({\n  darkMode,\n  terrainTypeKey,\n  selectedUnit,\n  onUnitSelect,\n  onNext,\n  onPrev,\n  prevTerrainIcon,\n  nextTerrainIcon,\n  prevTerrainColors,\n  nextTerrainColors,\n}) => {\n  const textColor = darkMode ? \"text-slate-100\" : \"text-slate-800\";\n  const subtextColor = darkMode ? \"text-slate-300\" : \"text-slate-600\";\n  const cardBg = darkMode ? \"bg-slate-900/80\" : \"bg-white/90\";\n\n  if (!terrainTypeKey) {\n    return (\n      <div className=\"h-full flex flex-col relative group/panel\">\n        <div\n          className={`flex-1 p-8 rounded-3xl border-4 border-dashed ${darkMode ? \"border-slate-800 bg-slate-900/50\" : \"border-slate-200 bg-white/70\"} flex flex-col gap-6 shadow-xl relative overflow-hidden transition-all items-center justify-center text-center opacity-60`}\n        >\n          <div className=\"p-6 rounded-full bg-slate-100 dark:bg-slate-800 mb-4\">\n            <Sparkles size={48} className={subtextColor} />\n          </div>\n          <h3 className={`text-2xl font-black uppercase ${textColor}`}>\n            Select Terrain\n          </h3>\n          <p className={`text-sm font-bold ${subtextColor} max-w-[200px]`}>\n            Choose a terrain type from the top bar to view its strategic intel.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  const intel = TERRAIN_INTEL[terrainTypeKey];\n\n  // Dynamic border style based on unit affinity\n  const unitProtected = selectedUnit\n    ? isUnitProtected(selectedUnit, terrainTypeKey as any)\n    : false;\n  const unitCanTraverse = selectedUnit\n    ? canUnitTraverseTerrain(\n        selectedUnit as PieceType,\n        terrainTypeKey as TerrainType,\n      )\n    : true;\n  const panelBorderStyle = unitProtected\n    ? \"border-8 border-dotted\"\n    : !unitCanTraverse\n      ? \"border-8 border-double\"\n      : \"border-4\";\n\n  const renderUnitIcons = () => {\n    return (\n      <div className=\"flex gap-2\">\n        {INITIAL_ARMY.map((unit, idx) => {\n          const colors = unitColorMap[unit.type];\n          if (!colors) return null;\n\n          const isProtected = isUnitProtected(unit.type, terrainTypeKey as any);\n          const canTraverse = canUnitTraverseTerrain(\n            unit.type,\n            terrainTypeKey as TerrainType,\n          );\n          const isActive = unit.type === selectedUnit;\n\n          const IconComp = unit.lucide;\n\n          return (\n            <div\n              key={idx}\n              onClick={() => onUnitSelect?.(unit.type)}\n              className={`p-2.5 rounded-xl ${colors.bg} ${colors.text} border ${colors.border} shadow-sm backdrop-blur-sm relative transition-all cursor-pointer hover:scale-110 hover:shadow-lg ${isActive ? \"opacity-100\" : !canTraverse ? \"opacity-[0.42] grayscale-[0.5]\" : \"opacity-[0.85]\"} ${isActive ? `ring-2 ${colors.ring} scale-110 shadow-lg opacity-100` : \"\"} ${isProtected ? \"border-dotted border-4\" : !canTraverse ? \"border-double border-4\" : \"\"}`}\n            >\n              <IconComp size={28} className=\"fill-current\" />\n\n              {/* Shield Badge for Protection */}\n              {isProtected && (\n                <div\n                  className={`absolute -top-2 -right-2 p-1 rounded-full bg-white dark:bg-slate-900 border-2 ${colors.border} shadow-lg z-10 flex items-center justify-center animate-pulse`}\n                  title=\"Protected in this terrain\"\n                >\n                  <ShieldPlus\n                    size={12}\n                    className={`${colors.text}`}\n                    strokeWidth={4}\n                  />\n                </div>\n              )}\n\n              {/* Red X Badge for Untraversable Terrain */}\n              {!canTraverse && (\n                <div\n                  className=\"absolute -top-2 -right-2 p-1 rounded-full bg-white dark:bg-slate-900 border-2 border-brand-red shadow-lg z-10 flex items-center justify-center\"\n                  title=\"Cannot traverse this terrain\"\n                >\n                  <X size={12} className=\"text-brand-red\" strokeWidth={4} />\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  // Helper to determine colors based on terrain type for styling\n  const getTerrainColors = (key: string) => {\n    switch (key) {\n      case TERRAIN_TYPES.TREES:\n        return {\n          bg: \"bg-emerald-500/10\",\n          text: \"text-emerald-500\",\n          border: \"border-emerald-500/40\",\n          solid: \"bg-emerald-500\",\n          ribbonBg: \"bg-emerald-500\",\n        };\n      case TERRAIN_TYPES.PONDS:\n        return {\n          bg: \"bg-brand-blue/10\",\n          text: \"text-brand-blue\",\n          border: \"border-brand-blue/40\",\n          solid: \"bg-brand-blue\",\n          ribbonBg: \"bg-brand-blue\",\n        };\n      case TERRAIN_TYPES.RUBBLE:\n        return {\n          bg: \"bg-brand-red/10\",\n          text: \"text-brand-red\",\n          border: \"border-brand-red/40\",\n          solid: \"bg-brand-red\",\n          ribbonBg: \"bg-brand-red\",\n        };\n      case TERRAIN_TYPES.DESERT:\n        return {\n          bg: \"bg-amber-500/10\",\n          text: \"text-amber-500\",\n          border: \"border-amber-500/40\",\n          solid: \"bg-amber-500\",\n          ribbonBg: \"bg-amber-500\",\n        };\n      default:\n        return {\n          bg: \"bg-slate-500/10\",\n          text: \"text-slate-500\",\n          border: \"border-slate-500/40\",\n          solid: \"bg-slate-500\",\n          ribbonBg: \"bg-slate-500\",\n        };\n    }\n  };\n\n  const colors = getTerrainColors(terrainTypeKey);\n  const Icon = intel.icon;\n\n  return (\n    <div className=\"h-full flex flex-col relative group/panel\">\n      <div\n        className={`flex-1 p-8 rounded-3xl ${panelBorderStyle} ${cardBg} ${colors.border} flex flex-col gap-6 shadow-xl relative overflow-hidden group transition-all`}\n      >\n        {/* Background decoration */}\n        <div\n          className={`absolute -right-20 -top-20 w-64 h-64 rounded-full ${colors.bg} blur-lg opacity-20`}\n        />\n\n        {/* Main Content Wrapper - Flex container to match unit panel structure */}\n        <div className=\"flex-1 flex flex-col items-center z-10 text-center w-full\">\n          {/* Full-width Top Ribbon */}\n          <div\n            className={`absolute top-0 left-0 right-0 z-20 pointer-events-none ${colors.ribbonBg} py-2.5 shadow-lg border-b border-white/10 flex justify-center items-center`}\n          >\n            <span className=\"text-white text-xl font-black uppercase tracking-[0.4em] drop-shadow-md\">\n              Trench Intel\n            </span>\n          </div>\n\n          {/* Subtitle - Reordered to top */}\n          <div className=\"flex items-center gap-3 mb-2 mt-20 opacity-80\">\n            <Sparkles size={24} className={colors.text} />\n            <span\n              className={`text-sm font-bold uppercase tracking-[0.2em] ${colors.text}`}\n            >\n              You discovered a new Trench!\n            </span>\n          </div>\n\n          {/* Title */}\n          <h3\n            className={`text-5xl font-black uppercase tracking-tighter ${textColor} mb-6`}\n          >\n            {intel.label}\n          </h3>\n\n          {/* Icon Row with Nav Buttons flanking */}\n          <div className=\"flex flex-row items-center gap-10 mb-6\">\n            {/* Terrain Icon â€” with nav buttons bleeding out */}\n            <div\n              className={`relative w-36 h-36 rounded-[2.5rem] ${colors.bg} ${colors.text} flex items-center justify-center shadow-inner border border-white/5 transition-transform hover:scale-105 group/icon overflow-visible`}\n            >\n              <Icon className=\"w-20 h-20 transition-transform group-hover/icon:rotate-3\" />\n\n              {/* Prev Terrain Button â€” bleeds left */}\n              {onPrev && (\n                <button\n                  onClick={onPrev}\n                  className={`absolute -left-5 top-1/2 -translate-y-1/2 z-30 cursor-pointer p-2 rounded-xl shadow-lg border opacity-40 grayscale hover:opacity-100 hover:grayscale-0 hover:scale-110 active:scale-95 transition-all flex items-center justify-center ${\n                    prevTerrainColors\n                      ? `${prevTerrainColors.bg} ${prevTerrainColors.border} ${prevTerrainColors.text}`\n                      : \"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-800/60 dark:text-white/60\"\n                  }`}\n                >\n                  {prevTerrainIcon || <ChevronLeft size={18} />}\n                </button>\n              )}\n\n              {/* Next Terrain Button â€” bleeds right */}\n              {onNext && (\n                <button\n                  onClick={onNext}\n                  className={`absolute -right-5 top-1/2 -translate-y-1/2 z-30 cursor-pointer p-2 rounded-xl shadow-lg border opacity-40 grayscale hover:opacity-100 hover:grayscale-0 hover:scale-110 active:scale-95 transition-all flex items-center justify-center ${\n                    nextTerrainColors\n                      ? `${nextTerrainColors.bg} ${nextTerrainColors.border} ${nextTerrainColors.text}`\n                      : \"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-800/60 dark:text-white/60\"\n                  }`}\n                >\n                  {nextTerrainIcon || <ChevronRight size={18} />}\n                </button>\n              )}\n            </div>\n\n            {/* Mini Terrain Preview */}\n            <div className=\"flex flex-col items-center gap-2\">\n              <div className=\"bg-slate-800/20 dark:bg-white/5 rounded-xl p-2 border border-white/5 w-fit shadow-inner scale-90\">\n                <div\n                  className=\"grid gap-[1px] w-32 h-32\"\n                  style={{\n                    gridTemplateColumns: `repeat(7, 1fr)`,\n                  }}\n                >\n                  {Array.from({ length: 7 * 7 }).map((_, i) => {\n                    const r = Math.floor(i / 7);\n                    const c = i % 7;\n                    const center = 3;\n                    const inTerrain = Math.abs(r - center) === 1;\n\n                    const isEven = (r + c) % 2 === 0;\n                    let cellBg = isEven\n                      ? \"bg-slate-100/10 dark:bg-white/5\"\n                      : \"bg-slate-200/10 dark:bg-white/[0.02]\";\n\n                    if (inTerrain) {\n                      switch (terrainTypeKey) {\n                        case TERRAIN_TYPES.TREES:\n                          cellBg = isEven\n                            ? \"bg-emerald-500/50\"\n                            : \"bg-emerald-500/30\";\n                          break;\n                        case TERRAIN_TYPES.PONDS:\n                          cellBg = isEven\n                            ? \"bg-brand-blue/50\"\n                            : \"bg-brand-blue/30\";\n                          break;\n                        case TERRAIN_TYPES.RUBBLE:\n                          cellBg = isEven\n                            ? \"bg-brand-red/50\"\n                            : \"bg-brand-red/30\";\n                          break;\n                        case TERRAIN_TYPES.DESERT:\n                          cellBg = isEven\n                            ? \"bg-amber-500/50\"\n                            : \"bg-amber-500/30\";\n                          break;\n                      }\n                    }\n\n                    return (\n                      <div\n                        key={i}\n                        className={`aspect-square rounded-sm relative flex items-center justify-center ${cellBg}`}\n                      >\n                        {inTerrain && (\n                          <div className=\"opacity-40 scale-[0.5] pointer-events-none\">\n                            <Icon size={16} />\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Bullets - Description */}\n          <div className=\"w-full space-y-4 px-0 mb-8\">\n            <div className=\"flex flex-col gap-4 max-w-2xl mx-auto\">\n              {intel.desc\n                .split(\". \")\n                .filter(Boolean)\n                .map((item: string, idx: number) => (\n                  <div key={idx} className=\"flex items-start gap-3 text-left\">\n                    <div\n                      className={`w-1.5 h-1.5 rounded-full ${colors.solid} opacity-40 mt-1.5 shrink-0 shadow-sm`}\n                    />\n                    <p\n                      className={`text-[13px] font-bold ${subtextColor} leading-snug opacity-90`}\n                    >\n                      {item.trim().endsWith(\".\")\n                        ? item.trim()\n                        : `${item.trim()}.`}\n                    </p>\n                  </div>\n                ))}\n            </div>\n          </div>\n\n          {/* Protects From (Affinity) - Pushed to Bottom with Divider Style */}\n          <div className=\"mt-auto w-full flex flex-col items-center gap-5\">\n            <div className=\"flex items-center w-full gap-4 opacity-70\">\n              <div\n                className={`h-px flex-1 ${darkMode ? \"bg-white/20\" : \"bg-slate-900/10\"}`}\n              />\n              <span\n                className={`text-[10px] font-black uppercase tracking-widest ${subtextColor}`}\n              >\n                Protects From\n              </span>\n              <div\n                className={`h-px flex-1 ${darkMode ? \"bg-white/20\" : \"bg-slate-900/10\"}`}\n              />\n            </div>\n            {renderUnitIcons()}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TerrainDetailsPanel;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/TerrainIntelTool.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":31,"messageId":"unexpectedAny","endLine":66,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2463,2466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2463,2466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":186,"column":43,"messageId":"unexpectedAny","endLine":186,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6708,6711],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6708,6711],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":227,"column":68,"messageId":"unexpectedAny","endLine":227,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8325,8328],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8325,8328],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":391,"column":68,"messageId":"unexpectedAny","endLine":391,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15056,15059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15056,15059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\n * Copyright (c) 2006 - 2026 Hall of the Gods, Inc.\n * All Rights Reserved.\n *\n * TerrainIntelTool â€” Interactive unit Ã— terrain compatibility explorer.\n * Select a unit on the left, a terrain on the right, and see the result.\n */\nimport React from \"react\";\nimport { ShieldPlus, X } from \"lucide-react\";\nimport { PIECES, INITIAL_ARMY } from \"@engineConfigs/unitDetails\";\nimport { TERRAIN_INTEL } from \"@engineConfigs/terrainDetails\";\nimport { isUnitProtected } from \"@logic/gameLogic\";\n\n// â”€â”€ Types â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\ninterface TerrainIntelToolProps {\n  darkMode: boolean;\n  selectedUnit?: string;\n  onUnitSelect?: (unit: string) => void;\n  className?: string; // Additional prop for styling\n}\n\nimport { TERRAIN_LIST, UNIT_COLORS, UNIT_NAMES, MOVE_PATTERNS, canTraverse, ALL_UNITS } from \"@constants/intel.constants\";\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// Component\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nconst TerrainIntelTool: React.FC<TerrainIntelToolProps> = ({\n  darkMode,\n  selectedUnit: propSelectedUnit,\n  onUnitSelect,\n  className,\n}) => {\n  const [internalSelectedUnit, setInternalSelectedUnit] =\n    React.useState<string>(PIECES.BISHOP);\n  const [selectedTerrain, setSelectedTerrain] = React.useState<number>(0); // index into TERRAIN_LIST\n\n  const selectedUnit = propSelectedUnit || internalSelectedUnit;\n\n  const handleUnitSelect = (unit: string) => {\n    if (onUnitSelect) {\n      onUnitSelect(unit);\n    } else {\n      setInternalSelectedUnit(unit);\n    }\n  };\n\n  const textColor = darkMode ? \"text-slate-100\" : \"text-slate-800\";\n  const subtextColor = darkMode ? \"text-slate-400\" : \"text-slate-500\";\n  const cardBg = darkMode ? \"bg-slate-900/50\" : \"bg-white/70\";\n  const borderColor = darkMode ? \"border-white/10\" : \"border-slate-200\";\n\n  const terrain = TERRAIN_LIST[selectedTerrain];\n  const unitArmy = INITIAL_ARMY.find((u) => u.type === selectedUnit);\n  const unitColors = UNIT_COLORS[selectedUnit];\n  const UnitIcon = unitArmy?.lucide as React.ElementType;\n\n  // â”€â”€ Compatibility result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const isTraversable = canTraverse(terrain.name, selectedUnit);\n  const isDesertTank =\n    terrain.name === \"Desert\" && selectedUnit === PIECES.ROOK;\n  const isCompatible = isTraversable || isDesertTank;\n  const isProtected = isUnitProtected(\n    selectedUnit,\n    terrain.terrainTypeKey as any,\n  );\n\n  // â”€â”€ Move preview grid computation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const previewGridSize = 12;\n  const centerRow = 6;\n  const centerCol = 6;\n  const isTerrainCell = (r: number) => Math.abs(r - centerRow) === 1;\n\n  const pattern = MOVE_PATTERNS[selectedUnit];\n  const allMoves = [\n    ...(pattern?.move(centerRow, centerCol) || []),\n    ...(pattern?.newMove ? pattern.newMove(centerRow, centerCol) : []),\n  ];\n\n  const validMoves: number[][] = [];\n  const blockedMoves: number[][] = [];\n\n  allMoves.forEach(([r, c]) => {\n    const dr = r - centerRow;\n    const dc = c - centerCol;\n    const dist = Math.max(Math.abs(dr), Math.abs(dc));\n    const steps = dist;\n    const isLeap =\n      Math.abs(dr) * Math.abs(dc) === 2 ||\n      (selectedUnit === PIECES.PAWN && dist === 2);\n\n    let blocked = false;\n\n    for (let i = 1; i <= steps; i++) {\n      const stepR = centerRow + Math.round((dr / steps) * i);\n      const inTerrain = isTerrainCell(stepR);\n      const isLanding = i === steps;\n\n      if (inTerrain) {\n        if (terrain.name === \"Desert\") {\n          if (isLanding) {\n            if (!isDesertTank) blocked = true;\n          } else {\n            if (!isLeap) blocked = true;\n          }\n        } else {\n          if (!isTraversable && !isLeap) blocked = true;\n          if (isLeap && isLanding && !isTraversable) blocked = true;\n        }\n      }\n      if (blocked) break;\n    }\n\n    if (blocked) blockedMoves.push([r, c]);\n    else validMoves.push([r, c]);\n  });\n\n  // â”€â”€ Terrain cell colour helper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const getTerrainCellBg = (isEven: boolean) => {\n    switch (terrain.name) {\n      case \"Mountains\":\n        return isEven ? \"bg-brand-red/60\" : \"bg-brand-red/40\";\n      case \"Forests\":\n        return isEven ? \"bg-emerald-500/50\" : \"bg-emerald-500/30\";\n      case \"Swamps\":\n        return isEven ? \"bg-brand-blue/50\" : \"bg-brand-blue/30\";\n      case \"Desert\":\n        return isEven ? \"bg-amber-500/50\" : \"bg-amber-500/30\";\n      default:\n        return isEven\n          ? \"bg-slate-100/60 dark:bg-white/10\"\n          : \"bg-slate-200/60 dark:bg-white/[0.04]\";\n    }\n  };\n\n  const getTerrainMoveShadow = () => {\n    switch (terrain.name) {\n      case \"Mountains\":\n        return \"bg-brand-red z-20 shadow-[0_0_15px_rgba(239,68,68,0.5)]\";\n      case \"Forests\":\n        return \"bg-emerald-500 z-20 shadow-[0_0_15px_rgba(16,185,129,0.5)]\";\n      case \"Swamps\":\n        return \"bg-brand-blue z-20 shadow-[0_0_15px_rgba(59,130,246,0.5)]\";\n      default:\n        return \"bg-amber-500 z-20 shadow-[0_0_15px_rgba(245,158,11,0.5)]\";\n    }\n  };\n\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  // Render\n  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n  return (\n    <div\n      className={`relative p-1 sm:p-10 rounded-3xl border-4 ${cardBg} ${borderColor} transition-all overflow-hidden ${\n        className || \"\"\n      }`}\n    >\n      {/* â”€â”€ Single Horizontal Row Arrangement â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */}\n      <div className=\"flex flex-row gap-2 sm:gap-2 lg:gap-2 items-center justify-between\">\n        {/* â”€â”€ 1. Unit column â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */}\n        <div className=\"flex flex-col items-center gap-5 min-w-0\">\n          <h3\n            className={`text-xl sm:text-2xl font-black uppercase tracking-tighter ${textColor}`}\n          >\n            {UNIT_NAMES[selectedUnit]}\n          </h3>\n\n          <div\n            className={`w-20 h-20 sm:w-28 sm:h-28 rounded-2xl ${unitColors.bg} ${unitColors.text} flex items-center justify-center shadow-inner border ${unitColors.border} transition-all`}\n          >\n            {UnitIcon && <UnitIcon className=\"w-12 h-12 sm:w-16 sm:h-16\" />}\n          </div>\n\n          {/* Unit selector: 3x2 Grid */}\n          <div className=\"grid grid-cols-3 gap-2\">\n            {ALL_UNITS.map((uType) => {\n              const u = INITIAL_ARMY.find((x) => x.type === uType);\n              if (!u) return null;\n              const Icon = u.lucide as React.ElementType;\n              const colors = UNIT_COLORS[uType];\n              const isActive = selectedUnit === uType;\n              const uProtected = isUnitProtected(\n                uType,\n                terrain.terrainTypeKey as any,\n              );\n\n              return (\n                <button\n                  key={uType}\n                  onClick={() => handleUnitSelect(uType)}\n                  className={`p-2 rounded-xl border transition-all cursor-pointer ${\n                    isActive\n                      ? \"bg-slate-800 text-white border-slate-700 dark:bg-white dark:text-slate-900 shadow-lg scale-110\"\n                      : `${colors.text} ${colors.bg} ${colors.border} opacity-70 hover:opacity-100 hover:scale-105`\n                  } ${uProtected ? \"border-double border-4\" : \"\"}`}\n                  title={UNIT_NAMES[uType]}\n                >\n                  <Icon size={18} />\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* â”€â”€ 2. PLUS Divider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */}\n        <div className=\"shrink-0\">\n          <span\n            className={`text-5xl sm:text-7xl font-black ${textColor} opacity-20`}\n          >\n            +\n          </span>\n        </div>\n\n        {/* â”€â”€ 3. Terrain column â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */}\n        <div className=\"flex flex-col items-center gap-5 min-w-0\">\n          <h3\n            className={`text-xl sm:text-2xl font-black uppercase tracking-tighter ${textColor}`}\n          >\n            {terrain.name}\n          </h3>\n\n          <div\n            className={`w-20 h-20 sm:w-28 sm:h-28 rounded-2xl ${terrain.bg} ${terrain.text} flex items-center justify-center shadow-inner border ${terrain.border} transition-all`}\n          >\n            {React.cloneElement(terrain.icon as React.ReactElement<any>, {\n              className: \"w-12 h-12 sm:w-16 sm:h-16\",\n            })}\n          </div>\n\n          {/* Terrain selector: 2x2 Grid */}\n          <div className=\"grid grid-cols-2 gap-2\">\n            {TERRAIN_LIST.map((t, idx) => {\n              const isActive = selectedTerrain === idx;\n\n              return (\n                <button\n                  key={t.name}\n                  onClick={() => setSelectedTerrain(idx)}\n                  className={`p-2 rounded-xl border transition-all cursor-pointer ${\n                    isActive\n                      ? `${t.bg} ${t.text} ${t.border} shadow-lg scale-110 border-2`\n                      : `${t.bg} ${t.text} ${t.border} opacity-50 hover:opacity-100 hover:scale-105`\n                  }`}\n                  title={t.name}\n                >\n                  {React.cloneElement(\n                    t.icon as React.ReactElement<{ className?: string }>,\n                    { className: \"w-5 h-5\" },\n                  )}\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* â”€â”€ 4. EQUALS Divider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */}\n        <div className=\"shrink-0\">\n          <span\n            className={`text-5xl sm:text-7xl font-black ${textColor} opacity-20`}\n          >\n            =\n          </span>\n        </div>\n\n        {/* â”€â”€ 5. Preview Grid column â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */}\n        <div className=\"flex flex-col items-center gap-3\">\n          <div className=\"flex flex-col items-center gap-1\">\n            <span\n              className={`text-[10px] font-black uppercase tracking-widest ${subtextColor} flex items-center gap-2`}\n            >\n              <div\n                className={`w-2 h-2 rounded-full ${isCompatible ? \"bg-emerald-500\" : \"bg-brand-red\"}`}\n              />\n              Affected Move Set\n            </span>\n            <span\n              className={`text-[9px] font-black uppercase tracking-widest ${terrain.text} opacity-30 flex items-center gap-1.5`}\n            >\n              <div className=\"w-0.5 h-0.5 rounded-full bg-current animate-pulse\" />\n              Preview Result\n            </span>\n          </div>\n\n          <div className=\"bg-slate-100 dark:bg-white/5 rounded-2xl p-4 border border-slate-200 dark:border-white/5 w-fit shadow-inner\">\n            <div\n              className=\"grid gap-[1px] w-44 h-44 sm:w-56 sm:h-56 lg:w-64 lg:h-64\"\n              style={{\n                gridTemplateColumns: `repeat(${previewGridSize}, 1fr)`,\n              }}\n            >\n              {Array.from({ length: previewGridSize * previewGridSize }).map(\n                (_, i) => {\n                  const r = Math.floor(i / previewGridSize);\n                  const c = i % previewGridSize;\n                  const isCenter = r === centerRow && c === centerCol;\n                  const isMove = validMoves.some(\n                    ([mr, mc]) => mr === r && mc === c,\n                  );\n                  const isBlocked = blockedMoves.some(\n                    ([mr, mc]) => mr === r && mc === c,\n                  );\n                  const inTerrain = isTerrainCell(r);\n\n                  const isEven = (r + c) % 2 === 0;\n                  let cellBg = isEven\n                    ? \"bg-slate-100/60 dark:bg-white/10\"\n                    : \"bg-slate-200/60 dark:bg-white/[0.04]\";\n\n                  if (inTerrain) cellBg = getTerrainCellBg(isEven);\n\n                  // Center cell (unit position)\n                  if (isCenter) {\n                    return (\n                      <div\n                        key={i}\n                        className={`aspect-square rounded-sm relative bg-slate-800 dark:bg-white z-20 flex items-center justify-center shadow-lg ${\n                          isProtected\n                            ? \"border-double border-[3px] border-emerald-500/50\"\n                            : \"\"\n                        }`}\n                      >\n                        <div className=\"w-1.5 h-1.5 rounded-full bg-white dark:bg-black\" />\n                      </div>\n                    );\n                  }\n\n                  return (\n                    <div\n                      key={i}\n                      className={`aspect-square rounded-sm relative flex items-center justify-center transition-all duration-300\n                      ${\n                        isMove\n                          ? inTerrain\n                            ? getTerrainMoveShadow()\n                            : \"bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.5)] z-20\"\n                          : isBlocked\n                            ? inTerrain\n                              ? getTerrainMoveShadow()\n                              : \"bg-red-950/40 z-10\"\n                            : cellBg\n                      }\n                    `}\n                    >\n                      {/* Tiny terrain icons */}\n                      {inTerrain && (\n                        <div\n                          className={`absolute inset-0 flex items-center justify-center ${\n                            isMove || isBlocked ? \"opacity-60\" : \"opacity-40\"\n                          } scale-[0.45] pointer-events-none`}\n                        >\n                          {terrain.icon}\n                        </div>\n                      )}\n\n                      {isBlocked && (\n                        <div\n                          className={`${\n                            inTerrain ? \"text-white\" : \"text-brand-red/40\"\n                          } z-20 scale-75`}\n                        >\n                          <X size={16} strokeWidth={3} />\n                        </div>\n                      )}\n\n                      {isMove && inTerrain && (\n                        <div className=\"text-white drop-shadow-md z-20 scale-75\">\n                          <ShieldPlus\n                            size={16}\n                            strokeWidth={3}\n                            className=\"fill-white/20\"\n                          />\n                        </div>\n                      )}\n                    </div>\n                  );\n                },\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* â”€â”€ 6. Terrain Intel Text Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */}\n      <div className=\"mt-8 pt-8 border-t border-slate-200 dark:border-white/5\">\n        <div className=\"flex flex-col sm:flex-row items-center gap-6 max-w-4xl mx-auto\">\n          <div\n            className={`w-16 h-16 rounded-2xl ${terrain.bg} ${terrain.text} flex items-center justify-center shadow-inner border ${terrain.border} shrink-0`}\n          >\n            {React.cloneElement(terrain.icon as React.ReactElement<any>, {\n              className: \"w-8 h-8\",\n            })}\n          </div>\n          <div className=\"flex-1 text-center sm:text-left\">\n            <h4\n              className={`text-lg font-black uppercase tracking-tight ${textColor} mb-1`}\n            >\n              {terrain.name} Rules\n            </h4>\n            <p\n              className={`text-[13px] font-medium ${subtextColor} leading-relaxed`}\n            >\n              {TERRAIN_INTEL[terrain.terrainTypeKey]?.desc}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TerrainIntelTool;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/TerrainMovePreview.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":243,"column":31,"messageId":"unexpectedAny","endLine":243,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6198,6201],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6198,6201],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\n * Copyright (c) 2006 - 2026 Hall of the Gods, Inc.\n * All Rights Reserved.\n *\n * TerrainMovePreview â€” Display-only move preview grid\n */\nimport React from \"react\";\nimport { Trees, Waves, Mountain, ShieldPlus, X } from \"lucide-react\";\nimport { TERRAIN_TYPES } from \"@engineConfigs/terrainDetails\";\nimport { PIECES } from \"@engineConfigs/unitDetails\";\nimport { isUnitProtected } from \"@logic/gameLogic\";\nimport { DesertIcon } from \"@/app/routes/game/components/atoms/UnitIcons\";\n\n/** Which terrain icon keys each unit has in its levelUp data. */\nconst UNIT_TERRAIN_KEYS: Record<string, string[]> = {\n  [PIECES.KING]: [\"mt\", \"tr\", \"wv\"],\n  [PIECES.QUEEN]: [\"mt\", \"tr\", \"wv\"],\n  [PIECES.ROOK]: [\"wv\", \"ds\"],\n  [PIECES.BISHOP]: [\"tr\"],\n  [PIECES.KNIGHT]: [\"mt\"],\n  [PIECES.PAWN]: [\"mt\", \"tr\", \"wv\"],\n};\n\nconst TERRAIN_NAME_TO_KEY: Record<string, string> = {\n  Mountains: \"mt\",\n  Forests: \"tr\",\n  Swamps: \"wv\",\n  Desert: \"ds\",\n};\n\nfunction canTraverse(terrainName: string, unitType: string): boolean {\n  const keys = UNIT_TERRAIN_KEYS[unitType] || [];\n  const needed = TERRAIN_NAME_TO_KEY[terrainName];\n  return keys.includes(needed);\n}\n\n// â”€â”€ Terrain definitions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\ninterface TerrainDef {\n  name: string;\n  icon: React.ReactNode;\n  bg: string;\n  text: string;\n  border: string;\n  terrainTypeKey: string;\n}\n\nconst TERRAIN_LIST: TerrainDef[] = [\n  {\n    name: \"Forests\",\n    icon: <Trees />,\n    bg: \"bg-emerald-500/10\",\n    text: \"text-emerald-500\",\n    border: \"border-emerald-500/40\",\n    terrainTypeKey: TERRAIN_TYPES.TREES,\n  },\n  {\n    name: \"Swamps\",\n    icon: <Waves />,\n    bg: \"bg-brand-blue/10\",\n    text: \"text-brand-blue\",\n    border: \"border-brand-blue/40\",\n    terrainTypeKey: TERRAIN_TYPES.PONDS,\n  },\n  {\n    name: \"Mountains\",\n    icon: <Mountain />,\n    bg: \"bg-brand-red/10\",\n    text: \"text-brand-red\",\n    border: \"border-brand-red/40\",\n    terrainTypeKey: TERRAIN_TYPES.RUBBLE,\n  },\n  {\n    name: \"Desert\",\n    icon: <DesertIcon className=\"w-6 h-6\" />,\n    bg: \"bg-amber-500/10\",\n    text: \"text-amber-500\",\n    border: \"border-amber-500/40\",\n    terrainTypeKey: TERRAIN_TYPES.DESERT,\n  },\n];\n\n// â”€â”€ Moveâ€‘pattern definitions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\ntype MovePatternFn = (r: number, c: number) => number[][];\n\nconst MOVE_PATTERNS: Record<\n  string,\n  { move: MovePatternFn; newMove?: MovePatternFn; attack?: MovePatternFn }\n> = {\n  [PIECES.KING]: {\n    move: (r, c) => [\n      [r - 1, c],\n      [r + 1, c],\n      [r, c - 1],\n      [r, c + 1],\n      [r - 1, c - 1],\n      [r - 1, c + 1],\n      [r + 1, c - 1],\n      [r + 1, c + 1],\n    ],\n    newMove: (r, c) => [\n      [r - 2, c],\n      [r + 2, c],\n      [r, c - 2],\n      [r, c + 2],\n    ],\n    attack: (r, c) => [\n      [r - 1, c],\n      [r + 1, c],\n      [r, c - 1],\n      [r, c + 1],\n    ],\n  },\n  [PIECES.QUEEN]: {\n    move: (r, c) => {\n      const moves: number[][] = [];\n      for (let i = 1; i < 12; i++) {\n        moves.push([r + i, c], [r - i, c], [r, c + i], [r, c - i]);\n        moves.push(\n          [r + i, c + i],\n          [r - i, c - i],\n          [r + i, c - i],\n          [r - i, c + i],\n        );\n      }\n      return moves;\n    },\n    newMove: (r, c) =>\n      [\n        [-2, -1],\n        [-2, 1],\n        [-1, -2],\n        [-1, 2],\n        [1, -2],\n        [1, 2],\n        [2, -1],\n        [2, 1],\n      ].map(([dr, dc]) => [r + dr, c + dc]),\n  },\n  [PIECES.ROOK]: {\n    move: (r, c) => {\n      const moves: number[][] = [];\n      for (let i = 1; i < 12; i++) {\n        moves.push([r + i, c], [r - i, c], [r, c + i], [r, c - i]);\n      }\n      return moves;\n    },\n  },\n  [PIECES.BISHOP]: {\n    move: (r, c) => {\n      const moves: number[][] = [];\n      for (let i = 1; i < 12; i++) {\n        moves.push(\n          [r + i, c + i],\n          [r - i, c - i],\n          [r + i, c - i],\n          [r - i, c + i],\n        );\n      }\n      return moves;\n    },\n  },\n  [PIECES.KNIGHT]: {\n    move: (r, c) => [\n      [r - 2, c - 1],\n      [r - 2, c + 1],\n      [r - 1, c - 2],\n      [r - 1, c + 2],\n      [r + 1, c - 2],\n      [r + 1, c + 2],\n      [r + 2, c - 1],\n      [r + 2, c + 1],\n    ],\n  },\n  [PIECES.PAWN]: {\n    move: (r, c) => [[r - 1, c]],\n    newMove: (r, c) => [[r + 2, c]],\n    attack: (r, c) => [\n      [r - 1, c - 1],\n      [r - 1, c + 1],\n    ],\n  },\n};\n\ninterface TerrainMovePreviewProps {\n  darkMode: boolean;\n  selectedUnit: string;\n  selectedTerrainIdx: number;\n  className?: string;\n  /** Optional set of \"r,c\" strings for terrain positions from a seed layout */\n  terrainPositions?: Set<string>;\n}\n\nconst TerrainMovePreview: React.FC<TerrainMovePreviewProps> = ({\n  darkMode,\n  selectedUnit,\n  selectedTerrainIdx,\n  className,\n  terrainPositions,\n}) => {\n  const subtextColor = darkMode ? \"text-slate-400\" : \"text-slate-500\";\n\n  if (!selectedUnit || selectedTerrainIdx < 0) {\n    return (\n      <div\n        className={`h-full relative transition-all flex flex-col items-center justify-center group/card ${\n          className || \"\"\n        }`}\n      >\n        <div className=\"flex flex-col items-center justify-center gap-6 opacity-60\">\n          <div\n            className={`p-6 rounded-full ${darkMode ? \"bg-slate-800\" : \"bg-slate-100\"}`}\n          >\n            <ShieldPlus size={48} className={subtextColor} />\n          </div>\n          <div className=\"text-center\">\n            <h3\n              className={`text-xl font-black uppercase ${darkMode ? \"text-slate-200\" : \"text-slate-800\"}`}\n            >\n              Live Simulation\n            </h3>\n            <p\n              className={`text-sm font-bold ${subtextColor} max-w-[200px] mt-2`}\n            >\n              Select a unit and a terrain to simulate interaction.\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const terrain = TERRAIN_LIST[selectedTerrainIdx];\n\n  // â”€â”€ Compatibility result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const isTraversable = canTraverse(terrain.name, selectedUnit);\n  const isDesertTank =\n    terrain.name === \"Desert\" && selectedUnit === PIECES.ROOK;\n  const isCompatible = isTraversable || isDesertTank;\n  const isProtected = isUnitProtected(\n    selectedUnit,\n    terrain.terrainTypeKey as any,\n  );\n\n  // â”€â”€ Move preview grid computation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const previewGridSize = 12;\n  const centerRow = 6;\n  const centerCol = 6;\n  const isTerrainCell = (r: number, c: number) => {\n    if (terrainPositions) return terrainPositions.has(`${r},${c}`);\n    return Math.abs(r - centerRow) === 1;\n  };\n\n  const pattern = MOVE_PATTERNS[selectedUnit];\n  const allMoves = [\n    ...(pattern?.move(centerRow, centerCol) || []),\n    ...(pattern?.newMove ? pattern.newMove(centerRow, centerCol) : []),\n    ...(pattern?.attack ? pattern.attack(centerRow, centerCol) : []),\n  ];\n\n  const validMoves: number[][] = [];\n  const blockedMoves: number[][] = [];\n\n  allMoves.forEach(([r, c]) => {\n    const dr = r - centerRow;\n    const dc = c - centerCol;\n    const dist = Math.max(Math.abs(dr), Math.abs(dc));\n    const steps = dist;\n    const isLeap =\n      Math.abs(dr) * Math.abs(dc) === 2 ||\n      (selectedUnit === PIECES.PAWN && dist === 2);\n\n    let blocked = false;\n\n    for (let i = 1; i <= steps; i++) {\n      const stepR = centerRow + Math.round((dr / steps) * i);\n      const stepC = centerCol + Math.round((dc / steps) * i);\n      const inTerrain = isTerrainCell(stepR, stepC);\n      const isLanding = i === steps;\n\n      if (inTerrain) {\n        if (terrain.name === \"Desert\") {\n          if (isLanding) {\n            if (!isDesertTank) blocked = true;\n          } else {\n            if (!isLeap) blocked = true;\n          }\n        } else {\n          if (!isTraversable && !isLeap) blocked = true;\n          if (isLeap && isLanding && !isTraversable) blocked = true;\n        }\n      }\n      if (blocked) break;\n    }\n\n    if (blocked) blockedMoves.push([r, c]);\n    else validMoves.push([r, c]);\n  });\n\n  // â”€â”€ Terrain cell colour helper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const getTerrainCellBg = (isEven: boolean) => {\n    switch (terrain.name) {\n      case \"Mountains\":\n        return isEven ? \"bg-brand-red/60\" : \"bg-brand-red/40\";\n      case \"Forests\":\n        return isEven ? \"bg-emerald-500/50\" : \"bg-emerald-500/30\";\n      case \"Swamps\":\n        return isEven ? \"bg-brand-blue/50\" : \"bg-brand-blue/30\";\n      case \"Desert\":\n        return isEven ? \"bg-amber-500/50\" : \"bg-amber-500/30\";\n      default:\n        return isEven\n          ? \"bg-slate-100/60 dark:bg-white/10\"\n          : \"bg-slate-200/60 dark:bg-white/[0.04]\";\n    }\n  };\n\n  const getTerrainMoveShadow = () => {\n    switch (terrain.name) {\n      case \"Mountains\":\n        return \"bg-brand-red z-20 shadow-[0_0_15px_rgba(239,68,68,0.5)]\";\n      case \"Forests\":\n        return \"bg-emerald-500 z-20 shadow-[0_0_15px_rgba(16,185,129,0.5)]\";\n      case \"Swamps\":\n        return \"bg-brand-blue z-20 shadow-[0_0_15px_rgba(59,130,246,0.5)]\";\n      default:\n        return \"bg-amber-500 z-20 shadow-[0_0_15px_rgba(245,158,11,0.5)]\";\n    }\n  };\n\n  return (\n    <div\n      className={`h-full relative transition-all flex flex-col items-center justify-center group/card ${\n        className || \"\"\n      }`}\n    >\n      {/* â”€â”€ Preview Grid column â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */}\n      <div className=\"sticky top-1/2 -translate-y-1/2 flex flex-col items-center gap-6 pointer-events-none\">\n        <div className=\"flex flex-col items-center gap-1\">\n          <span\n            className={`text-xs font-black uppercase tracking-widest ${subtextColor} flex items-center gap-2`}\n          >\n            <div\n              className={`w-2.5 h-2.5 rounded-full ${isCompatible ? \"bg-emerald-500\" : \"bg-brand-red\"}`}\n            />\n            Preview\n          </span>\n        </div>\n\n        <div className=\"bg-slate-100 dark:bg-white/5 rounded-2xl p-4 border border-slate-200 dark:border-white/5 w-fit shadow-inner pointer-events-auto\">\n          <div\n            className=\"grid gap-[1px] w-56 h-56 lg:w-64 lg:h-64\"\n            style={{\n              gridTemplateColumns: `repeat(${previewGridSize}, 1fr)`,\n            }}\n          >\n            {Array.from({ length: previewGridSize * previewGridSize }).map(\n              (_, i) => {\n                const r = Math.floor(i / previewGridSize);\n                const c = i % previewGridSize;\n                const isCenter = r === centerRow && c === centerCol;\n                const isAttack =\n                  pattern?.attack &&\n                  pattern\n                    .attack(centerRow, centerCol)\n                    .some(([ar, ac]) => ar === r && ac === c);\n                const isMove = validMoves.some(\n                  ([mr, mc]) => mr === r && mc === c,\n                );\n                const isBlocked = blockedMoves.some(\n                  ([mr, mc]) => mr === r && mc === c,\n                );\n                const inTerrain = isTerrainCell(r, c);\n\n                const isEven = (r + c) % 2 === 0;\n                let cellBg = isEven\n                  ? \"bg-slate-100/60 dark:bg-white/10\"\n                  : \"bg-slate-200/60 dark:bg-white/[0.04]\";\n\n                if (inTerrain) cellBg = getTerrainCellBg(isEven);\n\n                // Center cell (unit position)\n                if (isCenter) {\n                  return (\n                    <div\n                      key={i}\n                      className={`aspect-square rounded-sm relative bg-slate-800 dark:bg-white z-20 flex items-center justify-center shadow-lg ${\n                        isProtected\n                          ? \"border-double border-[3px] border-emerald-500/50\"\n                          : \"\"\n                      }`}\n                    >\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-white dark:bg-black\" />\n                    </div>\n                  );\n                }\n\n                return (\n                  <div\n                    key={i}\n                    className={`aspect-square rounded-sm relative flex items-center justify-center transition-all duration-300\n                     ${\n                       isAttack\n                         ? \"bg-brand-red shadow-[0_0_15px_rgba(239,68,68,0.5)] z-20\"\n                         : isMove\n                           ? inTerrain\n                             ? getTerrainMoveShadow()\n                             : \"bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.5)] z-20\"\n                           : isBlocked\n                             ? inTerrain\n                               ? getTerrainMoveShadow()\n                               : \"bg-brand-red/40 z-10\"\n                             : cellBg\n                     }\n                   `}\n                  >\n                    {/* Tiny terrain icons */}\n                    {inTerrain && (\n                      <div\n                        className={`absolute inset-0 flex items-center justify-center ${\n                          isMove || isBlocked ? \"opacity-60\" : \"opacity-40\"\n                        } scale-[0.45] pointer-events-none`}\n                      >\n                        {terrain.icon}\n                      </div>\n                    )}\n\n                    {isBlocked && (\n                      <div\n                        className={`${\n                          inTerrain ? \"text-white\" : \"text-brand-red/40\"\n                        } z-20 scale-75`}\n                      >\n                        <X size={16} strokeWidth={3} />\n                      </div>\n                    )}\n\n                    {isMove && inTerrain && (\n                      <div className=\"text-white drop-shadow-md z-20 scale-75\">\n                        <ShieldPlus\n                          size={16}\n                          strokeWidth={3}\n                          className=\"fill-white/20\"\n                        />\n                      </div>\n                    )}\n                  </div>\n                );\n              },\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TerrainMovePreview;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/TrenchCardDetail.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":63,"messageId":"unexpectedAny","endLine":51,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1810,1813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1810,1813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":44,"messageId":"unexpectedAny","endLine":54,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1908,1911],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1908,1911],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { ShieldPlus, Ban, Zap, Sparkles } from \"lucide-react\";\nimport { INITIAL_ARMY, PIECES } from \"@engineConfigs/unitDetails\";\nimport { TERRAIN_TYPES } from \"@engineConfigs/terrainDetails\";\nimport { isUnitProtected } from \"@logic/gameLogic\";\nimport { canUnitTraverseTerrain } from \"@setup/terrainCompat\";\nimport { UNIT_DETAILS, unitColorMap } from \"@engineConfigs/unitDetails\";\nimport { TERRAIN_DETAILS } from \"@engineConfigs/terrainDetails\";\nimport type { TerrainType, PieceType } from \"@engineTypes/game\";\nimport type { PieceStyle } from \"@constants/unit.constants\";\n\ninterface TrenchCardDetailProps {\n  terrainType: TerrainType;\n  darkMode: boolean;\n  pieceStyle: PieceStyle;\n  selectedUnit?: string;\n  onUnitSelect?: (unitType: string) => void;\n}\n\nimport { CHESS_NAME } from \"@constants/intel.constants\";\n\nconst TrenchCardDetail: React.FC<TrenchCardDetailProps> = ({\n  terrainType,\n  darkMode,\n  pieceStyle,\n  selectedUnit: controlledUnit,\n  onUnitSelect: controlledOnUnitSelect,\n}) => {\n  const [internalUnit, setInternalUnit] = React.useState<string | undefined>(\n    undefined,\n  );\n  const activeUnit = controlledUnit ?? internalUnit;\n\n  const onUnitSelect = (unitType: string) => {\n    if (controlledOnUnitSelect) {\n      controlledOnUnitSelect(unitType);\n    } else {\n      setInternalUnit(activeUnit === unitType ? undefined : unitType);\n    }\n  };\n\n  const terrain = TERRAIN_DETAILS.find((t) => t.key === terrainType);\n  if (!terrain) return null;\n\n  const textColor = darkMode ? \"text-slate-100\" : \"text-slate-800\";\n  const subtextColor = darkMode ? \"text-slate-400\" : \"text-slate-500\";\n  const IconComp = terrain.icon;\n\n  // Dynamic border style based on unit affinity\n  const unitProtected = activeUnit\n    ? isUnitProtected(activeUnit as PieceType, terrainType as any)\n    : false;\n  const unitCanTraverse = activeUnit\n    ? canUnitTraverseTerrain(activeUnit as any, terrainType as TerrainType)\n    : true;\n  const panelBorderStyle = unitProtected\n    ? \"border-8 border-dotted scale-[0.98]\"\n    : !unitCanTraverse\n      ? \"border-8 border-double scale-[0.98]\"\n      : \"border-0\";\n\n  const getUnitIcon = (pieceKey: string) => {\n    const unit = INITIAL_ARMY.find((u) => u.type === pieceKey);\n    if (!unit) return null;\n    if (pieceStyle === \"lucide\") {\n      const Icon = unit.lucide;\n      return <Icon className=\"w-full h-full\" />;\n    }\n    if (pieceStyle === \"custom\") {\n      const Icon = unit.custom;\n      return <Icon className=\"w-full h-full\" />;\n    }\n    return (\n      <span className=\"text-lg leading-none\">\n        {unit[pieceStyle as \"emoji\" | \"bold\" | \"outlined\"]}\n      </span>\n    );\n  };\n\n  const renderUnitChip = (\n    pieceKey: string,\n    status: \"allow\" | \"block\" | \"sanctuary\",\n  ) => {\n    const unit = INITIAL_ARMY.find((u) => u.type === pieceKey);\n    if (!unit) return null;\n    const colors = unitColorMap[pieceKey];\n    const isSanctuary = status === \"sanctuary\";\n    const isBlock = status === \"block\";\n    const chessInfo = CHESS_NAME[pieceKey];\n    const isActive = activeUnit === pieceKey;\n\n    return (\n      <div\n        key={pieceKey}\n        onClick={() => onUnitSelect?.(pieceKey)}\n        className={`flex items-center gap-3 px-4 py-3 rounded-2xl border transition-all cursor-pointer hover:scale-[1.02] ${\n          isActive ? \"ring-2 ring-white/20 shadow-lg\" : \"\"\n        } ${\n          isBlock\n            ? \"bg-brand-red/5 border-brand-red/20 opacity-60\"\n            : isSanctuary\n              ? `${colors.bg} ${colors.border} border-double border-4`\n              : `${colors.bg} ${colors.border}`\n        }`}\n      >\n        <div\n          className={`w-8 h-8 rounded-xl flex items-center justify-center shrink-0 ${\n            isBlock ? \"text-slate-500\" : colors.text\n          }`}\n        >\n          {getUnitIcon(pieceKey)}\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <span\n            className={`block text-xs font-black uppercase tracking-wider leading-none mb-0.5 ${\n              isBlock ? \"text-slate-500\" : colors.text\n            }`}\n          >\n            {chessInfo?.chess || unit.type}\n          </span>\n          <span\n            className={`text-[10px] font-bold uppercase tracking-widest ${\n              isBlock\n                ? \"text-red-400\"\n                : isSanctuary\n                  ? \"text-amber-400\"\n                  : \"text-emerald-400\"\n            }`}\n          >\n            {isBlock\n              ? \"âœ— Blocked\"\n              : isSanctuary\n                ? \"âš” Sanctuary\"\n                : \"âœ“ Can Enter\"}\n          </span>\n        </div>\n        <div className=\"shrink-0\">\n          {isBlock ? (\n            <Ban size={16} className=\"text-red-400/60\" />\n          ) : isSanctuary ? (\n            <ShieldPlus size={16} className=\"text-amber-400/80\" />\n          ) : (\n            <Zap size={16} className={`${colors.text} opacity-60`} />\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const renderMovePreview = () => {\n    const previewGridSize = 7;\n    const center = 3;\n\n    // Use active unit or default to first sanctuary unit for the demo\n    const demoUnitType = activeUnit || terrain.sanctuaryUnits[0];\n    const demoUnitDetails = UNIT_DETAILS[demoUnitType];\n    const isProtected = terrain.sanctuaryUnits.includes(\n      demoUnitType as PieceType,\n    );\n\n    const moves = demoUnitDetails?.movePattern(center, center) || [];\n    const attacks = demoUnitDetails?.attackPattern\n      ? demoUnitDetails.attackPattern(center, center)\n      : [];\n\n    // Define mock threats based on terrain\n    const getThreats = () => {\n      const threats: Array<{ type: string; r: number; c: number }> = [];\n      if (terrainType === TERRAIN_TYPES.TREES) {\n        threats.push({ type: PIECES.ROOK, r: 3, c: 0 });\n        threats.push({ type: PIECES.KNIGHT, r: 1, c: 2 });\n      } else if (terrainType === TERRAIN_TYPES.PONDS) {\n        threats.push({ type: PIECES.BISHOP, r: 0, c: 0 });\n        threats.push({ type: PIECES.KNIGHT, r: 5, c: 2 });\n      } else if (terrainType === TERRAIN_TYPES.RUBBLE) {\n        threats.push({ type: PIECES.ROOK, r: 3, c: 6 });\n        threats.push({ type: PIECES.BISHOP, r: 6, c: 0 });\n      } else if (terrainType === TERRAIN_TYPES.DESERT) {\n        threats.push({ type: PIECES.BISHOP, r: 0, c: 6 });\n        threats.push({ type: PIECES.KNIGHT, r: 5, c: 4 });\n      }\n      return threats;\n    };\n\n    const threats = getThreats();\n\n    // Calculate threat paths\n    const threatPaths: number[][] = [];\n    threats.forEach((t) => {\n      const tDetails = UNIT_DETAILS[t.type];\n      const tAttacks = tDetails?.attackPattern\n        ? tDetails.attackPattern(t.r, t.c)\n        : tDetails?.movePattern(t.r, t.c) || [];\n      tAttacks.forEach((p) => threatPaths.push(p));\n    });\n\n    return (\n      <div className=\"bg-slate-800/20 dark:bg-white/5 rounded-2xl p-3 border border-white/5 w-fit shadow-inner\">\n        <div\n          className=\"grid gap-[1px] w-48 h-48\"\n          style={{\n            gridTemplateColumns: `repeat(${previewGridSize}, 1fr)`,\n          }}\n        >\n          {Array.from({ length: previewGridSize * previewGridSize }).map(\n            (_, i) => {\n              const r = Math.floor(i / previewGridSize);\n              const c = i % previewGridSize;\n              const isCenter = r === center && c === center;\n              const inTerrain =\n                Math.abs(r - center) <= 1 && Math.abs(c - center) <= 1;\n\n              const isMove = moves.some(([mr, mc]) => mr === r && mc === c);\n              const isAttack = attacks.some(([ar, ac]) => ar === r && ac === c);\n              const isThreat = threats.some((t) => t.r === r && t.c === c);\n              const isThreatPath = threatPaths.some(\n                ([tr, tc]) => tr === r && tc === c,\n              );\n\n              const isEven = (r + c) % 2 === 0;\n              let cellBg = isEven\n                ? \"bg-slate-100/10 dark:bg-white/5\"\n                : \"bg-slate-200/10 dark:bg-white/[0.02]\";\n\n              if (inTerrain) {\n                cellBg = isEven\n                  ? terrain.color.bg.replace(\"/10\", \"/40\")\n                  : terrain.color.bg.replace(\"/10\", \"/30\");\n              }\n\n              // Logic coloring\n              let highlightLayer = null;\n              if (isCenter) {\n                highlightLayer = (\n                  <div className=\"absolute inset-0 z-20 flex items-center justify-center\">\n                    <div className=\"text-slate-900 drop-shadow-[0_0_2px_rgba(255,255,255,0.8)] transform scale-110\">\n                      {getUnitIcon(demoUnitType)}\n                    </div>\n                  </div>\n                );\n              } else if (isThreat) {\n                const threatType = threats.find(\n                  (t) => t.r === r && t.c === c,\n                )?.type;\n                highlightLayer = (\n                  <div className=\"absolute inset-0 z-20 flex items-center justify-center\">\n                    <div className=\"text-slate-900 drop-shadow-[0_0_2px_rgba(255,255,255,0.4)] scale-90\">\n                      {threatType ? getUnitIcon(threatType) : null}\n                    </div>\n                  </div>\n                );\n              } else if (isAttack) {\n                highlightLayer = (\n                  <div className=\"absolute inset-0 bg-brand-red/20 z-10\" />\n                );\n              } else if (isMove) {\n                highlightLayer = (\n                  <div className=\"absolute inset-0 bg-emerald-500/20 z-10\" />\n                );\n              } else if (isThreatPath) {\n                const isBlockedBySanctuary = inTerrain && isProtected;\n                highlightLayer = (\n                  <div\n                    className={`absolute inset-0 z-10 ${isBlockedBySanctuary ? \"bg-slate-500/10 border border-dotted border-white/10\" : \"bg-brand-red/5\"}`}\n                  />\n                );\n              }\n\n              return (\n                <div\n                  key={i}\n                  className={`aspect-square rounded-sm relative flex items-center justify-center transition-all duration-300 ${cellBg} ${isCenter ? \"z-30\" : \"\"}`}\n                >\n                  {highlightLayer}\n                  {!isCenter && !isThreat && inTerrain && (\n                    <div className={`${terrain.color.text} opacity-20`}>\n                      <IconComp size={12} />\n                    </div>\n                  )}\n                  {!inTerrain && i === 0 && (\n                    <div className=\"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-white/5\" />\n                  )}\n                </div>\n              );\n            },\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div\n      className={`relative w-full flex flex-col items-center z-10 text-center transition-all p-6 lg:p-10 pb-12 ${panelBorderStyle}`}\n    >\n      {/* Full-width Top Ribbon */}\n      <div\n        className={`absolute top-0 left-0 right-0 z-20 ${terrain.color.headerBg} py-2 lg:py-3 shadow-lg border-b border-white/10 flex justify-center items-center`}\n      >\n        <span className=\"text-white text-lg lg:text-xl font-black uppercase tracking-[0.4em] drop-shadow-md\">\n          Trench Intel\n        </span>\n      </div>\n\n      {/* Background decoration */}\n      <div\n        className={`absolute -right-20 -top-20 w-64 h-64 rounded-full ${terrain.color.bg} blur-[80px] opacity-20`}\n      />\n\n      {/* Subtitle */}\n      <div className=\"flex items-center gap-2 mb-1 mt-10 lg:mt-12 opacity-80\">\n        <Sparkles size={20} className={terrain.color.text} />\n        <span\n          className={`text-xs font-bold uppercase tracking-[0.2em] ${terrain.color.text}`}\n        >\n          {terrain.subtitle}\n        </span>\n      </div>\n\n      {/* Title */}\n      <h3\n        className={`text-4xl lg:text-6xl font-black uppercase tracking-tighter ${textColor} mb-2 relative`}\n      >\n        <span className=\"relative z-10 drop-shadow-sm\">{terrain.label}</span>\n      </h3>\n\n      <div\n        className={`px-5 py-1.5 rounded-2xl ${terrain.color.bg} ${terrain.color.text} text-[11px] lg:text-sm font-black uppercase tracking-[0.3em] border border-white/5 mb-6 lg:mb-8`}\n      >\n        {terrain.tagline}\n      </div>\n\n      <div className=\"w-full flex flex-col md:grid md:grid-cols-[1fr_auto_1fr] gap-6 lg:gap-10 items-center mb-4 lg:mb-6\">\n        {/* Left: Terrain Icon */}\n        <div className=\"flex flex-col items-center gap-4 w-full\">\n          <div\n            className={`relative w-32 h-32 lg:w-40 lg:h-40 rounded-[2.5rem] lg:rounded-[3rem] ${terrain.color.iconBg} ${terrain.color.text} flex items-center justify-center shadow-inner border border-white/5 transition-transform hover:-rotate-3 group`}\n          >\n            <IconComp\n              size={80}\n              className=\"transition-transform group-hover:scale-110\"\n            />\n          </div>\n\n          <span\n            className={`text-[9px] lg:text-[10px] font-black uppercase tracking-widest ${subtextColor} flex items-center gap-2`}\n          >\n            <div className=\"w-2 h-2 rounded-full bg-amber-500\" />\n            Geography\n          </span>\n        </div>\n\n        {/* Center: Flavor Stats */}\n        <div className=\"flex flex-col gap-4 lg:gap-5 w-full max-md:max-w-md\">\n          <div className=\"flex flex-col gap-3 lg:gap-4\">\n            <div className=\"flex items-center gap-2 text-amber-500 font-black text-[13px] lg:text-sm uppercase italic tracking-wider mb-1 justify-center md:justify-start\">\n              <Zap size={14} className=\"fill-amber-500\" />\n              {terrain.flavorTitle}\n            </div>\n            {terrain.flavorStats.map((stat, i) => (\n              <div\n                key={i}\n                className=\"flex items-start gap-3 lg:gap-4 text-left group/item\"\n              >\n                <div\n                  className={`w-2 h-2 rounded-full bg-amber-500/40 border border-amber-500/20 mt-1.5 shrink-0 transition-transform group-hover/item:scale-125`}\n                />\n                <p\n                  className={`text-[13px] lg:text-[14px] font-bold ${subtextColor} leading-tight lg:leading-snug opacity-90 group-hover/item:opacity-100 transition-opacity`}\n                >\n                  {stat}\n                </p>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Right: Grid Preview */}\n        <div className=\"flex flex-col items-center gap-4 w-full\">\n          {renderMovePreview()}\n          <span\n            className={`text-[9px] lg:text-[10px] font-black uppercase tracking-widest ${subtextColor}`}\n          >\n            Terrain Density Preview\n          </span>\n        </div>\n      </div>\n\n      {/* Unit Interaction Grid - Bottom */}\n      <div className=\"mt-4 lg:mt-6 w-full flex flex-col items-center gap-4 lg:gap-5\">\n        <div className=\"flex items-center w-full gap-4 opacity-70\">\n          <div\n            className={`h-px flex-1 ${darkMode ? \"bg-white/10\" : \"bg-slate-900/10\"}`}\n          />\n          <span\n            className={`text-[9px] lg:text-[10px] font-black uppercase tracking-widest ${subtextColor}`}\n          >\n            Unit Interaction Profiles\n          </span>\n          <div\n            className={`h-px flex-1 ${darkMode ? \"bg-white/10\" : \"bg-slate-900/10\"}`}\n          />\n        </div>\n\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 lg:gap-3 w-full max-w-4xl\">\n          {/* Sanctuary units first */}\n          {terrain.sanctuaryUnits.map((pk) => renderUnitChip(pk, \"sanctuary\"))}\n          {/* Allowed-but-not-sanctuary */}\n          {terrain.allowedUnits\n            .filter((pk) => !terrain.sanctuaryUnits.includes(pk))\n            .map((pk) => renderUnitChip(pk, \"allow\"))}\n          {/* Blocked */}\n          {terrain.blockedUnits.map((pk) => renderUnitChip(pk, \"block\"))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TrenchCardDetail;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/organisms/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/templates/GameLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/templates/LocalGameLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/templates/MmoLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/templates/OnlineGameLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/templates/ScoreboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/templates/SpectatorLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/templates/ZenGardenLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/components/templates/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/mmo.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":12,"messageId":"unexpectedAny","endLine":24,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1083,1086],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1083,1086],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":29,"messageId":"unexpectedAny","endLine":25,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1120,1123],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1120,1123],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":245,"column":46,"messageId":"unexpectedAny","endLine":245,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8454,8457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8454,8457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":294,"column":46,"messageId":"unexpectedAny","endLine":294,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10237,10240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10237,10240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { MmoLayout } from \"./components/templates/MmoLayout\";\nimport GameBoard from \"./components/organisms/GameBoard\";\nimport MmoActionBar from \"./components/organisms/MmoActionBar\";\nimport GameStateDebug from \"./components/molecules/GameStateDebug\";\nimport { ReadyUpPanel } from \"./components/molecules/ReadyUpPanel\";\nimport { GameStartOverlay } from \"./components/atoms/GameStartOverlay\";\nimport { useRouteContext } from \"@/app/context/RouteContext\";\nimport { useDeployment } from \"@hooks/useDeployment\";\nimport { INITIAL_ARMY } from \"@engineConfigs/unitDetails\";\nimport { TERRAIN_TYPES, TERRAIN_INTEL } from \"@engineConfigs/terrainDetails\";\nimport { getPlayerCells } from \"@setup/setupLogic\";\nimport { MAX_TERRAIN_PER_PLAYER } from \"@constants/terrain.constants\";\nimport { getServerUrl } from \"@hooks/useMultiplayer\";\nimport type { useGameState } from \"@hooks/useGameState\";\nimport type { GameMode } from \"@engineTypes/game\";\n\ninterface MmoViewProps {\n  game: ReturnType<typeof useGameState>;\n}\n\nconst isPlayerFullyPlaced = (\n  pid: string,\n  terrain: any[][],\n  inventory: Record<string, any[]>,\n  mode: GameMode,\n  activePlayers: string[],\n): boolean => {\n  const unitsRemaining = (inventory[pid] || []).length;\n  if (unitsRemaining > 0) return false;\n\n  const myCells = getPlayerCells(pid, mode);\n  const pMaxPlacement =\n    activePlayers.length === 2\n      ? MAX_TERRAIN_PER_PLAYER.TWO_PLAYER\n      : MAX_TERRAIN_PER_PLAYER.FOUR_PLAYER;\n\n  let terrainCount = 0;\n  for (const [r, c] of myCells) {\n    if (terrain[r] && terrain[r][c] !== TERRAIN_TYPES.FLAT) terrainCount++;\n  }\n\n  return terrainCount >= pMaxPlacement;\n};\n\nconst MmoView: React.FC<MmoViewProps> = ({ game }) => {\n  const ctx = useRouteContext();\n  const darkMode = ctx.darkMode;\n  const pieceStyle = ctx.pieceStyle;\n  const toggleTheme = ctx.toggleTheme ?? (() => {});\n  const togglePieceStyle = ctx.togglePieceStyle ?? (() => {});\n\n  const isOnline = !!game.multiplayer.roomId;\n\n  // Local: show overlay when ALL players have placed everything\n  // Online: show overlay when THIS player has placed everything\n  const myPlayerId = isOnline ? game.localPlayerName : null;\n\n  const isAllPlacedLocally =\n    !isOnline &&\n    game.activePlayers.length > 0 &&\n    game.activePlayers.every((p: string) =>\n      isPlayerFullyPlaced(\n        p,\n        game.terrain,\n        game.inventory,\n        game.mode,\n        game.activePlayers,\n      ),\n    );\n\n  const isMyPlayerPlaced =\n    isOnline &&\n    !!myPlayerId &&\n    isPlayerFullyPlaced(\n      myPlayerId,\n      game.terrain,\n      game.inventory,\n      game.mode,\n      game.activePlayers,\n    );\n\n  const isMyPlayerLocked =\n    isOnline && !!myPlayerId && !!game.readyPlayers[myPlayerId];\n\n  const showOverlay =\n    game.gameState === \"setup\" && (isAllPlacedLocally || isMyPlayerPlaced);\n\n  const { placedCount, maxPlacement } = useDeployment({\n    mode: game.mode,\n    gameState: game.gameState,\n    terrain: game.terrain,\n    setTerrain: game.setTerrain,\n    board: game.board,\n    setBoard: game.setBoard,\n    activePlayers: game.activePlayers,\n    turn: game.turn,\n    localPlayerName: game.localPlayerName,\n    layoutName: game.layoutName,\n    setInventory: game.setInventory,\n  });\n\n  const inventoryCounts: Record<string, number> = {};\n  INITIAL_ARMY.forEach((unit) => {\n    inventoryCounts[unit.type] = (\n      game.inventory[game.turn]?.filter((u: string) => u === unit.type) || []\n    ).length;\n  });\n\n  const terrainInventoryCounts: Record<string, number> = {};\n  [\n    TERRAIN_TYPES.TREES,\n    TERRAIN_TYPES.PONDS,\n    TERRAIN_TYPES.RUBBLE,\n    TERRAIN_TYPES.DESERT,\n  ].forEach((tType) => {\n    const label = TERRAIN_INTEL[tType]?.label || tType;\n    terrainInventoryCounts[label] = (\n      game.terrainInventory[game.turn]?.filter((u: string) => u === tType) || []\n    ).length;\n  });\n\n  return (\n    <MmoLayout\n      darkMode={darkMode}\n      onLogoClick={ctx.onLogoClick}\n      debugPanel={\n        <GameStateDebug\n          gameState={game.gameState}\n          mode={game.mode}\n          turn={game.turn}\n          setupMode={game.setupMode}\n          activePlayers={game.activePlayers}\n          placementPiece={game.placementPiece}\n          placementTerrain={game.placementTerrain}\n          isFlipped={game.isFlipped}\n          getPlayerDisplayName={game.getPlayerDisplayName}\n          inventoryCounts={inventoryCounts}\n          terrainInventoryCounts={terrainInventoryCounts}\n          placedCount={placedCount}\n          maxPlacement={maxPlacement}\n          setGameState={game.setGameState}\n          setMode={game.setMode}\n          setTurn={game.setTurn}\n          setSetupMode={game.setSetupMode}\n          showBgDebug={game.showBgDebug}\n          setShowBgDebug={game.setShowBgDebug}\n          bgioState={game.bgioState}\n          onlineInfo={\n            isOnline\n              ? {\n                  roomId: game.multiplayer.roomId,\n                  playerIndex: game.multiplayer.playerIndex,\n                  isHost: game.multiplayer.isHost,\n                  isConnected: game.multiplayer.isConnected,\n                  players: game.multiplayer.players,\n                  serverUrl: getServerUrl(),\n                }\n              : undefined\n          }\n        />\n      }\n      gameBoard={\n        <GameBoard\n          board={game.board}\n          terrain={game.terrain}\n          mode={game.mode}\n          gameState={game.gameState}\n          turn={game.turn}\n          pieceStyle={game.pieceStyle}\n          selectedCell={game.selectedCell}\n          hoveredCell={game.hoveredCell}\n          validMoves={game.validMoves}\n          previewMoves={game.previewMoves}\n          placementPiece={game.placementPiece}\n          placementTerrain={game.placementTerrain}\n          setupMode={game.setupMode}\n          winner={game.winner}\n          getIcon={game.getIcon}\n          getPlayerDisplayName={game.getPlayerDisplayName}\n          handleCellClick={(r, c) => game.handleCellClick(r, c)}\n          handleCellHover={(r, c) => game.handleCellHover(r, c)}\n          setHoveredCell={game.setHoveredCell}\n          setPreviewMoves={game.setPreviewMoves}\n          setGameState={game.setGameState}\n          isFlipped={game.isFlipped}\n          localPlayerName={game.localPlayerName}\n        />\n      }\n      actionBar={\n        <MmoActionBar\n          gameState={game.gameState}\n          darkMode={darkMode}\n          pieceStyle={pieceStyle}\n          toggleTheme={toggleTheme}\n          togglePieceStyle={togglePieceStyle}\n          getIcon={game.getIcon}\n          turn={game.turn}\n          activePlayers={game.activePlayers}\n          inventory={game.inventory}\n          placementPiece={game.placementPiece}\n          placementTerrain={game.placementTerrain}\n          setPlacementPiece={game.setPlacementPiece}\n          setPlacementTerrain={game.setPlacementTerrain}\n          setSetupMode={game.setSetupMode}\n          placedCount={placedCount}\n          maxPlacement={maxPlacement}\n          randomizeTerrain={game.randomizeTerrain}\n          randomizeUnits={game.randomizeUnits}\n          setClassicalFormation={game.setClassicalFormation}\n          generateElementalTerrain={game.generateElementalTerrain}\n        />\n      }\n      leftPanel={\n        <div className=\"flex flex-col justify-between h-full\">\n          {[\"red\", \"green\"].map((expectedPid: string) => {\n            const pid = game.activePlayers.includes(expectedPid)\n              ? expectedPid\n              : undefined;\n            if (!pid)\n              return <div key={`empty-${expectedPid}`} className=\"flex-1\" />;\n\n            const myCells = getPlayerCells(pid, game.mode);\n            let pPlacedCount = 0;\n            for (const [r, c] of myCells) {\n              if (game.terrain[r] && game.terrain[r][c] !== TERRAIN_TYPES.FLAT)\n                pPlacedCount++;\n            }\n\n            const pMaxPlacement =\n              game.activePlayers.length === 2\n                ? MAX_TERRAIN_PER_PLAYER.TWO_PLAYER\n                : MAX_TERRAIN_PER_PLAYER.FOUR_PLAYER;\n\n            const pUnitsPlaced = 16 - (game.inventory[pid] || []).length;\n\n            return (\n              <ReadyUpPanel\n                key={pid}\n                gameState={game.gameState}\n                playerID={pid}\n                isReady={game.readyPlayers[pid]}\n                playerType={game.playerTypes[pid] || \"human\"}\n                setPlayerType={(type) =>\n                  game.setPlayerTypes((prev: any) => ({\n                    ...prev,\n                    [pid]: type,\n                  }))\n                }\n                isOnline={isOnline}\n                isLocalTurn={game.turn === pid}\n                onSelect={() => game.setTurn(pid)}\n                placedCount={pPlacedCount}\n                maxPlacement={pMaxPlacement}\n                unitsPlaced={pUnitsPlaced}\n                onResetTerrain={game.resetTerrain}\n                onResetUnits={game.resetUnits}\n              />\n            );\n          })}\n        </div>\n      }\n      rightPanel={\n        <div className=\"flex flex-col justify-between h-full\">\n          {[\"yellow\", \"blue\"].map((expectedPid: string) => {\n            const pid = game.activePlayers.includes(expectedPid)\n              ? expectedPid\n              : undefined;\n            if (!pid)\n              return <div key={`empty-${expectedPid}`} className=\"flex-1\" />;\n\n            const myCells = getPlayerCells(pid, game.mode);\n            let pPlacedCount = 0;\n            for (const [r, c] of myCells) {\n              if (game.terrain[r] && game.terrain[r][c] !== TERRAIN_TYPES.FLAT)\n                pPlacedCount++;\n            }\n\n            const pMaxPlacement =\n              game.activePlayers.length === 2\n                ? MAX_TERRAIN_PER_PLAYER.TWO_PLAYER\n                : MAX_TERRAIN_PER_PLAYER.FOUR_PLAYER;\n\n            const pUnitsPlaced = 16 - (game.inventory[pid] || []).length;\n\n            return (\n              <ReadyUpPanel\n                key={pid}\n                gameState={game.gameState}\n                playerID={pid}\n                isReady={game.readyPlayers[pid]}\n                playerType={game.playerTypes[pid] || \"human\"}\n                setPlayerType={(type) =>\n                  game.setPlayerTypes((prev: any) => ({\n                    ...prev,\n                    [pid]: type,\n                  }))\n                }\n                isOnline={isOnline}\n                isLocalTurn={game.turn === pid}\n                onSelect={() => game.setTurn(pid)}\n                placedCount={pPlacedCount}\n                maxPlacement={pMaxPlacement}\n                unitsPlaced={pUnitsPlaced}\n                onResetTerrain={game.resetTerrain}\n                onResetUnits={game.resetUnits}\n              />\n            );\n          })}\n        </div>\n      }\n    >\n      {showOverlay && (\n        <GameStartOverlay\n          isOnline={isOnline}\n          isLocked={isOnline ? isMyPlayerLocked : false}\n          onLockIn={() => game.ready()}\n          onStart={() => game.startGame()}\n        />\n      )}\n    </MmoLayout>\n  );\n};\n\nexport default MmoView;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/spectator.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":44,"messageId":"unexpectedAny","endLine":77,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2469,2472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2469,2472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { SpectatorLayout } from \"./components/templates/SpectatorLayout\";\nimport Header from \"@/shared/components/organisms/Header\";\nimport GameBoard from \"@/app/routes/game/components/organisms/GameBoard\";\nimport Shoutbox from \"@/app/routes/game/components/organisms/Shoutbox\";\nimport type { useGameState } from \"@hooks/useGameState\";\n\ninterface SpectatorViewProps {\n  game: ReturnType<typeof useGameState>;\n  onMenuClick: () => void;\n  onHowToPlayClick: () => void;\n  onLibraryClick: () => void;\n}\n\n/**\n * Spectator view: read-only game observation with chat.\n * No deployment controls â€” spectators watch the action unfold.\n */\nconst SpectatorView: React.FC<SpectatorViewProps> = ({\n  game,\n  onMenuClick,\n  onHowToPlayClick,\n  onLibraryClick,\n}) => {\n  return (\n    <SpectatorLayout\n      header={\n        <Header\n          onMenuClick={onMenuClick}\n          onHowToPlayClick={onHowToPlayClick}\n          onLibraryClick={onLibraryClick}\n          isFlipped={game.isFlipped}\n          setIsFlipped={(v) => {\n            game.setIsFlipped(v);\n            if (game.autoFlip) game.setAutoFlip(false);\n          }}\n          gameState={game.gameState}\n          gameMode={game.mode}\n          turn={game.turn}\n          activePlayers={game.activePlayers}\n          darkMode={game.darkMode}\n          pieceStyle={game.pieceStyle}\n          toggleTheme={game.toggleTheme}\n          togglePieceStyle={game.togglePieceStyle}\n          onZenGarden={() => game.setGameState(\"zen-garden\")}\n        />\n      }\n      gameBoard={\n        <GameBoard\n          board={game.board}\n          terrain={game.terrain}\n          mode={game.mode}\n          gameState={game.gameState}\n          turn={game.turn}\n          pieceStyle={game.pieceStyle}\n          selectedCell={null}\n          hoveredCell={null}\n          validMoves={[]}\n          previewMoves={[]}\n          placementPiece={null}\n          placementTerrain={null}\n          setupMode={game.setupMode}\n          winner={game.winner}\n          getIcon={game.getIcon}\n          getPlayerDisplayName={game.getPlayerDisplayName}\n          handleCellClick={() => {}}\n          handleCellHover={() => {}}\n          setHoveredCell={() => {}}\n          setPreviewMoves={() => {}}\n          setGameState={game.setGameState}\n          isFlipped={game.isFlipped}\n          localPlayerName={game.localPlayerName}\n        />\n      }\n      shoutbox={\n        <Shoutbox\n          multiplayer={game.multiplayer as any}\n          darkMode={game.darkMode}\n        />\n      }\n    />\n  );\n};\n\nexport default SpectatorView;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/game/zen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/home/_lazy.routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/home/components/views/NotFoundView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/home/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/lazy.routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/_lazy.routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/chess-detail.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'UNIT_ORDER' conditional could make the dependencies of useMemo Hook (at line 268) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'UNIT_ORDER' in its own useMemo() Hook.","line":26,"column":9,"endLine":45,"endColumn":8}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useState } from \"react\";\n\nimport InteractiveGuide, {\n  type Slide,\n} from \"@/app/routes/shared/components/templates/InteractiveGuide\";\nimport { PIECES, INITIAL_ARMY } from \"@engineConfigs/unitDetails\";\nimport { UNIT_DETAILS, unitColorMap } from \"@engineConfigs/unitDetails\";\nimport type { PieceType, TerrainType, ArmyUnit } from \"@engineTypes/game\";\n// Shared Route Components\nimport { TerrainIconBadge } from \"@/app/routes/shared/components/atoms/TerrainIconBadge\";\nimport { UnitMovePreview } from \"@/app/routes/shared/components/molecules/UnitMovePreview\";\nimport { GuideBullet } from \"@/app/routes/shared/components/atoms/GuideBullet\";\nimport { MathOperator } from \"@/app/routes/shared/components/atoms/MathOperator\";\n\ninterface ChessGuideProps {\n  onBack: () => void;\n  initialUnit?: string;\n}\n\nexport const LearnChessDetailView: React.FC<ChessGuideProps> = ({\n  onBack,\n  initialUnit,\n}) => {\n  const [selectedTerrain, setSelectedTerrain] = useState<string | null>(null);\n\n  const UNIT_ORDER = initialUnit\n    ? [\n        initialUnit,\n        ...[\n          PIECES.PAWN,\n          PIECES.KNIGHT,\n          PIECES.BISHOP,\n          PIECES.ROOK,\n          PIECES.QUEEN,\n          PIECES.KING,\n        ].filter((u: PieceType | string) => u !== initialUnit),\n      ]\n    : [\n        PIECES.PAWN,\n        PIECES.KNIGHT,\n        PIECES.BISHOP,\n        PIECES.ROOK,\n        PIECES.QUEEN,\n        PIECES.KING,\n      ];\n\n  const slides: Slide[] = useMemo(() => {\n    return UNIT_ORDER.map((type: PieceType | string) => {\n      const unit = INITIAL_ARMY.find((u: ArmyUnit) => u.type === type);\n      const details = UNIT_DETAILS[type];\n\n      if (!unit || !details) return null;\n\n      const colors = unitColorMap[unit.type];\n      const IconComp = unit.lucide;\n\n      // Extract base color from the text class (e.g., \"text-slate-500\" or \"text-brand-red\" -> \"red\")\n      const colorMatch = colors.text.match(/text-(?:brand-)?([a-z]+)/);\n      const colorName = colorMatch ? colorMatch[1] : \"slate\";\n      // Ensure it's one of the valid color strings\n      const validColors = [\n        \"red\",\n        \"blue\",\n        \"emerald\",\n        \"amber\",\n        \"slate\",\n        \"indigo\",\n      ];\n      const finalColor = validColors.includes(colorName) ? colorName : \"slate\";\n\n      const getClassicMoveName = (type: string) => {\n        switch (type) {\n          case PIECES.KING:\n            return \"1 OrthogDiagonal Step\";\n          case PIECES.QUEEN:\n            return \"âˆž Orthogonal & Diagonal\";\n          case PIECES.ROOK:\n            return \"âˆž Orthogonal\";\n          case PIECES.BISHOP:\n            return \"âˆž Diagonal\";\n          case PIECES.KNIGHT:\n            return \"L-Shape Trollop\";\n          case PIECES.PAWN:\n            return \"Forward March\";\n          default:\n            return \"Standard Move\";\n        }\n      };\n\n      const getThemedMoveName = (type: string) => {\n        switch (type) {\n          case PIECES.KING:\n            return \"Leap Forward\";\n          case PIECES.QUEEN:\n            return \"8 Legged Gallop\";\n          case PIECES.ROOK:\n            return \"Four-Corner Fortnight\";\n          case PIECES.BISHOP:\n            return \"Quadruple-Cardinal Double-Jump\";\n          case PIECES.KNIGHT:\n            return '\"Triple-Bar\" Jump';\n          case PIECES.PAWN:\n            return '\"Double-back\" Flip';\n          default:\n            return details.title;\n        }\n      };\n\n      return {\n        id: unit.type,\n        title: details.title,\n        subtitle: details.subtitle,\n        color: finalColor as Slide[\"color\"],\n        topLabel: details.role,\n        icon: IconComp,\n        previewConfig: {\n          mode: \"2p-ns\",\n          protocol: \"classic\",\n          showIcons: false,\n          hideUnits: false,\n        },\n        leftContent: details.levelUp?.sanctuaryTerrain ? (\n          <div className=\"flex items-center gap-6\">\n            <div className=\"flex gap-2\">\n              {details.levelUp.sanctuaryTerrain.map(\n                (key: TerrainType | string, idx: number) => (\n                  <TerrainIconBadge\n                    key={idx}\n                    terrainKey={key as TerrainType}\n                    active={selectedTerrain === key}\n                    onClick={() =>\n                      setSelectedTerrain((prev) =>\n                        prev === key ? null : (key as string),\n                      )\n                    }\n                  />\n                ),\n              )}\n            </div>\n          </div>\n        ) : null,\n        description: null,\n        sideContent: (\n          <div className=\"flex flex-row items-center justify-center gap-2 w-full overflow-x-auto pb-4 scrollbar-hide\">\n            {/* Classic Move */}\n            <div className=\"flex flex-col items-center gap-4 shrink-0\">\n              <UnitMovePreview\n                unitType={unit.type}\n                mode=\"classic\"\n                selectedTerrain={selectedTerrain}\n                className=\"\"\n              />\n              <div className=\"text-emerald-600 dark:text-emerald-500 text-center font-bold text-[9px] tracking-widest uppercase w-full\">\n                {getClassicMoveName(unit.type)}\n              </div>\n            </div>\n\n            <MathOperator operator=\"+\" />\n\n            {/* Themed Move */}\n            <div className=\"flex flex-col items-center gap-4 shrink-0\">\n              <UnitMovePreview\n                unitType={unit.type}\n                mode=\"new\"\n                selectedTerrain={selectedTerrain}\n                className=\"\"\n              />\n              <div className=\"text-center font-bold text-[9px] tracking-widest text-amber-600 dark:text-amber-500 uppercase w-full\">\n                {getThemedMoveName(unit.type)}\n              </div>\n            </div>\n\n            <MathOperator operator=\"=\" />\n\n            {/* Both Moves */}\n            <div className=\"flex flex-col items-center gap-4 shrink-0\">\n              <UnitMovePreview\n                unitType={unit.type}\n                mode=\"both\"\n                selectedTerrain={selectedTerrain}\n                className=\"\"\n                containerClassName=\"border-2 border-indigo-500/40 shadow-lg shadow-indigo-500/10\"\n              />\n              <div className=\"text-center font-bold text-[9px] tracking-widest text-indigo-600 dark:text-indigo-400 uppercase w-full\">\n                {details.levelUp?.title || details.title}\n              </div>\n            </div>\n          </div>\n        ),\n        infoContent: (\n          <div className=\"flex flex-col items-center gap-8\">\n            {/* Move Legend */}\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-3 p-6 rounded-3xl bg-slate-100/50 dark:bg-white/5 border border-slate-200/50 dark:border-white/5 w-full max-w-2xl mx-auto\">\n              {/* Basic Movement */}\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-3 h-3 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]\" />\n                <span className=\"text-[10px] font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400\">\n                  Unit Movement\n                </span>\n              </div>\n\n              {/* Standard Capture */}\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-3 h-3 rounded-full bg-brand-red shadow-[0_0_8px_rgba(239,68,68,0.4)]\" />\n                <span className=\"text-[10px] font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400\">\n                  Capture Zone\n                </span>\n              </div>\n\n              {/* Promotion for Pawns */}\n              {unit.type === PIECES.PAWN && (\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-3 h-3 rounded-full bg-amber-500/20 flex items-center justify-center\">\n                    <div className=\"w-1 h-1 rounded-full bg-amber-500/60\" />\n                  </div>\n                  <span className=\"text-[10px] font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400\">\n                    Promotion Rank\n                  </span>\n                </div>\n              )}\n\n              {/* Special Abilities from stats */}\n              {details.levelUp?.stats.map((stat: string, sIdx: number) => {\n                const colonIndex = stat.indexOf(\":\");\n                if (colonIndex === -1) {\n                  if (stat.toLowerCase().includes(\"sanctuary\")) return null;\n\n                  return (\n                    <div\n                      key={`legend-${sIdx}`}\n                      className=\"flex items-start gap-3 sm:col-span-2\"\n                    >\n                      <div className=\"w-3 h-3 rounded-full bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.4)] mt-0.5 animate-pulse\" />\n                      <p className=\"text-[10px] font-medium text-slate-600 dark:text-slate-300\">\n                        <span className=\"font-black uppercase tracking-wider text-amber-500 mr-2\">\n                          Special:\n                        </span>\n                        {stat}\n                      </p>\n                    </div>\n                  );\n                }\n\n                const name = stat.substring(0, colonIndex);\n                const desc = stat.substring(colonIndex + 1).trim();\n                const isSanctuary = name.toLowerCase().includes(\"sanctuary\");\n\n                return (\n                  <div\n                    key={`legend-${sIdx}`}\n                    className={`flex items-start gap-3 ${isSanctuary ? \"sm:col-span-2\" : \"sm:col-span-2\"}`}\n                  >\n                    <GuideBullet color=\"amber\" />\n                    <p className=\"text-[10px] font-medium text-slate-600 dark:text-slate-300\">\n                      <span className=\"font-black uppercase tracking-wider text-amber-500 mr-2\">\n                        {name}:\n                      </span>\n                      {desc}\n                    </p>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        ),\n      };\n    }).filter(Boolean) as Slide[];\n  }, [UNIT_ORDER, selectedTerrain]);\n\n  return (\n    <InteractiveGuide\n      title=\"The Chess - Unit Roster\"\n      slides={slides}\n      onBack={onBack}\n      labelColor=\"blue\"\n      onSlideChange={(id) => {\n        window.history.replaceState(null, \"\", `/learn/chess/${id}`);\n        setSelectedTerrain(null); // Reset terrain preview on slide change\n      }}\n    />\n  );\n};\n\nexport default LearnChessDetailView;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/chess-main.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RotateCcw' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"messageId":"unusedVar","endLine":12,"endColumn":12,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"RotateCcw"},"fix":{"range":[218,231],"text":""},"desc":"Remove unused variable \"RotateCcw\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":39,"messageId":"unexpectedAny","endLine":54,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1669,1672],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1669,1672],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":47,"messageId":"unexpectedAny","endLine":60,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1852,1855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1852,1855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":53,"messageId":"unexpectedAny","endLine":84,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2532,2535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2532,2535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":166,"column":37,"messageId":"unexpectedAny","endLine":166,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5132,5135],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5132,5135],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\nimport { useNavigate, useParams, useLocation } from \"react-router-dom\";\nimport {\n  ChessPawn,\n  Trophy,\n  Calculator,\n  BicepsFlexed,\n  Trees,\n  Waves,\n  Mountain,\n  ChessKnight,\n  RotateCcw,\n  HeartCrack,\n  Swords,\n  Tornado,\n  Rabbit,\n} from \"lucide-react\";\n\nimport { useRouteContext } from \"@/app/context/RouteContext\";\n\n// Shared Route Components\nimport RoutePageLayout from \"@/app/routes/shared/components/templates/RoutePageLayout\";\nimport RoutePageHeader from \"@/app/routes/shared/components/organisms/RoutePageHeader\";\nimport RoutePageFooter from \"@/app/routes/shared/components/organisms/RoutePageFooter\";\nimport RouteGrid from \"@/app/routes/shared/components/templates/RouteGrid\";\nimport RouteCard from \"@/app/routes/shared/components/molecules/RouteCard\";\nimport RouteDetailModal from \"@/app/routes/shared/components/organisms/RouteDetailModal\";\nimport ChessCardDetail from \"@/app/routes/game/components/organisms/ChessCardDetail\";\nimport {\n  INITIAL_ARMY,\n  PIECES,\n  UNIT_DETAILS,\n  unitColorMap,\n} from \"@engineConfigs/unitDetails\";\n\nexport const LearnChessMainView: React.FC = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { unitType } = useParams<{ unitType: string }>();\n  const { setHoveredMenu, darkMode } = useRouteContext();\n\n  // Define piece groups\n  const CHESS_PIECES = [\n    PIECES.PAWN, // Pawn\n    PIECES.KNIGHT, // Knight\n    PIECES.BISHOP, // Bishop\n    PIECES.ROOK, // Rook\n    PIECES.QUEEN, // Queen\n    PIECES.KING, // King\n  ];\n\n  const getCategoryForUnit = (type: string | undefined) => {\n    if (!type) return null;\n    if (CHESS_PIECES.includes(type as any)) return \"chessmen\";\n    return null;\n  };\n\n  const [view, setView] = useState<\"selection\" | \"chessmen\">(() => {\n    if (unitType) {\n      return (getCategoryForUnit(unitType) as any) || \"selection\";\n    }\n    const state = location.state as { view?: \"selection\" | \"chessmen\" } | null;\n    return state?.view || \"selection\";\n  });\n\n  const closeModal = () => {\n    navigate(\"/learn/chess\");\n  };\n\n  // Define the order of pieces based on current view\n  const UNIT_ORDER = view === \"chessmen\" ? CHESS_PIECES : [];\n\n  // Map piece types to clean display names\n  const displayNames: Record<string, string> = {\n    [PIECES.PAWN]: \"Pawn\",\n    [PIECES.KNIGHT]: \"Knight\",\n    [PIECES.BISHOP]: \"Bishop\",\n    [PIECES.ROOK]: \"Rook\",\n    [PIECES.QUEEN]: \"Queen\",\n    [PIECES.KING]: \"King\",\n  };\n\n  // Navigation Logic\n  const chessIndex = UNIT_ORDER.indexOf(unitType as any);\n  const prevUnitType =\n    chessIndex !== -1\n      ? UNIT_ORDER[(chessIndex - 1 + UNIT_ORDER.length) % UNIT_ORDER.length]\n      : null;\n  const nextUnitType =\n    chessIndex !== -1 ? UNIT_ORDER[(chessIndex + 1) % UNIT_ORDER.length] : null;\n\n  const prevUnit = INITIAL_ARMY.find((u) => u.type === prevUnitType);\n  const nextUnit = INITIAL_ARMY.find((u) => u.type === nextUnitType);\n\n  return (\n    <RoutePageLayout>\n      <RoutePageHeader\n        label={\n          view === \"chessmen\"\n            ? '\"From the trench, the Chessmen grow stronger\"'\n            : '\"The world cracks into 3, and with it, the Endgame.\"'\n        }\n        color={view === \"chessmen\" ? \"blue\" : \"red\"}\n        onBackClick={() => {\n          if (view !== \"selection\") {\n            setView(\"selection\");\n          } else {\n            navigate(\"/learn\");\n          }\n        }}\n      />\n\n      {view === \"selection\" ? (\n        <RouteGrid cols={2}>\n          <RouteCard\n            onClick={() => setView(\"chessmen\")}\n            onMouseEnter={() => setHoveredMenu(\"chess\")}\n            onMouseLeave={() => setHoveredMenu(null)}\n            preview={{\n              mode: \"2p-ns\",\n              hideUnits: true,\n            }}\n            isSelected={false}\n            darkMode={darkMode}\n            title=\"The Chessmen\"\n            description='\"From the trench, the Chessmen grow stronger\"'\n            Icon={ChessPawn}\n            HoverIcon={BicepsFlexed}\n            color=\"blue\"\n            className=\"h-full w-full py-12\"\n          />\n          <RouteCard\n            onClick={() => navigate(\"/learn/endgame\")}\n            onMouseEnter={() => setHoveredMenu(\"boardgame\")}\n            onMouseLeave={() => setHoveredMenu(null)}\n            preview={{\n              mode: \"4p\",\n              hideUnits: true,\n            }}\n            isSelected={false}\n            darkMode={darkMode}\n            title=\"The Endgame\"\n            description='\"The world cracks into 3, and with it, the Endgame.\"'\n            Icon={HeartCrack}\n            HoverIcon={Trophy}\n            color=\"red\"\n            className=\"h-full w-full py-12\"\n          />\n        </RouteGrid>\n      ) : (\n        <RouteGrid cols={3}>\n          {UNIT_ORDER.map((type) => {\n            const unit = INITIAL_ARMY.find((u) => u.type === type);\n            if (!unit) return null;\n\n            const details = UNIT_DETAILS[type];\n\n            let cardColor:\n              | \"red\"\n              | \"blue\"\n              | \"emerald\"\n              | \"amber\"\n              | \"slate\"\n              | \"fuchsia\" = \"slate\";\n\n            let HoverIconComponent: any = unit.custom;\n\n            if (type === PIECES.PAWN) {\n              cardColor = \"blue\";\n              HoverIconComponent = Rabbit;\n            } else if (type === PIECES.KNIGHT) {\n              cardColor = \"slate\";\n              HoverIconComponent = Mountain;\n            } else if (type === PIECES.BISHOP) {\n              cardColor = \"red\";\n              HoverIconComponent = Trees;\n            } else if (type === PIECES.ROOK) {\n              cardColor = \"amber\";\n              HoverIconComponent = Waves;\n            } else if (type === PIECES.QUEEN) {\n              cardColor = \"emerald\";\n              HoverIconComponent = ChessKnight;\n            } else if (type === PIECES.KING) {\n              cardColor = \"fuchsia\";\n              HoverIconComponent = Swords;\n            }\n\n            const previewMode = view === \"chessmen\" ? \"2p-ns\" : \"4p\";\n\n            return (\n              <RouteCard\n                key={type}\n                onClick={() => navigate(`/learn/chess/${type}`)}\n                onMouseEnter={() => setHoveredMenu(\"chess\")}\n                onMouseLeave={() => setHoveredMenu(null)}\n                preview={{\n                  mode: previewMode,\n                  hideUnits: true,\n                }}\n                isSelected={false}\n                darkMode={darkMode}\n                title={details?.title || displayNames[type]}\n                description={details?.role || \"Unit Details\"}\n                Icon={unit.lucide}\n                HoverIcon={HoverIconComponent}\n                color={cardColor}\n                className=\"h-full w-full px-2 py-4\"\n              />\n            );\n          })}\n        </RouteGrid>\n      )}\n\n      {view === \"selection\" && !unitType && (\n        <RoutePageFooter\n          onForwardClick={() => navigate(\"/learn/math\")}\n          forwardLabel=\"Be Mathematical\"\n          forwardIcon={Calculator}\n          backIcon={Tornado}\n          backLabel=\"Open the Trench\"\n          onBackClick={() => navigate(\"/learn/trench\")}\n        />\n      )}\n\n      {view === \"chessmen\" && !unitType && (\n        <RoutePageFooter\n          onBackClick={() => navigate(\"/learn/trench\")}\n          backLabel=\"Open the Trench\"\n          backIcon={Tornado}\n          onForwardClick={() => navigate(\"/learn/endgame\")}\n          forwardLabel=\"The Endgame\"\n          forwardIcon={HeartCrack}\n        />\n      )}\n\n      <RouteDetailModal\n        isOpen={!!unitType}\n        onClose={closeModal}\n        darkMode={darkMode}\n        color={\n          unitType === PIECES.QUEEN\n            ? \"emerald\"\n            : unitType === PIECES.KING\n              ? \"fuchsia\"\n              : unitType === PIECES.BISHOP\n                ? \"red\"\n                : unitType === PIECES.ROOK\n                  ? \"amber\"\n                  : unitType === PIECES.PAWN\n                    ? \"blue\"\n                    : \"slate\"\n        }\n        prev={\n          prevUnit\n            ? {\n                icon: prevUnit.lucide,\n                label:\n                  UNIT_DETAILS[prevUnit.type]?.title ||\n                  displayNames[prevUnit.type],\n                onClick: () => navigate(`/learn/chess/${prevUnit.type}`),\n                className: unitColorMap[prevUnit.type].text,\n              }\n            : undefined\n        }\n        next={\n          nextUnit\n            ? {\n                icon: nextUnit.lucide,\n                label:\n                  UNIT_DETAILS[nextUnit.type]?.title ||\n                  displayNames[nextUnit.type],\n                onClick: () => navigate(`/learn/chess/${nextUnit.type}`),\n                className: unitColorMap[nextUnit.type].text,\n              }\n            : undefined\n        }\n      >\n        {unitType && (\n          <ChessCardDetail unitType={unitType} darkMode={darkMode} />\n        )}\n      </RouteDetailModal>\n    </RoutePageLayout>\n  );\n};\n\nexport default LearnChessMainView;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/cta.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/ctk.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/ctw.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/home/xopher/www/x/battle-chess/src/app/routes/learn/ctw.tsx:27:28\n  25 |     const seeds = DEFAULT_SEEDS;\n  26 |     if (seeds.length === 0) return undefined;\n> 27 |     const idx = Math.floor(Math.random() * seeds.length);\n     |                            ^^^^^^^^^^^^^ Cannot call impure function\n  28 |     return seeds[idx]?.seed;\n  29 |   }, []);\n  30 |","line":27,"column":28,"endLine":27,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":45,"messageId":"unexpectedAny","endLine":49,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1432,1435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1432,1435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":45,"messageId":"unexpectedAny","endLine":70,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2163,2166],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2163,2166],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":45,"messageId":"unexpectedAny","endLine":102,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3345,3348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3345,3348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from \"react\";\nimport { Earth, Crown, Replace, Swords } from \"lucide-react\";\nimport { useNavigate } from \"react-router-dom\";\nimport InteractiveGuide, {\n  type Slide,\n} from \"@/app/routes/shared/components/templates/InteractiveGuide\";\nimport { DEFAULT_SEEDS } from \"@engineConfigs/defaultSeeds\";\n\n// Shared Route Components\nimport { GuideListItem } from \"@/app/routes/shared/components/molecules/GuideListItem\";\nimport {\n  CornerStartingPositionsGraphic,\n  TransContinentalGraphic,\n  TroopConversionGraphic,\n} from \"@/app/routes/shared/components/molecules/CtwGraphics\";\n\ninterface CaptureTheWorldGuideProps {\n  onBack: () => void;\n}\n\nexport const LearnEndgameCtwView: React.FC<CaptureTheWorldGuideProps> = ({\n  onBack,\n}) => {\n  const randomSeed = useMemo(() => {\n    const seeds = DEFAULT_SEEDS;\n    if (seeds.length === 0) return undefined;\n    const idx = Math.floor(Math.random() * seeds.length);\n    return seeds[idx]?.seed;\n  }, []);\n\n  const customPreviewConfig = useMemo(() => {\n    return {\n      mode: \"2v2\",\n      protocol: \"terrainiffic\",\n      customSeed: randomSeed,\n      showIcons: true,\n      hideUnits: false,\n    };\n  }, [randomSeed]);\n\n  const slides: Slide[] = [\n    {\n      id: \"pregame\",\n      title: \"Strategic Origin\",\n      subtitle: \"King Starts in the Corner\",\n      color: \"amber\",\n      topLabel: \"Pregame Setup\",\n      icon: Crown,\n      previewConfig: customPreviewConfig as any,\n      description: (\n        <ul className=\"space-y-4\">\n          <GuideListItem color=\"amber\">\n            The King is the only piece that has a strict starting location. All\n            Kings must begin in the absolute corner of their starting zone.\n          </GuideListItem>\n          <GuideListItem color=\"amber\">\n            This forces a perilous journey across the world.\n          </GuideListItem>\n        </ul>\n      ),\n      sideContent: <CornerStartingPositionsGraphic />,\n    },\n    {\n      id: \"win\",\n      title: \"Race Across the World\",\n      subtitle: \"Avoid Checkmate & Reach the Goal\",\n      color: \"emerald\",\n      topLabel: \"Win Conditions\",\n      icon: Earth,\n      previewConfig: customPreviewConfig as any,\n      description: (\n        <ul className=\"space-y-6\">\n          <GuideListItem color=\"emerald\">\n            <strong className=\"text-slate-800 dark:text-slate-100 block mb-1 uppercase tracking-widest text-xs font-black\">\n              The Objective\n            </strong>\n            <p>\n              Make it to the square opposite your king's starting tile color.\n              Landing there achieves world domination.\n            </p>\n          </GuideListItem>\n          <GuideListItem color=\"emerald\">\n            <strong className=\"text-slate-800 dark:text-slate-100 block mb-1 uppercase tracking-widest text-xs font-black\">\n              2v2 Protocol\n            </strong>\n            <p>\n              In a team match, BOTH kings must make it to their respective\n              opposing corners to secure the victory.\n            </p>\n          </GuideListItem>\n        </ul>\n      ),\n      sideContent: <TransContinentalGraphic />,\n    },\n    {\n      id: \"threat\",\n      title: \"Rules of Succession\",\n      subtitle: \"Checkmate Still Applies\",\n      color: \"indigo\",\n      topLabel: \"Army Assimilation\",\n      icon: Replace,\n      previewConfig: customPreviewConfig as any,\n      description: (\n        <ul className=\"space-y-4\">\n          <GuideListItem color=\"indigo\">\n            Just like in Capture the Army, avoiding checkmate is crucial.\n          </GuideListItem>\n          <GuideListItem color=\"indigo\">\n            If your king is cornered, the victorious player inherits your entire\n            remaining army. The world is cruel.\n          </GuideListItem>\n        </ul>\n      ),\n      sideContent: <TroopConversionGraphic />,\n    },\n  ];\n\n  const navigate = useNavigate();\n\n  return (\n    <InteractiveGuide\n      title=\"Capture the World\"\n      slides={slides}\n      onBack={onBack}\n      labelColor=\"emerald\"\n      footerForward={{\n        label: \"Enter The Trenchess\",\n        onClick: () => navigate(\"/play\"),\n        icon: Swords,\n      }}\n    />\n  );\n};\n\nexport default LearnEndgameCtwView;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/endgame-main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/manual.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":37,"messageId":"unexpectedAny","endLine":124,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4927,4930],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4927,4930],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":47,"messageId":"unexpectedAny","endLine":124,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4937,4940],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4937,4940],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":266,"column":37,"messageId":"unexpectedAny","endLine":266,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11957,11960],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11957,11960],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":266,"column":47,"messageId":"unexpectedAny","endLine":266,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11967,11970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11967,11970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\n * Copyright (c) 2006 - 2026 Hall of the Gods, Inc.\n * All Rights Reserved.\n *\n * This software is the confidential and proprietary information of Trenchess.\n */\nimport React, { useEffect } from \"react\";\nimport { Waves, Crosshair, ShieldPlus, Zap } from \"lucide-react\";\nimport { useRouteContext } from \"@/app/context/RouteContext\";\nimport { PIECES, INITIAL_ARMY } from \"@engineConfigs/unitDetails\";\nimport { DesertIcon } from \"@/app/routes/game/components/atoms/UnitIcons\";\nimport { UNIT_DETAILS, unitColorMap } from \"@engineConfigs/unitDetails\";\nimport type { PieceStyle } from \"@constants/unit.constants\";\n\n// Shared Route Components\nimport RoutePageLayout from \"@/app/routes/shared/components/templates/RoutePageLayout\";\nimport RoutePageHeader from \"@/app/routes/shared/components/organisms/RoutePageHeader\";\nimport { UnitMovePreview } from \"@/app/routes/shared/components/molecules/UnitMovePreview\";\nimport { TerrainIconBadge } from \"@/app/routes/shared/components/atoms/TerrainIconBadge\";\nimport { GuideBullet } from \"@/app/routes/shared/components/atoms/GuideBullet\";\nimport SectionDivider from \"@/shared/components/molecules/SectionDivider\";\nimport TerrainIntelTool from \"@/app/routes/game/components/organisms/TerrainIntelTool\";\n\ninterface LearnManualViewProps {\n  onBack: () => void;\n  darkMode: boolean;\n  pieceStyle: PieceStyle;\n}\n\nexport const LearnManualView: React.FC<LearnManualViewProps> = ({\n  onBack,\n  darkMode,\n}) => {\n  const { setTerrainSeed, setPreviewConfig } = useRouteContext();\n  const [selectedTerrain, setSelectedTerrain] = React.useState<string | null>(\n    null,\n  );\n\n  useEffect(() => {\n    // Set fixed preview for this page\n    setPreviewConfig({\n      mode: null,\n      protocol: \"terrainiffic\",\n      showIcons: true,\n      hideUnits: true,\n    });\n    setTerrainSeed(12345);\n    return () => setPreviewConfig({ mode: null });\n  }, [setPreviewConfig, setTerrainSeed]);\n\n  const textColor = darkMode ? \"text-slate-100\" : \"text-slate-800\";\n  const subtextColor = darkMode ? \"text-slate-400\" : \"text-slate-500\";\n\n  const cardBg = darkMode ? \"bg-slate-900/50\" : \"bg-white/70\";\n  const borderColor = darkMode ? \"border-white/10\" : \"border-slate-200\";\n\n  const renderSectionTitle = (\n    title: string,\n    icon: React.ReactNode,\n    isGold?: boolean,\n  ) => (\n    <div className=\"flex items-center gap-3 mb-6\">\n      <div\n        className={`p-2 rounded-lg ${isGold ? \"bg-amber-500/20 text-amber-500 border border-amber-500/30\" : darkMode ? \"bg-blue-500/20 text-blue-400\" : \"bg-blue-100 text-blue-600\"}`}\n      >\n        {icon}\n      </div>\n      <h2\n        className={`text-2xl font-black tracking-widest ${isGold ? \"text-amber-500\" : textColor}`}\n      >\n        {title}\n      </h2>\n    </div>\n  );\n\n  return (\n    <RoutePageLayout>\n      <RoutePageHeader\n        label=\"Manual Intel\"\n        onBackClick={onBack}\n        color=\"amber\"\n      />\n      <div className=\"max-w-5xl mx-auto w-full\">\n        {/* New Classes & Abilities Header */}\n        <div className=\"flex flex-col items-center mb-16\">\n          <SectionDivider\n            label=\"You've Unlocked New Classes & Abilities!\"\n            color=\"amber\"\n            animate={true}\n          />\n        </div>\n\n        {/* New Classes Section */}\n        <div className=\"mb-12\">\n          <div className=\"grid grid-cols-1 gap-8\">\n            {[PIECES.KNIGHT, PIECES.BISHOP, PIECES.ROOK].map((type) => {\n              const unit = INITIAL_ARMY.find((u) => u.type === type);\n              if (!unit) return null;\n\n              const details = UNIT_DETAILS[unit.type];\n              if (!details) return null;\n\n              const colors = unitColorMap[unit.type];\n              const IconComp = unit.lucide;\n\n              return (\n                <div\n                  key={unit.type}\n                  className={`relative p-8 rounded-3xl border-4 ${cardBg} ${colors.border} flex flex-col gap-6 transition-all hover:shadow-lg overflow-hidden`}\n                >\n                  <div className=\"flex flex-col sm:flex-row gap-10 items-center\">\n                    {/* Unit Icon (Left) */}\n                    <div className=\"flex flex-col shrink-0 gap-4 items-center\">\n                      <div\n                        className={`w-36 h-36 sm:w-48 sm:h-48 rounded-[2.5rem] ${colors.bg} ${colors.text} flex items-center justify-center shadow-inner border border-white/5 transition-transform hover:-rotate-3 group`}\n                      >\n                        <IconComp className=\"w-24 h-24 sm:w-32 sm:h-32 transition-transform group-hover:scale-110\" />\n                      </div>\n                      {/* Terrain Icons Below Main Icon */}\n                      {details.levelUp?.sanctuaryTerrain && (\n                        <div className=\"flex justify-center\">\n                          <div className=\"flex gap-2\">\n                            {details.levelUp.sanctuaryTerrain.map(\n                              (key: any, idx: any) => (\n                                <TerrainIconBadge\n                                  key={idx}\n                                  terrainKey={key}\n                                  active={selectedTerrain === key}\n                                  onClick={() =>\n                                    setSelectedTerrain((prev) =>\n                                      prev === key ? null : key,\n                                    )\n                                  }\n                                />\n                              ),\n                            )}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Description (Middle) */}\n                    <div className=\"flex-1 min-w-0 flex flex-col text-center sm:text-left justify-center py-2\">\n                      <div className=\"flex flex-col gap-1 items-center sm:items-start mb-6\">\n                        <div className=\"flex items-center gap-4 justify-center sm:justify-start w-full\">\n                          <h3\n                            className={`text-4xl font-black uppercase tracking-tighter ${textColor}`}\n                          >\n                            {details.title}\n                          </h3>\n                          <div\n                            className={`px-4 py-1.5 rounded-xl ${colors.bg} ${colors.text} text-[11px] font-black uppercase tracking-widest border border-white/5`}\n                          >\n                            {details.role}\n                          </div>\n                        </div>\n                        {details.subtitle && (\n                          <span\n                            className={`text-sm font-bold uppercase tracking-[0.2em] ${colors.text} opacity-80`}\n                          >\n                            {details.subtitle}\n                          </span>\n                        )}\n                      </div>\n\n                      <ul className=\"space-y-3\">\n                        {details.levelUp && (\n                          <div className=\"p-4 rounded-2xl bg-amber-500/5 border border-amber-500/10 mb-6 relative\">\n                            <div className=\"flex items-center gap-2 text-amber-500 font-black text-sm uppercase italic tracking-wider mb-2\">\n                              <Zap size={14} className=\"fill-amber-500\" />\n                              {details.levelUp.title}\n                            </div>\n                            <ul className=\"space-y-1\">\n                              {details.levelUp.stats.map((stat, sIdx) => (\n                                <li\n                                  key={sIdx}\n                                  className=\"text-xs font-bold text-slate-500 dark:text-slate-400 flex items-center gap-2 text-left\"\n                                >\n                                  <GuideBullet color=\"amber\" size=\"sm\" />\n                                  {stat}\n                                </li>\n                              ))}\n                            </ul>\n                          </div>\n                        )}\n                        {details.desc?.map((bullet, idx) => {\n                          const parts = bullet.split(\": \");\n                          const header = parts[0];\n                          const content = parts.slice(1).join(\": \");\n                          return (\n                            <li\n                              key={idx}\n                              className={`text-sm text-center sm:text-left`}\n                            >\n                              <div className=\"flex flex-col sm:flex-row sm:items-baseline sm:gap-2\">\n                                <span\n                                  className={`font-black uppercase tracking-tight text-xs ${colors.text} shrink-0`}\n                                >\n                                  {header\n                                    .replace(/\\*\\*/g, \"\")\n                                    .replace(\"New! \", \"âœ¨ \")}\n                                </span>\n                                <span\n                                  className={`${subtextColor} font-medium leading-relaxed`}\n                                >\n                                  {content}\n                                </span>\n                              </div>\n                            </li>\n                          );\n                        })}\n                      </ul>\n                    </div>\n\n                    {/* Move Preview (Right) */}\n                    <div className=\"shrink-0 flex flex-col gap-3 items-center sm:items-start\">\n                      <span\n                        className={`text-[10px] font-black uppercase tracking-widest ${subtextColor} flex items-center gap-2`}\n                      >\n                        <div className=\"w-2 h-2 rounded-full bg-emerald-500\" />\n                        Move Set\n                      </span>\n                      <UnitMovePreview\n                        unitType={unit.type}\n                        selectedTerrain={selectedTerrain}\n                      />\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* New Abilities Section */}\n        <div className=\"mb-12\">\n          <div className=\"grid grid-cols-1 gap-8\">\n            {[PIECES.PAWN, PIECES.QUEEN, PIECES.KING].map((type) => {\n              const unit = INITIAL_ARMY.find((u) => u.type === type);\n              if (!unit) return null;\n\n              const details = UNIT_DETAILS[unit.type];\n              if (!details) return null;\n\n              const colors = unitColorMap[unit.type];\n              const IconComp = unit.lucide;\n\n              return (\n                <div\n                  key={unit.type}\n                  className={`relative p-8 rounded-3xl border-4 ${cardBg} ${colors.border} flex flex-col gap-6 transition-all hover:shadow-lg overflow-hidden`}\n                >\n                  <div className=\"flex flex-col sm:flex-row gap-10 items-center\">\n                    {/* Unit Icon (Left) */}\n                    <div className=\"flex flex-col shrink-0 gap-4 items-center\">\n                      <div\n                        className={`w-36 h-36 sm:w-48 sm:h-48 rounded-[2.5rem] ${colors.bg} ${colors.text} flex items-center justify-center shadow-inner border border-white/5 transition-transform hover:-rotate-3 group`}\n                      >\n                        <IconComp className=\"w-24 h-24 sm:w-32 sm:h-32 transition-transform group-hover:scale-110\" />\n                      </div>\n                      {/* Terrain Icons Below Main Icon */}\n                      {details.levelUp?.sanctuaryTerrain && (\n                        <div className=\"flex justify-center\">\n                          <div className=\"flex gap-2\">\n                            {details.levelUp.sanctuaryTerrain.map(\n                              (key: any, idx: any) => (\n                                <TerrainIconBadge\n                                  key={idx}\n                                  terrainKey={key}\n                                  active={selectedTerrain === key}\n                                  onClick={() =>\n                                    setSelectedTerrain((prev) =>\n                                      prev === key ? null : key,\n                                    )\n                                  }\n                                />\n                              ),\n                            )}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Description (Middle) */}\n                    <div className=\"flex-1 min-w-0 flex flex-col text-center sm:text-left justify-center py-2\">\n                      <div className=\"flex flex-col gap-1 items-center sm:items-start mb-6\">\n                        <div className=\"flex items-center gap-4 justify-center sm:justify-start w-full\">\n                          <h3\n                            className={`text-4xl font-black uppercase tracking-tighter ${textColor}`}\n                          >\n                            {details.title}\n                          </h3>\n                          <div\n                            className={`px-4 py-1.5 rounded-xl ${colors.bg} ${colors.text} text-[11px] font-black uppercase tracking-widest border border-white/5`}\n                          >\n                            {details.role}\n                          </div>\n                        </div>\n                        {details.subtitle && (\n                          <span\n                            className={`text-sm font-bold uppercase tracking-[0.2em] ${colors.text} opacity-80`}\n                          >\n                            {details.subtitle}\n                          </span>\n                        )}\n                      </div>\n\n                      <ul className=\"space-y-3\">\n                        {details.levelUp && (\n                          <div className=\"p-4 rounded-2xl bg-amber-500/5 border border-amber-500/10 mb-6 relative\">\n                            <div className=\"flex items-center gap-2 text-amber-500 font-black text-sm uppercase italic tracking-wider mb-2\">\n                              <Zap size={14} className=\"fill-amber-500\" />\n                              {details.levelUp.title}\n                            </div>\n                            <ul className=\"space-y-1\">\n                              {details.levelUp.stats.map((stat, sIdx) => (\n                                <li\n                                  key={sIdx}\n                                  className=\"text-xs font-bold text-slate-500 dark:text-slate-400 flex items-center gap-2 text-left\"\n                                >\n                                  <div className=\"w-1 h-1 rounded-full bg-amber-500/40\" />\n                                  {stat}\n                                </li>\n                              ))}\n                            </ul>\n                          </div>\n                        )}\n                        {details.desc?.map((bullet, idx) => {\n                          const parts = bullet.split(\": \");\n                          const header = parts[0];\n                          const content = parts.slice(1).join(\": \");\n                          return (\n                            <li\n                              key={idx}\n                              className={`text-sm text-center sm:text-left`}\n                            >\n                              <div className=\"flex flex-col sm:flex-row sm:items-baseline sm:gap-2\">\n                                <span\n                                  className={`font-black uppercase tracking-tight text-xs ${colors.text} shrink-0`}\n                                >\n                                  {header\n                                    .replace(/\\*\\*/g, \"\")\n                                    .replace(\"New! \", \"âœ¨ \")}\n                                </span>\n                                <span\n                                  className={`${subtextColor} font-medium leading-relaxed`}\n                                >\n                                  {content}\n                                </span>\n                              </div>\n                            </li>\n                          );\n                        })}\n                      </ul>\n                    </div>\n\n                    {/* Move Preview (Right) */}\n                    <div className=\"shrink-0 flex flex-col gap-3 items-center sm:items-start\">\n                      <span\n                        className={`text-[10px] font-black uppercase tracking-widest ${subtextColor} flex items-center gap-2`}\n                      >\n                        <div className=\"w-2 h-2 rounded-full bg-emerald-500\" />\n                        Basic Move Set\n                      </span>\n                      <UnitMovePreview\n                        unitType={unit.type}\n                        selectedTerrain={selectedTerrain}\n                      />\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        {/* Battlefield Intelligence Section */}\n        <div className=\"mb-12\">\n          {renderSectionTitle(\n            \"The Battlefield - Terrain Intel\",\n            <ShieldPlus size={24} />,\n            true,\n          )}\n\n          {/* Key Terrain Rules Note */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n            <div\n              className={`p-6 rounded-3xl border-2 border-amber-500/30 ${cardBg} backdrop-blur-xl shadow-lg relative overflow-hidden group`}\n            >\n              <div className=\"absolute -right-8 -top-8 w-24 h-24 bg-amber-500/10 rounded-full blur-2xl group-hover:bg-amber-500/20 transition-all\" />\n              <h4\n                className={`text-lg font-black uppercase tracking-tight mb-3 flex items-center gap-2 ${darkMode ? \"text-amber-500\" : \"text-amber-600\"}`}\n              >\n                <DesertIcon className=\"w-6 h-6\" />\n                The Desert Rule\n              </h4>\n              <p\n                className={`text-sm leading-relaxed ${subtextColor} font-bold`}\n              >\n                Deserts are dead-ends.{\" \"}\n                <span className=\"text-slate-900 dark:text-white underline decoration-amber-500/50 underline-offset-4\">\n                  Deserts end movement immediately on entry\n                </span>\n                . Units trapped in the desert must exit on their very next turn\n                or they are lost to the sands.\n              </p>\n            </div>\n\n            <div\n              className={`p-6 rounded-3xl border-2 border-blue-500/30 ${cardBg} backdrop-blur-xl shadow-lg relative overflow-hidden group`}\n            >\n              <div className=\"absolute -right-8 -top-8 w-24 h-24 bg-blue-500/10 rounded-full blur-2xl group-hover:bg-blue-500/20 transition-all\" />\n              <h4\n                className={`text-lg font-black uppercase tracking-tight mb-3 flex items-center gap-2 ${darkMode ? \"text-blue-400\" : \"text-blue-600\"}`}\n              >\n                <Waves size={24} />\n                Strategic Sanctuary\n              </h4>\n              <p\n                className={`text-sm leading-relaxed ${subtextColor} font-bold`}\n              >\n                Use forests, swamps, and mountains to shield your units. When a\n                unit is in its{\" \"}\n                <span className=\"text-slate-900 dark:text-white underline decoration-blue-500/50 underline-offset-4\">\n                  Sanctuary Terrain\n                </span>\n                , it becomes invisible to specific enemy classes.\n              </p>\n            </div>\n          </div>\n\n          <TerrainIntelTool darkMode={darkMode} />\n        </div>\n\n        {/* Engagement Rules */}\n        <div\n          className={`mb-12 p-8 rounded-3xl border ${cardBg} ${borderColor} backdrop-blur-xl shadow-xl`}\n        >\n          {renderSectionTitle(\"Engagement Rules\", <Crosshair size={24} />)}\n          <div className=\"space-y-4\">\n            <div className=\"flex gap-4\">\n              <div\n                className={`flex items-center justify-center w-8 h-8 rounded-full border shrink-0 ${darkMode ? \"border-slate-700 bg-slate-800\" : \"border-slate-200 bg-white\"} font-bold`}\n              >\n                1\n              </div>\n              <div>\n                <h4 className={`font-bold ${textColor}`}>\n                  Turn Based Strategy\n                </h4>\n                <p className={`text-sm ${subtextColor}`}>\n                  Players take turns maneuvering their units across the board.\n                  Strategy is keyâ€”position your army to control the center and\n                  trap your opponent.\n                </p>\n              </div>\n            </div>\n            <div className=\"flex gap-4\">\n              <div\n                className={`flex items-center justify-center w-8 h-8 rounded-full border shrink-0 ${darkMode ? \"border-slate-700 bg-slate-800\" : \"border-slate-200 bg-white\"} font-bold`}\n              >\n                2\n              </div>\n              <div>\n                <h4 className={`font-bold ${textColor}`}>Capture & Combat</h4>\n                <p className={`text-sm ${subtextColor}`}>\n                  Capture enemy pieces by landing exactly on their tile. Each\n                  unit has a unique movement and attack profileâ€”master them to\n                  dominate the board.\n                </p>\n              </div>\n            </div>\n            <div className=\"flex gap-4\">\n              <div\n                className={`flex items-center justify-center w-8 h-8 rounded-full border shrink-0 ${darkMode ? \"border-slate-700 bg-slate-800\" : \"border-slate-200 bg-white\"} font-bold`}\n              >\n                3\n              </div>\n              <div>\n                <h4 className={`font-bold ${textColor}`}>Victory Conditions</h4>\n                <p className={`text-sm ${subtextColor}`}>\n                  The game is won by capturing the enemy King or by reaching the\n                  center flag tiles in Capture the World mode.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </RoutePageLayout>\n  );\n};\n\nexport default LearnManualView;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/math-main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/trench-detail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/learn/trench-main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/play/_lazy.routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/play/lobby.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":254,"column":50,"messageId":"unexpectedAny","endLine":254,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9556,9559],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9556,9559],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Globe, Key, GlobeLock } from \"lucide-react\";\nimport { useRouteContext } from \"@/app/context/RouteContext\";\nimport Shoutbox from \"@/app/routes/game/components/organisms/Shoutbox\";\n\n// Shared Route Components\nimport RoutePageLayout from \"@/app/routes/shared/components/templates/RoutePageLayout\";\nimport RoutePageHeader from \"@/app/routes/shared/components/organisms/RoutePageHeader\";\nimport RouteGrid from \"@/app/routes/shared/components/templates/RouteGrid\";\nimport RouteCard from \"@/app/routes/shared/components/molecules/RouteCard\";\n\nexport const PlayLobbyView: React.FC = () => {\n  const navigate = useNavigate();\n  const { multiplayer, darkMode } = useRouteContext();\n  const [view, setView] = useState<\"menu\" | \"join\" | \"host\" | \"global\">(\"menu\");\n  const [joinLobbyCode, setJoinLobbyCode] = useState(\"\");\n\n  // Auto-refresh rooms when entering global view\n  useEffect(() => {\n    if (view === \"global\" && multiplayer?.refreshRooms) {\n      multiplayer.refreshRooms();\n      const interval = setInterval(() => multiplayer.refreshRooms(), 5000);\n      return () => clearInterval(interval);\n    }\n  }, [view, multiplayer]);\n\n  // Handle hosting\n  const handleCreateLobby = () => {\n    if (multiplayer) {\n      multiplayer.hostGame();\n      setView(\"host\");\n    }\n  };\n\n  const headerLabel =\n    view === \"menu\"\n      ? \"Worldwide Mode\"\n      : view === \"global\"\n        ? \"Global Operations\"\n        : view === \"host\"\n          ? \"Lobby\"\n          : \"Join Operation\";\n\n  const backLabel = view !== \"menu\" ? \"Worldwide Mode\" : \"Play\";\n\n  const renderMenu = () => (\n    <RouteGrid cols={3}>\n      <RouteCard\n        onClick={handleCreateLobby}\n        onMouseEnter={() => {}}\n        onMouseLeave={() => {}}\n        isSelected={false}\n        darkMode={darkMode}\n        title=\"Host Lobby\"\n        description='\"Leaders shall host gatherings.\"'\n        Icon={GlobeLock}\n        color=\"red\"\n        className=\"h-full w-full\"\n      />\n      <RouteCard\n        onClick={() => setView(\"join\")}\n        onMouseEnter={() => {}}\n        onMouseLeave={() => {}}\n        isSelected={false}\n        darkMode={darkMode}\n        title=\"Join Code\"\n        description='\"Invitations shall come in code.\"'\n        Icon={Key}\n        color=\"blue\"\n        className=\"h-full w-full\"\n      />\n      <RouteCard\n        onClick={() => setView(\"global\")}\n        onMouseEnter={() => {}}\n        onMouseLeave={() => {}}\n        isSelected={false}\n        darkMode={darkMode}\n        title=\"Worldwide Webwork\"\n        description={`${multiplayer?.onlineCount || 0} players online`}\n        Icon={Globe}\n        color=\"emerald\"\n        className=\"h-full w-full\"\n      />\n    </RouteGrid>\n  );\n\n  const renderJoinParams = () => (\n    <div className=\"w-full max-w-md bg-white dark:bg-slate-900 border-4 border-slate-200 dark:border-slate-800 p-8 rounded-[2rem] shadow-2xl flex flex-col gap-6\">\n      <div className=\"text-center\">\n        <h3 className=\"text-2xl font-black text-slate-800 dark:text-slate-100 uppercase tracking-tighter\">\n          Enter Lobby Code\n        </h3>\n        <p className=\"text-slate-500 font-medium mt-1\">\n          Join an existing battlefield\n        </p>\n      </div>\n\n      <input\n        type=\"text\"\n        value={joinLobbyCode}\n        onChange={(e) => setJoinLobbyCode(e.target.value.toUpperCase())}\n        placeholder=\"CODE\"\n        className=\"w-full bg-slate-100 dark:bg-slate-800 border-2 border-transparent focus:border-brand-blue rounded-xl px-4 py-4 text-center font-black text-2xl tracking-[0.5em] outline-none transition-all uppercase placeholder:text-slate-300 dark:placeholder:text-slate-700\"\n        maxLength={6}\n      />\n\n      <button\n        onClick={() => {\n          if (joinLobbyCode) {\n            multiplayer?.joinGame(joinLobbyCode);\n            navigate(`/game/${joinLobbyCode}`);\n            setView(\"host\");\n          }\n        }}\n        disabled={!joinLobbyCode}\n        className={`w-full py-4 rounded-xl font-black text-white uppercase tracking-widest transition-all shadow-lg ${\n          joinLobbyCode\n            ? \"bg-brand-blue hover:bg-brand-blue/80 hover:scale-[1.02]\"\n            : \"bg-slate-300 dark:bg-slate-800 text-slate-400 cursor-not-allowed\"\n        }`}\n      >\n        Join Lobby\n      </button>\n    </div>\n  );\n\n  const renderHost = () => (\n    <div className=\"w-full max-w-md bg-white dark:bg-slate-900 border-4 border-brand-blue/30 p-8 rounded-[2rem] shadow-2xl flex flex-col gap-6\">\n      <div className=\"text-center\">\n        <h3 className=\"text-xl font-bold text-slate-500 uppercase tracking-widest mb-2\">\n          Lobby Code\n        </h3>\n        <div className=\"text-6xl font-black text-brand-blue dark:text-brand-blue tracking-widest selection:bg-brand-blue/20\">\n          {multiplayer?.roomId || \"....\"}\n        </div>\n      </div>\n\n      <div className=\"h-px bg-slate-200 dark:bg-slate-700 w-full\" />\n\n      <div>\n        <h4 className=\"font-bold text-slate-700 dark:text-slate-300 mb-4 flex items-center justify-between\">\n          <span>Players</span>\n          <span className=\"text-sm bg-brand-blue/10 dark:bg-brand-blue/20 text-brand-blue dark:text-brand-blue px-2 py-1 rounded-lg\">\n            {multiplayer?.players.length}/4\n          </span>\n        </h4>\n        <div className=\"space-y-2\">\n          {multiplayer?.players.map((p: string, i: number) => {\n            const isMe = p === multiplayer.socketId;\n            const pIdx = i; // Server should ideally provide this, but order is consistent\n            const isWhite = pIdx === 0;\n            const isBlack = pIdx === 1;\n\n            return (\n              <div\n                key={p}\n                className=\"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-xl\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <div\n                    className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shadow-sm ${\n                      isWhite\n                        ? \"bg-white text-slate-900 border border-slate-300\"\n                        : isBlack\n                          ? \"bg-slate-900 text-white\"\n                          : \"bg-slate-500 text-white\"\n                    }`}\n                  >\n                    {isWhite ? \"W\" : isBlack ? \"B\" : `P${i + 1}`}\n                  </div>\n                  <span\n                    className={`font-medium ${isMe ? \"text-brand-blue font-bold\" : \"text-slate-700 dark:text-slate-200\"}`}\n                  >\n                    {isMe ? \"You (Operator)\" : `Player ${p.slice(0, 4)}`}\n                  </span>\n                </div>\n                {multiplayer.readyPlayers[p] && (\n                  <span className=\"text-xs font-bold text-green-600 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded\">\n                    READY\n                  </span>\n                )}\n              </div>\n            );\n          })}\n          {multiplayer?.players.length === 0 && (\n            <div className=\"text-center text-slate-400 italic py-4\">\n              Waiting for players...\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"h-px bg-slate-200 dark:bg-slate-700 w-full\" />\n\n      {/* Shoutbox Integration */}\n      <Shoutbox multiplayer={multiplayer} darkMode={darkMode} />\n\n      <div className=\"flex gap-4\">\n        <button\n          onClick={() => multiplayer?.leaveGame()}\n          className=\"flex-1 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors\"\n        >\n          Leave\n        </button>\n        <button\n          className=\"flex-1 py-3 rounded-xl font-bold text-white bg-brand-blue hover:bg-brand-blue/80 transition-all shadow-lg\"\n          onClick={() => {\n            navigate(\"/play/setup?mode=multiplayer\");\n          }}\n        >\n          {multiplayer?.isHost ? \"Setup Game\" : \"Ready\"}\n        </button>\n      </div>\n    </div>\n  );\n\n  const renderGlobal = () => (\n    <div className=\"w-full max-w-4xl bg-white dark:bg-slate-900 border-4 border-slate-200 dark:border-slate-800 p-8 rounded-[2rem] shadow-2xl flex flex-col gap-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <h3 className=\"text-2xl font-black text-slate-800 dark:text-slate-100 uppercase tracking-tighter\">\n            Global Lobby\n          </h3>\n          <p className=\"text-slate-500 font-medium\">\n            {multiplayer?.availableRooms?.length || 0} Operations Active |{\" \"}\n            {multiplayer?.onlineCount || 0} Online\n          </p>\n        </div>\n        <button\n          onClick={() => multiplayer?.refreshRooms?.()}\n          className=\"p-2 text-slate-400 hover:text-brand-blue transition-colors\"\n          title=\"Refresh\"\n        >\n          <svg\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          >\n            <path d=\"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\" />\n            <path d=\"M3 3v5h5\" />\n            <path d=\"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16\" />\n            <path d=\"M16 21h5v-5\" />\n          </svg>\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar\">\n        {multiplayer?.availableRooms?.map((room: any) => {\n          const isPrivate = room.isPrivate;\n          return (\n            <div\n              key={room.id}\n              className={`border-2 rounded-xl p-4 transition-all bg-slate-50 dark:bg-slate-800/50 flex items-center justify-between group ${\n                isPrivate\n                  ? \"border-amber-200 dark:border-amber-900/30\"\n                  : \"border-slate-200 dark:border-slate-700 hover:border-brand-blue\"\n              }`}\n            >\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <span className=\"font-bold text-lg text-slate-700 dark:text-slate-200\">\n                    {isPrivate ? \"Private Operation\" : room.id}\n                  </span>\n                  {isPrivate && <Key size={14} className=\"text-amber-500\" />}\n                </div>\n                <div className=\"text-xs font-bold text-slate-400 uppercase tracking-widest\">\n                  {room.mode} â€¢ {room.status}\n                </div>\n              </div>\n\n              <div className=\"flex flex-col items-end gap-2\">\n                <span className=\"text-xs font-black bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-400 px-2 py-1 rounded\">\n                  {room.players}/{room.maxPlayers || 4}\n                </span>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    if (isPrivate) {\n                      setView(\"join\");\n                    } else {\n                      multiplayer.joinGame(room.id);\n                      setView(\"host\");\n                    }\n                  }}\n                  className={`px-4 py-2 rounded-lg font-black text-xs uppercase tracking-widest transition-all ${\n                    isPrivate\n                      ? \"bg-amber-500 hover:bg-amber-600 text-white shadow-lg shadow-amber-500/20\"\n                      : \"bg-brand-blue hover:bg-brand-blue/80 text-white shadow-lg shadow-brand-blue/20\"\n                  }`}\n                >\n                  {isPrivate ? \"Enter Code\" : \"Join\"}\n                </button>\n              </div>\n            </div>\n          );\n        })}\n        {(!multiplayer?.availableRooms ||\n          multiplayer.availableRooms.length === 0) && (\n          <div className=\"col-span-full py-12 text-center text-slate-400 italic\">\n            No active operations found.\n            <br />\n            <button\n              onClick={handleCreateLobby}\n              className=\"text-brand-blue hover:underline mt-2 font-bold not-italic\"\n            >\n              Start your own.\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  return (\n    <RoutePageLayout>\n      <RoutePageHeader\n        label={headerLabel}\n        backLabel={backLabel}\n        onBackClick={() => {\n          if (view !== \"menu\") {\n            if (view === \"host\") multiplayer?.leaveGame();\n            setView(\"menu\");\n          } else {\n            navigate(\"/play\");\n          }\n        }}\n      />\n\n      {view === \"menu\" && renderMenu()}\n      {view === \"join\" && renderJoinParams()}\n      {(view === \"host\" || multiplayer?.roomId) && renderHost()}\n      {view === \"global\" && renderGlobal()}\n    </RoutePageLayout>\n  );\n};\n\nexport default PlayLobbyView;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/play/local.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/play/play.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/play/setup.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/xopher/www/x/battle-chess/src/app/routes/play/setup.tsx:53:20\n  51 |   useEffect(() => {\n  52 |     const s = searchParams.get(\"step\");\n> 53 |     if (s === \"1\") setStep(1);\n     |                    ^^^^^^^ Avoid calling setState() directly within an effect\n  54 |     if (s === \"2\") setStep(2);\n  55 |   }, [searchParams]);\n  56 |","line":53,"column":20,"endLine":53,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":222,"column":17,"messageId":"unusedExpression","endLine":222,"endColumn":62}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \"react\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport {\n  Eye,\n  Pizza,\n  Shell,\n  Dices,\n  Globe,\n  Omega,\n  Pi,\n  LandPlot,\n  ShieldQuestion,\n} from \"lucide-react\";\nimport { useRouteContext } from \"@/app/context/RouteContext\";\nimport {\n  DualToneNS,\n  DualToneEW,\n  QuadTone,\n  AllianceTone,\n  DualToneSwords,\n  DualToneSwordsEw,\n} from \"@/app/routes/shared/components/atoms/RouteIcons\";\nimport type { GameMode } from \"@engineTypes/game\";\n\n// Shared Route Components\nimport RoutePageLayout from \"@/app/routes/shared/components/templates/RoutePageLayout\";\nimport RoutePageHeader from \"@/app/routes/shared/components/organisms/RoutePageHeader\";\nimport RouteGrid from \"@/app/routes/shared/components/templates/RouteGrid\";\nimport RouteCard from \"@/app/routes/shared/components/molecules/RouteCard\";\n\nexport const PlaySetupView: React.FC = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n\n  const {\n    darkMode,\n    onStartGame,\n    selectedPreset,\n    setSelectedPreset,\n    selectedBoard,\n    setSelectedBoard,\n    playerConfig,\n    previewConfig,\n    playerCount,\n    multiplayer,\n  } = useRouteContext();\n\n  const [step, setStep] = useState(1); // 1 = Board, 2 = Preset\n\n  // Initialize from URL param if present\n  useEffect(() => {\n    const s = searchParams.get(\"step\");\n    if (s === \"1\") setStep(1);\n    if (s === \"2\") setStep(2);\n  }, [searchParams]);\n\n  const handleBoardSelect = (mode: GameMode) => {\n    setSelectedBoard(mode);\n    setStep(2);\n  };\n\n  const handlePresetSelect = (\n    preset: \"classic\" | \"quick\" | \"terrainiffic\" | \"custom\" | \"zen-garden\",\n  ) => {\n    setSelectedPreset(preset);\n    if (selectedBoard) {\n      onStartGame(selectedBoard, preset, playerConfig);\n    }\n  };\n\n  const isMultiplayerMode = (playerCount ?? 2) >= 3;\n  const isOnline = !!multiplayer?.roomId;\n  const isHost = multiplayer?.isHost || !isOnline;\n\n  const headerLabel =\n    isOnline && !isHost\n      ? '\"Observing the Host\\'s Will\"'\n      : step === 1\n        ? '\"A dance is chosen\"'\n        : '\"And the Stage is flung\"';\n\n  const backLabel =\n    step === 2 ? \"Choose Board\" : isOnline ? \"Lobby\" : \"Local Gathering\";\n\n  return (\n    <RoutePageLayout>\n      <RoutePageHeader\n        label={headerLabel}\n        color={isOnline && !isHost ? \"blue\" : \"amber\"}\n        backLabel={backLabel}\n        onBackClick={() => {\n          if (isOnline && !isHost) return;\n          if (step === 2) {\n            setStep(1);\n          } else {\n            navigate(isOnline ? \"/play/lobby\" : \"/play/local\");\n          }\n        }}\n        className={isOnline && !isHost ? \"opacity-30 pointer-events-none\" : \"\"}\n      />\n\n      <RouteGrid cols={step === 2 ? 4 : 2}>\n        {step === 1 ? (\n          <>\n            {!isMultiplayerMode ? (\n              <>\n                <RouteCard\n                  onClick={() => isHost && handleBoardSelect(\"2p-ns\")}\n                  isSelected={selectedBoard === \"2p-ns\"}\n                  preview={{\n                    mode: \"2p-ns\",\n                    hideUnits: true,\n                  }}\n                  darkMode={darkMode}\n                  title=\"North vs South\"\n                  titleNode={\n                    <>\n                      <span className=\"text-brand-red\">North</span> vs{\" \"}\n                      <span className=\"text-brand-blue\">South</span>\n                    </>\n                  }\n                  description='\"Roses are Red, Violets are Blue...\"'\n                  Icon={DualToneNS}\n                  HoverIcon={DualToneSwords}\n                  color=\"red\"\n                  className={`custom-border-[conic-gradient(from_315deg,_#ef4444_0deg_90deg,_#ffffff_90deg_180deg,_#3b82f6_180deg_270deg,_#ffffff_270deg_360deg)] w-full`}\n                />\n                <RouteCard\n                  onClick={() => isHost && handleBoardSelect(\"2p-ew\")}\n                  isSelected={selectedBoard === \"2p-ew\"}\n                  preview={{\n                    mode: \"2p-ew\",\n                    hideUnits: true,\n                  }}\n                  darkMode={darkMode}\n                  title=\"West vs East\"\n                  titleNode={\n                    <>\n                      <span className=\"text-green-500\">West</span> vs{\" \"}\n                      <span className=\"text-yellow-500\">East</span>\n                    </>\n                  }\n                  description='\"Zinnias come in Green, and Tulips dress Yellow too...\"'\n                  Icon={DualToneEW}\n                  HoverIcon={DualToneSwordsEw}\n                  color=\"emerald\"\n                  className={`custom-border-[conic-gradient(from_315deg,_#ffffff_0deg_90deg,_#22c55e_90deg_180deg,_#ffffff_180deg_270deg,_#eab308_270deg_360deg)] w-full`}\n                />\n              </>\n            ) : (\n              <>\n                <RouteCard\n                  onClick={() => isHost && handleBoardSelect(\"4p\")}\n                  isSelected={selectedBoard === \"4p\"}\n                  preview={{\n                    mode: \"4p\",\n                    hideUnits: true,\n                  }}\n                  darkMode={darkMode}\n                  title=\"Capture the Army\"\n                  description=\"4 Player â€¢ Quadrant Combat\"\n                  Icon={QuadTone}\n                  color=\"emerald\"\n                  className={`custom-border-[conic-gradient(from_315deg,_#ef4444_0deg_90deg,_#eab308_90deg_180deg,_#3b82f6_180deg_270deg,_#22c55e_270deg_360deg)] w-full`}\n                />\n                <RouteCard\n                  onClick={() => isHost && handleBoardSelect(\"2v2\")}\n                  isSelected={selectedBoard === \"2v2\"}\n                  preview={{\n                    mode: \"2v2\",\n                    hideUnits: true,\n                  }}\n                  darkMode={darkMode}\n                  title=\"Capture the World\"\n                  description=\"4 Player â€¢ 2 vs 2 Co-Op\"\n                  Icon={AllianceTone}\n                  color=\"slate\"\n                  className={`custom-border-[conic-gradient(from_315deg,_#ef4444_0deg_90deg,_#eab308_90deg_180deg,_#3b82f6_180deg_270deg,_#22c55e_270deg_360deg)] w-full`}\n                />\n              </>\n            )}\n          </>\n        ) : (\n          <>\n            <RouteCard\n              onClick={() => isHost && handlePresetSelect(\"custom\")}\n              isSelected={selectedPreset === \"custom\"}\n              preview={{\n                mode: selectedBoard,\n                protocol: \"custom\",\n                hideUnits: true,\n              }}\n              darkMode={darkMode}\n              title=\"Î© Omega\"\n              description='\"Setup the board Gamemaster.\"'\n              Icon={Eye}\n              color=\"red\"\n              badge=\"Custom\"\n              HoverIcon={Omega}\n              className=\"w-full\"\n            />\n            <RouteCard\n              onClick={() => isHost && handlePresetSelect(\"classic\")}\n              isSelected={selectedPreset === \"classic\"}\n              preview={{\n                mode: selectedBoard,\n                protocol: \"classic\",\n                hideUnits: false,\n                useDefaultFormation: true,\n              }}\n              darkMode={darkMode}\n              title=\"Ï€ Pi\"\n              description='\"Grab a hot slice of Classic.\"'\n              Icon={Pizza}\n              color=\"amber\"\n              badge=\"EZ as Pi\"\n              HoverIcon={Pi}\n              className=\"w-full\"\n            />\n            <RouteCard\n              onClick={() => {\n                isHost && handlePresetSelect(\"terrainiffic\");\n              }}\n              isSelected={selectedPreset === \"terrainiffic\"}\n              preview={{\n                mode: selectedBoard,\n                protocol: \"terrainiffic\",\n                showIcons: true,\n                hideUnits: true,\n              }}\n              darkMode={darkMode}\n              title=\"Ï‡ Chi\"\n              description='\"Walk the community garden.\"'\n              Icon={Shell}\n              color=\"emerald\"\n              badge=\"Feng Shui\"\n              HoverIcon={LandPlot}\n              className=\"w-full\"\n            />\n            <RouteCard\n              onClick={() => isHost && handlePresetSelect(\"quick\")}\n              isSelected={selectedPreset === \"quick\"}\n              preview={{\n                mode: selectedBoard,\n                protocol: \"quick\",\n                hideUnits: true,\n              }}\n              darkMode={darkMode}\n              title=\"Î± Alpha\"\n              description='\"Roll the dice of Entropy.\"'\n              Icon={Dices}\n              color=\"blue\"\n              badge=\"Random Chaos\"\n              HoverIcon={ShieldQuestion}\n              className=\"w-full\"\n            />\n          </>\n        )}\n      </RouteGrid>\n\n      {/* Disclaimer for 2v2 */}\n      {previewConfig.mode === \"2v2\" && (\n        <div className=\"w-full animate-in fade-in slide-in-from-top-4 duration-500 mt-8\">\n          <div className=\"relative p-6 rounded-[2.5rem] bg-slate-900/40 backdrop-blur-md border border-white/5 shadow-2xl overflow-hidden\">\n            <div className=\"absolute top-0 left-0 w-12 h-12 border-t-2 border-l-2 border-amber-500/30 rounded-tl-[2.5rem]\" />\n            <div className=\"absolute bottom-0 right-0 w-12 h-12 border-b-2 border-r-2 border-orange-500/30 rounded-br-[2.5rem]\" />\n            <div className=\"relative z-10 flex flex-col md:flex-row items-center gap-8 px-2\">\n              <div className=\"p-5 rounded-[1.5rem] bg-gradient-to-br from-red-600 to-red-900 shadow-2xl shadow-red-950/50 -rotate-6 shrink-0 border border-white/10\">\n                <Globe\n                  className=\"text-white fill-white/10\"\n                  size={42}\n                  strokeWidth={3}\n                />\n              </div>\n              <div className=\"flex-1 flex flex-col lg:flex-row lg:items-center gap-8\">\n                <div className=\"shrink-0 flex flex-col items-center lg:items-start text-center lg:text-left\">\n                  <h4 className=\"text-3xl font-black text-white uppercase tracking-tighter leading-[0.9]\">\n                    Capture\n                    <br />\n                    The <span className=\"relative\">World</span>\n                  </h4>\n                </div>\n                <div className=\"w-full lg:w-px h-px lg:h-12 bg-white/10\" />\n                <div className=\"flex flex-wrap justify-center lg:justify-start gap-6\">\n                  <div className=\"flex flex-col items-center lg:items-start\">\n                    <span className=\"text-[10px] font-bold text-brand-red uppercase tracking-[0.2em] mb-1\">\n                      Objective\n                    </span>\n                    <span className=\"text-sm font-medium text-slate-300\">\n                      Capture The World\n                    </span>\n                  </div>\n                  <div className=\"flex flex-col items-center lg:items-start\">\n                    <span className=\"text-[10px] font-bold text-brand-red uppercase tracking-[0.2em] mb-1\">\n                      Victory\n                    </span>\n                    <span className=\"text-sm font-medium text-slate-300\">\n                      Land in the the Center or Corners of the board\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </RoutePageLayout>\n  );\n};\n\nexport default PlaySetupView;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/rules/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/rules/lazy.routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/scoreboard/index.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`getModeLabel` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/home/xopher/www/x/battle-chess/src/app/routes/scoreboard/index.tsx:84:16\n  82 |         protocol: \"custom\",\n  83 |         showIcons: true,\n> 84 |         label: getModeLabel(hoveredMatch.mode),\n     |                ^^^^^^^^^^^^ `getModeLabel` accessed before it is declared\n  85 |       });\n  86 |       if (hoveredMatch.seed) {\n  87 |         setTerrainSeed(Number(hoveredMatch.seed));\n\n/home/xopher/www/x/battle-chess/src/app/routes/scoreboard/index.tsx:98:3\n   96 |   };\n   97 |\n>  98 |   const getModeLabel = (mode: string) => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  99 |     switch (mode) {\n      | ^^^^^^^^^^^^^^^^^^^\n> 100 |       case \"2p-ns\":\n      â€¦\n      | ^^^^^^^^^^^^^^^^^^^\n> 110 |     }\n      | ^^^^^^^^^^^^^^^^^^^\n> 111 |   };\n      | ^^^^^ `getModeLabel` is declared here\n  112 |\n  113 |   const sidebar = useMemo(\n  114 |     () => (","line":84,"column":16,"endLine":84,"endColumn":28},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has unnecessary dependencies: 'darkMode' and 'pieceStyle'. Either exclude them or remove the dependency array.","line":153,"column":5,"endLine":153,"endColumn":41,"suggestions":[{"desc":"Update the dependencies array to be: [hoveredMatch]","fix":{"range":[4950,4986],"text":"[hoveredMatch]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState, useMemo } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { io } from \"socket.io-client\";\nimport {\n  Trophy,\n  Clock,\n  Hash,\n  Users,\n  Activity,\n  Swords,\n  Bot,\n  User,\n  ChevronRight,\n} from \"lucide-react\";\nimport ScoreboardLayout from \"@/app/routes/game/components/templates/ScoreboardLayout\";\nimport { RouteBoardPreview } from \"@/app/routes/shared/components/organisms/RouteBoardPreview\";\nimport type { GameMode } from \"@engineTypes/game\";\nimport type { PieceStyle } from \"@constants/unit.constants\";\nimport RoutePageHeader from \"@/app/routes/shared/components/organisms/RoutePageHeader\";\nimport { useRouteContext } from \"@/app/context/RouteContext\";\n\nconst getServerUrl = () => {\n  if (typeof window === \"undefined\") return \"http://localhost:3001\";\n  return window.location.protocol + \"//\" + window.location.hostname + \":3001\";\n};\n\ninterface Match {\n  id: string;\n  players: number;\n  mode: string;\n  turn?: string;\n  winner?: string;\n  date?: string;\n  playerTypes?: Record<string, \"human\" | \"computer\">;\n  seed?: string;\n}\n\ninterface ScoreboardData {\n  active: Match[];\n  history: Match[];\n}\n\ninterface ScoreboardProps {\n  darkMode: boolean;\n  pieceStyle: PieceStyle;\n}\n\nexport const ScoreboardView = ({ darkMode, pieceStyle }: ScoreboardProps) => {\n  const { setPreviewConfig, setTerrainSeed } = useRouteContext();\n  const [data, setData] = useState<ScoreboardData>({ active: [], history: [] });\n  const [loading, setLoading] = useState(true);\n  const [hoveredMatch, setHoveredMatch] = useState<Match | null>(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const newSocket = io(getServerUrl());\n\n    newSocket.on(\"connect\", () => {\n      newSocket.emit(\"request_scoreboard\");\n    });\n\n    newSocket.on(\"scoreboard_data\", (receivedData: ScoreboardData) => {\n      setData(receivedData);\n      setLoading(false);\n      // Default hover to first active if available, else first history\n      if (receivedData.active.length > 0)\n        setHoveredMatch(receivedData.active[0]);\n      else if (receivedData.history.length > 0)\n        setHoveredMatch(receivedData.history[receivedData.history.length - 1]);\n    });\n\n    return () => {\n      newSocket.disconnect();\n    };\n  }, []);\n\n  // Sync preview with hovered match\n  useEffect(() => {\n    if (hoveredMatch) {\n      setPreviewConfig({\n        mode: (hoveredMatch.mode as GameMode) || \"2p-ns\",\n        protocol: \"custom\",\n        showIcons: true,\n        label: getModeLabel(hoveredMatch.mode),\n      });\n      if (hoveredMatch.seed) {\n        setTerrainSeed(Number(hoveredMatch.seed));\n      }\n    } else {\n      setPreviewConfig({ mode: null, label: \"Ready for Deployment\" });\n    }\n  }, [hoveredMatch, setPreviewConfig, setTerrainSeed]);\n\n  const handleSpectate = (roomId: string) => {\n    navigate(`/play/lobby?join=${roomId}`);\n  };\n\n  const getModeLabel = (mode: string) => {\n    switch (mode) {\n      case \"2p-ns\":\n        return \"North vs South\";\n      case \"2p-ew\":\n        return \"East vs West\";\n      case \"2v2\":\n        return \"Alliance Mode\";\n      case \"4p\":\n        return \"Showdown\";\n      default:\n        return mode;\n    }\n  };\n\n  const sidebar = useMemo(\n    () => (\n      <div className=\"w-full flex flex-col gap-8 animate-in fade-in slide-in-from-right-8 duration-500\">\n        <RouteBoardPreview />\n\n        {hoveredMatch && (\n          <div className=\"flex flex-col gap-2 p-6 bg-white/5 dark:bg-black/20 rounded-3xl border border-white/5 backdrop-blur-sm\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-[10px] font-black uppercase tracking-widest text-slate-500\">\n                Match Signature\n              </span>\n              <span className=\"text-[10px] font-mono text-brand-red uppercase\">\n                {hoveredMatch.id.substring(0, 8)}\n              </span>\n            </div>\n            <div className=\"h-px bg-white/5 my-2\" />\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"flex flex-col\">\n                <span className=\"text-[10px] uppercase tracking-widest text-slate-500 font-bold mb-1\">\n                  State\n                </span>\n                <span\n                  className={`text-xs font-black uppercase tracking-widest ${hoveredMatch.winner ? \"text-emerald-500\" : \"text-brand-blue\"}`}\n                >\n                  {hoveredMatch.winner ? \"Archive\" : \"In Progress\"}\n                </span>\n              </div>\n              <div className=\"flex flex-col\">\n                <span className=\"text-[10px] uppercase tracking-widest text-slate-500 font-bold mb-1\">\n                  Players\n                </span>\n                <span className=\"text-xs font-black uppercase tracking-widest text-slate-300\">\n                  {hoveredMatch.players}/4 Units\n                </span>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    ),\n    [hoveredMatch, darkMode, pieceStyle],\n  );\n\n  return (\n    <ScoreboardLayout darkMode={darkMode} sidebar={sidebar}>\n      <RoutePageHeader\n        label=\"Global Scoreboard\"\n        onBackClick={() => navigate(\"/\")}\n      />\n\n      <section className=\"flex flex-col gap-8 mt-4\">\n        {/* Active Matches Section */}\n        <div className=\"flex flex-col gap-6\">\n          <div className=\"flex items-center justify-between border-b-2 border-slate-200 dark:border-white/5 pb-4\">\n            <h2 className=\"text-xl font-black text-brand-blue uppercase tracking-[0.2em] flex items-center gap-3\">\n              <Activity className=\"w-6 h-6 animate-pulse\" /> Active Deployments\n            </h2>\n            <span className=\"bg-brand-blue/10 text-brand-blue text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest\">\n              {data.active.length} Live\n            </span>\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-4\">\n            {loading && (\n              <p className=\"text-slate-500 text-sm font-bold animate-pulse\">\n                Scanning frequencies...\n              </p>\n            )}\n            {!loading && data.active.length === 0 && (\n              <div className=\"bg-white/50 dark:bg-slate-900/50 rounded-3xl p-12 border-2 border-dashed border-slate-200 dark:border-white/5 text-center text-slate-400 font-bold tracking-widest text-sm uppercase\">\n                All Fronts Quiet.\n              </div>\n            )}\n            {data.active.map((match) => (\n              <div\n                key={match.id}\n                onMouseEnter={() => setHoveredMatch(match)}\n                className=\"group relative bg-white dark:bg-slate-900/80 p-6 rounded-[2rem] border-2 border-slate-200 dark:border-white/5 hover:border-brand-blue/50 transition-all hover:-translate-y-1 cursor-pointer overflow-hidden\"\n                onClick={() => handleSpectate(match.id)}\n              >\n                <div className=\"absolute right-0 top-0 h-full w-24 bg-gradient-to-l from-brand-blue/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\" />\n\n                <div className=\"flex items-center justify-between gap-8 relative z-10\">\n                  <div className=\"flex items-center gap-6\">\n                    <div className=\"w-14 h-14 bg-brand-blue/10 rounded-2xl flex items-center justify-center text-brand-blue\">\n                      <Swords size={28} />\n                    </div>\n                    <div className=\"flex flex-col gap-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-lg font-black uppercase tracking-widest text-slate-800 dark:text-white\">\n                          Zone {match.id.substring(0, 4)}\n                        </span>\n                        <span className=\"text-[10px] font-black bg-brand-blue text-white px-2 py-0.5 rounded uppercase tracking-tighter\">\n                          Live\n                        </span>\n                      </div>\n                      <div className=\"flex items-center gap-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest\">\n                        <span className=\"flex items-center gap-1\">\n                          <Hash size={12} /> {getModeLabel(match.mode)}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <Users size={12} /> {match.players}/4 Units\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center gap-6\">\n                    <div className=\"hidden md:flex items-center gap-2\">\n                      <Bot size={16} className=\"text-slate-400\" />\n                      <div className=\"flex gap-1\">\n                        {[1, 2, 3, 4].map((p) => (\n                          <div\n                            key={p}\n                            className={`w-1.5 h-6 rounded-full ${p <= match.players ? \"bg-brand-blue\" : \"bg-slate-200 dark:bg-slate-800 opacity-30\"}`}\n                          />\n                        ))}\n                      </div>\n                      <User size={16} className=\"text-slate-400\" />\n                    </div>\n                    <ChevronRight\n                      size={24}\n                      className=\"text-slate-300 group-hover:text-brand-blue group-hover:translate-x-1 transition-all\"\n                    />\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* History Section */}\n        <div className=\"flex flex-col gap-6\">\n          <div className=\"flex items-center justify-between border-b-2 border-slate-200 dark:border-white/5 pb-4\">\n            <h2 className=\"text-xl font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-3\">\n              <Clock className=\"w-6 h-6\" /> Declassified Intel\n            </h2>\n            <span className=\"bg-slate-100 dark:bg-white/5 text-slate-500 text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest\">\n              {data.history.length} Archived\n            </span>\n          </div>\n\n          <div className=\"flex flex-col gap-3\">\n            {[...data.history].reverse().map((match, i) => (\n              <div\n                key={i}\n                onMouseEnter={() => setHoveredMatch(match)}\n                className=\"group bg-white/40 dark:bg-slate-900/40 p-4 rounded-2xl border border-slate-200 dark:border-white/5 hover:border-slate-400 dark:hover:border-slate-700 transition-all flex items-center justify-between gap-6 cursor-crosshair\"\n              >\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-10 h-10 rounded-xl bg-slate-100 dark:bg-white/5 flex items-center justify-center text-slate-400\">\n                    <Trophy\n                      size={18}\n                      className={\n                        match.winner === \"red\"\n                          ? \"text-brand-red\"\n                          : match.winner === \"blue\"\n                            ? \"text-brand-blue\"\n                            : \"\"\n                      }\n                    />\n                  </div>\n                  <div className=\"flex flex-col\">\n                    <span className=\"text-xs font-black text-slate-700 dark:text-slate-300 uppercase tracking-widest\">\n                      Victory: {match.winner || \"Draw\"}\n                    </span>\n                    <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-tighter\">\n                      {new Date(match.date || \"\").toLocaleString(undefined, {\n                        month: \"short\",\n                        day: \"numeric\",\n                        hour: \"2-digit\",\n                        minute: \"2-digit\",\n                      })}{\" \"}\n                      â€¢ {getModeLabel(match.mode)}\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center gap-4 opacity-40 group-hover:opacity-100 transition-opacity\">\n                  <div className=\"text-[10px] font-mono text-slate-500 uppercase\">\n                    Archive_{match.id.substring(0, 4)}\n                  </div>\n                  <div className=\"w-1.5 h-1.5 rounded-full bg-slate-300 dark:bg-slate-700\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n    </ScoreboardLayout>\n  );\n};\n\nexport default ScoreboardView;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/scoreboard/lazy.routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/atoms/GuideBullet.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":12,"column":14,"messageId":"namedExport","endLine":12,"endColumn":29},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":25,"column":14,"messageId":"namedExport","endLine":25,"endColumn":31}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\n\nexport type GuideColor =\n  | \"emerald\"\n  | \"amber\"\n  | \"red\"\n  | \"blue\"\n  | \"indigo\"\n  | \"violet\"\n  | \"slate\";\n\nexport const getGuideBgColor = (color: GuideColor) => {\n  const map: Record<GuideColor, string> = {\n    emerald: \"bg-emerald-500\",\n    amber: \"bg-amber-500\",\n    red: \"bg-brand-red\",\n    blue: \"bg-brand-blue\",\n    indigo: \"bg-indigo-500\",\n    violet: \"bg-violet-500\",\n    slate: \"bg-slate-500\",\n  };\n  return map[color] || map.slate;\n};\n\nexport const getGuideTextColor = (color: GuideColor) => {\n  const map: Record<GuideColor, string> = {\n    emerald: \"text-emerald-500\",\n    amber: \"text-amber-500\",\n    red: \"text-brand-red\",\n    blue: \"text-brand-blue\",\n    indigo: \"text-indigo-500\",\n    violet: \"text-violet-500\",\n    slate: \"text-slate-500\",\n  };\n  return map[color] || map.slate;\n};\n\ninterface GuideBulletProps {\n  color?: GuideColor;\n  className?: string;\n  size?: \"sm\" | \"md\";\n}\n\nexport const GuideBullet: React.FC<GuideBulletProps> = ({\n  color = \"slate\",\n  className = \"\",\n  size = \"md\",\n}) => {\n  const bg = getGuideBgColor(color);\n  const sizeClass = size === \"sm\" ? \"w-1.5 h-1.5 mt-2\" : \"w-2 h-2 mt-2.5\";\n  return (\n    <div\n      className={`${sizeClass} rounded-full ${bg}/60 shrink-0 ${className}`}\n    />\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/atoms/MathOperator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/atoms/RouteIcons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/atoms/TerrainIconBadge.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":17,"messageId":"unexpectedAny","endLine":44,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1466,1469],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1466,1469],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport type { TerrainType } from \"@engineTypes/game\";\nimport { TERRAIN_DETAILS } from \"@engineConfigs/terrainDetails\";\nimport { Mountain, Trees, Waves } from \"lucide-react\";\nimport { DesertIcon } from \"@/app/routes/game/components/atoms/UnitIcons\";\nimport { TERRAIN_TYPES } from \"@engineConfigs/terrainDetails\";\nimport { Box } from \"@atoms\";\n\ninterface TerrainIconBadgeProps {\n  terrainKey: TerrainType;\n  className?: string;\n  onClick?: () => void;\n  active?: boolean;\n}\n\nexport const TerrainIconBadge: React.FC<TerrainIconBadgeProps> = ({\n  terrainKey,\n  className = \"\",\n  onClick,\n  active = false,\n}) => {\n  const terrainInfo = TERRAIN_DETAILS.find((t) => t.key === terrainKey);\n\n  if (terrainInfo) {\n    const Icon = terrainInfo.icon;\n    let badgeType = \"terrain-badge-blue\";\n    if (terrainKey === TERRAIN_TYPES.RUBBLE) badgeType = \"terrain-badge-red\";\n    if (terrainKey === TERRAIN_TYPES.TREES) badgeType = \"terrain-badge-green\";\n    if (terrainKey === TERRAIN_TYPES.DESERT) badgeType = \"terrain-badge-amber\";\n\n    return (\n      <Box\n        as=\"button\"\n        className={`terrain-badge clickable-unit ${badgeType} ${active ? \"ring-4 ring-white shadow-2xl scale-110 z-10\" : \"opacity-60 hover:opacity-100\"} ${className}`}\n        onClick={onClick}\n      >\n        <Icon size={28} className=\"fill-current\" />\n      </Box>\n    );\n  }\n\n  // Fallback if not in TERRAIN_DETAILS\n  let badgeType = \"terrain-badge-blue\";\n  let IconComp: any = Waves;\n\n  if (terrainKey === TERRAIN_TYPES.RUBBLE) {\n    badgeType = \"terrain-badge-red\";\n    IconComp = Mountain;\n  } else if (terrainKey === TERRAIN_TYPES.TREES) {\n    badgeType = \"terrain-badge-green\";\n    IconComp = Trees;\n  } else if (terrainKey === TERRAIN_TYPES.DESERT) {\n    badgeType = \"terrain-badge-amber\";\n    IconComp = DesertIcon;\n  }\n\n  return (\n    <Box\n      as=\"button\"\n      className={`terrain-badge clickable-unit ${badgeType} ${active ? \"ring-4 ring-white shadow-2xl scale-110 z-10\" : \"opacity-60 hover:opacity-100\"} ${className}`}\n      onClick={onClick}\n    >\n      <IconComp size={28} className=\"fill-current\" />\n    </Box>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/molecules/CtaGraphics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/molecules/CtwGraphics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/molecules/GuideListItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/molecules/RouteCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":13,"messageId":"unexpectedAny","endLine":32,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[852,855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[852,855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { type LucideIcon } from \"lucide-react\";\nimport { useRouteContext } from \"@/app/context/RouteContext\";\n\ntype ColorVariant =\n  | \"red\"\n  | \"orange\"\n  | \"yellow\"\n  | \"emerald\"\n  | \"blue\"\n  | \"amber\"\n  | \"fuchsia\"\n  | \"slate\";\n\ninterface MenuCardProps {\n  onClick: () => void;\n  title: string;\n  description: string;\n  Icon: LucideIcon | React.ComponentType<{ size?: number; className?: string }>;\n  color: ColorVariant;\n  badge?: string;\n  hoverText?: string;\n  HoverIcon?:\n    | LucideIcon\n    | React.ComponentType<{ size?: number; className?: string }>;\n  className?: string;\n  darkMode?: boolean;\n  onMouseEnter?: () => void;\n  onMouseLeave?: () => void;\n  /** Optional: override the title rendering with custom JSX */\n  titleNode?: React.ReactNode;\n  /** Optional: configuration for the board preview when this card is hovered */\n  preview?: any;\n  /** Visual variant of the card. Default is 'tinted' */\n  variant?: \"tinted\" | \"solid\" | \"transparent\";\n}\n\nconst COLOR_STYLES: Record<\n  ColorVariant,\n  {\n    border: string;\n    shadow: string;\n    gradient: string;\n    iconColor: string;\n    tintedBg: string;\n    solidBg: string;\n  }\n> = {\n  red: {\n    border: \"border-brand-red/20 hover:border-brand-red/50\",\n    shadow: \"hover:shadow-brand-red/20\",\n    gradient:\n      \"from-brand-red/0 to-brand-red/0 group-hover:from-brand-red/10 group-hover:to-brand-red/20\",\n    iconColor: \"text-brand-red\",\n    tintedBg:\n      \"bg-brand-red/5 hover:bg-brand-red/10 dark:bg-brand-red/[0.08] dark:hover:bg-brand-red/[0.15]\",\n    solidBg:\n      \"bg-brand-red/10 hover:bg-brand-red/20 dark:bg-brand-red/50 dark:hover:bg-brand-red/80\",\n  },\n  orange: {\n    border: \"border-orange-500/20 hover:border-orange-500/50\",\n    shadow: \"hover:shadow-orange-500/20\",\n    gradient:\n      \"from-orange-500/0 to-orange-500/0 group-hover:from-orange-500/10 group-hover:to-orange-500/20\",\n    iconColor: \"text-orange-500\",\n    tintedBg:\n      \"bg-orange-50/50 hover:bg-orange-100/50 dark:bg-orange-500/[0.08] dark:hover:bg-orange-500/[0.15]\",\n    solidBg:\n      \"bg-orange-100 hover:bg-orange-200 dark:bg-orange-900/50 dark:hover:bg-orange-900/80\",\n  },\n  yellow: {\n    border: \"border-yellow-500/20 hover:border-yellow-500/50\",\n    shadow: \"hover:shadow-yellow-500/20\",\n    gradient:\n      \"from-yellow-500/0 to-yellow-500/0 group-hover:from-yellow-500/10 group-hover:to-yellow-500/20\",\n    iconColor: \"text-yellow-500\",\n    tintedBg:\n      \"bg-yellow-50/50 hover:bg-yellow-100/50 dark:bg-yellow-500/[0.08] dark:hover:bg-yellow-500/[0.15]\",\n    solidBg:\n      \"bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900/80\",\n  },\n  emerald: {\n    border: \"border-emerald-500/20 hover:border-emerald-500/50\",\n    shadow: \"hover:shadow-emerald-500/20\",\n    gradient:\n      \"from-emerald-500/0 to-emerald-500/0 group-hover:from-emerald-500/10 group-hover:to-emerald-500/20\",\n    iconColor: \"text-emerald-500\",\n    tintedBg:\n      \"bg-emerald-50/50 hover:bg-emerald-100/50 dark:bg-emerald-500/[0.08] dark:hover:bg-emerald-500/[0.15]\",\n    solidBg:\n      \"bg-emerald-100 hover:bg-emerald-200 dark:bg-emerald-900/50 dark:hover:bg-emerald-900/80\",\n  },\n  blue: {\n    border: \"border-brand-blue/20 hover:border-brand-blue/50\",\n    shadow: \"hover:shadow-brand-blue/20\",\n    gradient:\n      \"from-brand-blue/0 to-brand-blue/0 group-hover:from-brand-blue/10 group-hover:to-brand-blue/20\",\n    iconColor: \"text-brand-blue\",\n    tintedBg:\n      \"bg-brand-blue/5 hover:bg-brand-blue/10 dark:bg-brand-blue/[0.08] dark:hover:bg-brand-blue/[0.15]\",\n    solidBg:\n      \"bg-brand-blue/10 hover:bg-brand-blue/20 dark:bg-brand-blue/50 dark:hover:bg-brand-blue/80\",\n  },\n  amber: {\n    border: \"border-amber-500/20 hover:border-amber-500/50\",\n    shadow: \"hover:shadow-amber-500/20\",\n    gradient:\n      \"from-amber-500/0 to-amber-500/0 group-hover:from-amber-500/10 group-hover:to-amber-500/20\",\n    iconColor: \"text-amber-500\",\n    tintedBg:\n      \"bg-amber-50/50 hover:bg-amber-100/50 dark:bg-amber-500/[0.08] dark:hover:bg-amber-500/[0.15]\",\n    solidBg:\n      \"bg-amber-100 hover:bg-amber-200 dark:bg-amber-900/50 dark:hover:bg-amber-900/80\",\n  },\n  fuchsia: {\n    border: \"border-fuchsia-500/20 hover:border-fuchsia-500/50\",\n    shadow: \"hover:shadow-fuchsia-500/20\",\n    gradient:\n      \"from-fuchsia-500/0 to-fuchsia-500/0 group-hover:from-fuchsia-500/10 group-hover:to-fuchsia-500/20\",\n    iconColor: \"text-fuchsia-500\",\n    tintedBg:\n      \"bg-fuchsia-50/50 hover:bg-fuchsia-100/50 dark:bg-fuchsia-500/[0.08] dark:hover:bg-fuchsia-500/[0.15]\",\n    solidBg:\n      \"bg-fuchsia-100 hover:bg-fuchsia-200 dark:bg-fuchsia-900/50 dark:hover:bg-fuchsia-900/80\",\n  },\n  slate: {\n    border: \"border-slate-500/20 hover:border-slate-500/50\",\n    shadow: \"hover:shadow-slate-500/20\",\n    gradient:\n      \"from-slate-500/0 to-slate-500/0 group-hover:from-slate-500/10 group-hover:to-slate-500/20\",\n    iconColor: \"text-slate-500\",\n    tintedBg:\n      \"bg-slate-50/50 hover:bg-slate-100/50 dark:bg-slate-500/[0.08] dark:hover:bg-slate-500/[0.15]\",\n    solidBg:\n      \"bg-slate-100 hover:bg-slate-200 dark:bg-slate-900/50 dark:hover:bg-slate-900/80\",\n  },\n};\n\nconst RouteCard: React.FC<\n  MenuCardProps & { isSelected?: boolean; disabled?: boolean }\n> = ({\n  title,\n  description,\n  Icon,\n  color = \"red\",\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  preview,\n  isSelected = false,\n  darkMode = false,\n  className = \"\",\n  disabled = false,\n  badge,\n  hoverText,\n  HoverIcon,\n  titleNode,\n  variant = \"tinted\",\n}) => {\n  const styles = COLOR_STYLES[color];\n  const { setPreviewConfig, selectedBoard } = useRouteContext();\n\n  const handleMouseEnter = () => {\n    if (onMouseEnter) onMouseEnter();\n    if (preview) {\n      setPreviewConfig(preview);\n    }\n  };\n\n  const handleMouseLeave = () => {\n    if (onMouseLeave) onMouseLeave();\n    if (preview) {\n      // Revert to selected board if one is active, otherwise clear\n      setPreviewConfig({\n        mode: selectedBoard || null,\n      });\n    }\n  };\n\n  return (\n    <button\n      onClick={!disabled ? onClick : undefined}\n      disabled={disabled}\n      onMouseEnter={!disabled ? handleMouseEnter : undefined}\n      onMouseLeave={!disabled ? handleMouseLeave : undefined}\n      className={`\n        group\n        card-base\n        ${disabled ? \"card-disabled\" : \"card-hover\"}\n        ${isSelected ? \"card-selected [--card-bg:#ffffff] dark:[--card-bg:#0f172a]\" : styles.border}\n        ${\n          variant === \"tinted\"\n            ? styles.tintedBg\n            : variant === \"solid\"\n              ? styles.solidBg\n              : \"\"\n        }\n        ${styles.shadow} ${className}\n      `}\n      style={\n        isSelected && className.includes(\"custom-border\")\n          ? ({\n              backgroundImage:\n                \"linear-gradient(var(--card-bg, white), var(--card-bg, white)), \" +\n                (className.match(/custom-border-\\[(.*?)\\]/)?.[1] || \"\"),\n              backgroundOrigin: \"border-box\",\n              backgroundClip: \"padding-box, border-box\",\n              borderColor: \"transparent\",\n              \"--card-bg\": darkMode ? \"#0f172a\" : \"#ffffff\",\n            } as React.CSSProperties)\n          : undefined\n      }\n    >\n      {/* Glossy Reflection Overlay */}\n      <div className=\"absolute inset-x-0 top-0 h-px bg-white/20 dark:bg-white/10 z-20 group-hover:bg-white/40 transition-colors\" />\n      <div className=\"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent pointer-events-none z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-700\" />\n\n      <div\n        className={`absolute inset-0 bg-gradient-to-br transition-all duration-700 ${\n          isSelected\n            ? styles.gradient.replaceAll(\"group-hover:\", \"\")\n            : styles.gradient\n        }`}\n      />\n\n      {badge && (\n        <div\n          className={`absolute top-0 right-0 p-3 rounded-bl-2xl text-badge-label bg-slate-100 dark:bg-slate-800 ${styles.iconColor}`}\n        >\n          <div className={`absolute inset-0 opacity-10 bg-current`} />\n          <span className=\"relative z-10\">{badge}</span>\n        </div>\n      )}\n\n      <div className=\"relative w-20 h-20 flex items-center justify-center\">\n        <div\n          className={`absolute inset-0 blur-2xl opacity-0 group-hover:opacity-40 transition-opacity duration-700 ${styles.iconColor.replace(\"text\", \"bg\")}`}\n        />\n        <Icon\n          size={80}\n          className={`transition-all duration-700 absolute z-10 ${\n            hoverText || HoverIcon\n              ? \"group-hover:opacity-0 group-hover:scale-50 group-hover:rotate-180\"\n              : isSelected\n                ? \"scale-110 rotate-3\"\n                : \"group-hover:scale-110 group-hover:-rotate-3\"\n          } ${styles.iconColor} drop-shadow-[0_0_15px_currentColor]`}\n        />\n        {hoverText && (\n          <div\n            className={`transition-all duration-700 absolute flex items-center justify-center z-10 text-7xl opacity-0 scale-50 -rotate-180 font-serif group-hover:opacity-100 group-hover:scale-110 group-hover:rotate-0 ${styles.iconColor} drop-shadow-[0_0_25px_currentColor]`}\n          >\n            {hoverText}\n          </div>\n        )}\n        {HoverIcon && (\n          <HoverIcon\n            size={80}\n            className={`transition-all duration-700 absolute z-10 opacity-0 scale-50 -rotate-180 group-hover:opacity-100 group-hover:scale-110 group-hover:rotate-0 ${styles.iconColor} drop-shadow-[0_0_15px_currentColor]`}\n          />\n        )}\n      </div>\n\n      <div className=\"text-center relative z-10\">\n        <h3\n          className={`text-2xl font-black uppercase tracking-widest text-slate-900 dark:text-white transition-all duration-500 group-hover:scale-105`}\n        >\n          {titleNode ? (\n            titleNode\n          ) : title.includes(\" \") ? (\n            <>\n              {title.split(\" \")[0]}{\" \"}\n              <span\n                className={`${styles.iconColor} drop-shadow-[0_0_10px_currentColor]`}\n              >\n                {title.split(\" \").slice(1).join(\" \")}\n              </span>\n            </>\n          ) : (\n            title\n          )}\n        </h3>\n        <p className=\"text-slate-400 dark:text-slate-500 mt-3 font-medium leading-relaxed group-hover:text-slate-300 transition-colors\">\n          {description}\n        </p>\n      </div>\n    </button>\n  );\n};\n\nexport default RouteCard;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/molecules/SanctuaryBadgeList.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":44,"messageId":"unexpectedAny","endLine":17,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[571,574],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[571,574],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { INITIAL_ARMY, unitColorMap } from \"@engineConfigs/unitDetails\";\nimport { CHESS_NAME } from \"./UnitChip\";\nimport type { TerrainDetail } from \"@engineConfigs/terrainDetails\";\n\ninterface SanctuaryBadgeListProps {\n  terrain: TerrainDetail;\n}\n\nexport const SanctuaryBadgeList: React.FC<SanctuaryBadgeListProps> = ({\n  terrain,\n}) => {\n  return (\n    <div className=\"flex gap-2 flex-wrap justify-center\">\n      {terrain.sanctuaryUnits.map((pk: string) => {\n        const colors = unitColorMap[pk];\n        const unit = INITIAL_ARMY.find((u: any) => u.type === pk);\n        if (!colors || !unit) return null;\n        const Icon = unit.lucide;\n        return (\n          <div\n            key={`badge-${pk}`}\n            title={CHESS_NAME[pk]?.chess || pk}\n            className={`unit-badge-base ${colors.bg} ${colors.text} ${colors.border}`}\n          >\n            <div className=\"w-6 h-6\">\n              <Icon className=\"w-full h-full\" />\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/molecules/UnitChip.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":5,"column":14,"messageId":"namedExport","endLine":5,"endColumn":73}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { Ban, ShieldPlus, Zap } from \"lucide-react\";\nimport { PIECES, INITIAL_ARMY, unitColorMap } from \"@engineConfigs/unitDetails\";\n\nexport const CHESS_NAME: Record<string, { chess: string; role: string }> = {\n  [PIECES.ROOK]: { chess: \"Rook\", role: \"Heavy Armor\" },\n  [PIECES.BISHOP]: { chess: \"Bishop\", role: \"Ranged\" },\n  [PIECES.KNIGHT]: { chess: \"Knight\", role: \"Cavalry\" },\n  [PIECES.QUEEN]: { chess: \"Queen\", role: \"Elite\" },\n  [PIECES.KING]: { chess: \"King\", role: \"Leader\" },\n  [PIECES.PAWN]: { chess: \"Pawn\", role: \"Infantry\" },\n};\n\ninterface UnitChipProps {\n  pieceKey: string;\n  status: \"allow\" | \"block\" | \"sanctuary\";\n}\n\nexport const UnitChip: React.FC<UnitChipProps> = ({ pieceKey, status }) => {\n  const unit = INITIAL_ARMY.find((u) => u.type === pieceKey);\n  if (!unit) return null;\n  const colors = unitColorMap[pieceKey];\n  const isSanctuary = status === \"sanctuary\";\n  const isBlock = status === \"block\";\n  const chessInfo = CHESS_NAME[pieceKey];\n\n  const Icon = unit.lucide;\n\n  return (\n    <div\n      className={`chip-base ${\n        isBlock\n          ? \"bg-red-500/5 border-red-500/20 opacity-60\"\n          : isSanctuary\n            ? `${colors.bg} ${colors.border} border-double border-4`\n            : `${colors.bg} ${colors.border}`\n      }`}\n    >\n      <div\n        className={`w-8 h-8 rounded-xl flex items-center justify-center shrink-0 ${isBlock ? \"text-slate-500\" : colors.text}`}\n      >\n        <Icon className=\"w-full h-full\" />\n      </div>\n      <div className=\"flex-1 min-w-0\">\n        <span\n          className={`unit-name-label mb-0.5 ${isBlock ? \"text-slate-500\" : colors.text}`}\n        >\n          {chessInfo?.chess || unit.type}\n        </span>\n        <span\n          className={`status-label ${isBlock ? \"text-brand-red\" : isSanctuary ? \"text-amber-400\" : \"text-emerald-400\"}`}\n        >\n          {isBlock ? \"âœ— Blocked\" : isSanctuary ? \"âš” Sanctuary\" : \"âœ“ Can Enter\"}\n        </span>\n      </div>\n      <div className=\"shrink-0\">\n        {isBlock ? (\n          <Ban size={16} className=\"text-brand-red/60\" />\n        ) : isSanctuary ? (\n          <ShieldPlus size={16} className=\"text-amber-400/80\" />\n        ) : (\n          <Zap size={16} className={`${colors.text} opacity-60`} />\n        )}\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/molecules/UnitMovePreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/organisms/RouteBoardPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/organisms/RouteBreadcrumbs.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":25,"messageId":"unexpectedAny","endLine":134,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4370,4373],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4370,4373],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":143,"column":64,"messageId":"unexpectedAny","endLine":143,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4673,4676],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4673,4676],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":162,"column":29,"messageId":"unexpectedAny","endLine":162,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5236,5239],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5236,5239],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":176,"column":27,"messageId":"unexpectedAny","endLine":176,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5708,5711],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5708,5711],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":191,"column":29,"messageId":"unexpectedAny","endLine":191,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6134,6137],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6134,6137],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport {\n  Sofa,\n  GlobeLock,\n  Bot,\n  User,\n  Users,\n  UserPlus,\n  Pizza,\n  Shell,\n  Dices,\n  Eye,\n  Key,\n  LayoutGrid,\n  Omega,\n} from \"lucide-react\";\nimport { useRouteContext } from \"@/app/context/RouteContext\";\nimport {\n  DualToneNS,\n  DualToneEW,\n  QuadTone,\n  AllianceTone,\n  DualToneSwords,\n} from \"../atoms/RouteIcons\";\n\nexport const RouteBreadcrumbs: React.FC = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n\n  const {\n    playMode,\n    playerCount,\n    selectedBoard,\n    selectedPreset,\n    onStartGame,\n    playerConfig,\n    multiplayer,\n  } = useRouteContext();\n\n  const urlPlayers = searchParams.get(\"players\");\n  const urlMode = searchParams.get(\"mode\");\n\n  // We should prefer URL params if we are in the setup flow,\n  // but if we are generally navigating around, we should rely on playerCount\n  // unless we're actually setting it.  The issue is clicking \"1 Player\" pushes ?mode=practice&players=1.\n  // Then the user clicks \"Change Field\" and it goes to /play/setup?step=1.\n  // Wait, if they click the player breadcrumb it goes to `/play/local` which drops all URL params, so it loses `effectivePlayerCount`.\n  // Actually, wait, let's just make it only use the global `playerCount` variable from context.\n\n  // Let's check what `useRouteContext` actually returns when we start the game.\n  // Oh, wait, the router might not immediately update `playerCount` when clicking from local play.\n  // Actually, wait over in `RouteBreadcrumbs` it was using just `playerCount` originally, and the user said:\n  // \"ok its weird when i click it when in single play with only 1, it switches to 2 and updates the config to two players? it should have stayed one until i chose a new item\"\n  // Hmm. When they click the 1 player card, it navigates to `/play/setup?mode=practice&players=1`.\n  // However, the `App.tsx` router wrapper doesn't parse that URL parameter and update `game.activePlayers`!\n  // It just sets the route. So `game.activePlayers.length` is still the default (which is 2).\n  // Therefore `playerCount` is 2.\n  // And with my previous change, `urlPlayers` would force it to 1 initially... but when clicking the breadcrumb to go back to `/play/local`, it drops params -> 2.\n  const effectivePlayerCount =\n    urlPlayers &&\n    location.pathname.includes(\"/setup\") &&\n    searchParams.get(\"step\") === null\n      ? parseInt(urlPlayers, 10)\n      : playerCount;\n  const effectivePlayMode =\n    urlMode === \"online\"\n      ? \"online\"\n      : (urlMode === \"practice\" || urlMode === \"couch\") &&\n          searchParams.get(\"step\") === null\n        ? \"local\"\n        : playMode;\n\n  const getPlayModeIcon = () => {\n    if (effectivePlayMode === \"online\") return <GlobeLock size={18} />;\n    if (effectivePlayMode === \"local\" || effectivePlayMode === \"practice\")\n      return <Sofa size={18} />;\n    return <Sofa size={18} className=\"opacity-40\" />;\n  };\n\n  const getPlayerCountIcon = () => {\n    switch (effectivePlayerCount) {\n      case 1:\n        return <Bot size={18} />;\n      case 2:\n        return <User size={18} />;\n      case 3:\n        return <Users size={18} />;\n      case 4:\n        return <UserPlus size={18} />;\n      default:\n        return <Bot size={18} className=\"opacity-40\" />;\n    }\n  };\n\n  const getBoardIcon = () => {\n    switch (selectedBoard) {\n      case \"2p-ns\":\n        return <DualToneNS size={18} />;\n      case \"2p-ew\":\n        return <DualToneEW size={18} />;\n      case \"4p\":\n        return <QuadTone size={18} />;\n      case \"2v2\":\n        return <AllianceTone size={18} />;\n      default:\n        return <LayoutGrid size={18} className=\"opacity-40\" />;\n    }\n  };\n\n  const getSetupIcon = () => {\n    switch (selectedPreset) {\n      case \"classic\":\n        return <Pizza size={18} />;\n      case \"terrainiffic\":\n        return <Shell size={18} />;\n      case \"quick\":\n        return <Dices size={18} />;\n      case \"custom\":\n        return <Eye size={18} />;\n      default:\n        return <Omega size={18} className=\"opacity-40\" />;\n    }\n  };\n\n  const items = [\n    {\n      icon: getPlayModeIcon(),\n      label: effectivePlayMode ? \"Mode\" : \"Select Mode\",\n      color: (effectivePlayMode === \"online\"\n        ? \"blue\"\n        : effectivePlayMode\n          ? \"red\"\n          : \"slate\") as any,\n      path: \"/play\",\n      value: effectivePlayMode,\n    },\n    ...(effectivePlayMode === \"online\"\n      ? [\n          {\n            icon: <Key size={18} />,\n            label: `Lobby: ${multiplayer?.roomId?.toUpperCase() || \"CODE\"}`,\n            color: (multiplayer?.roomId ? \"blue\" : \"slate\") as any,\n            path: \"/play/lobby\",\n            value: multiplayer?.roomId,\n          },\n        ]\n      : []),\n    {\n      icon: getPlayerCountIcon(),\n      label: effectivePlayerCount\n        ? `${effectivePlayerCount} Player${effectivePlayerCount > 1 ? \"s\" : \"\"}`\n        : \"Add Players\",\n      color: (effectivePlayerCount === 1\n        ? \"red\"\n        : effectivePlayerCount === 2\n          ? \"blue\"\n          : effectivePlayerCount === 3\n            ? \"emerald\"\n            : effectivePlayerCount === 4\n              ? \"amber\"\n              : \"slate\") as any,\n      path: effectivePlayMode === \"online\" ? \"/play/lobby\" : \"/play/local\",\n      value: effectivePlayerCount,\n      badge: effectivePlayerCount > 0 ? effectivePlayerCount : undefined,\n    },\n    {\n      icon: getBoardIcon(),\n      label: selectedBoard ? \"Field\" : \"Choose Field\",\n      color: (selectedBoard === \"2p-ns\"\n        ? \"red\"\n        : selectedBoard === \"2v2\"\n          ? \"slate\"\n          : selectedBoard\n            ? \"emerald\"\n            : \"slate\") as any,\n      path: \"/play/setup?step=1\",\n      value: selectedBoard,\n    },\n    {\n      icon: getSetupIcon(),\n      label: selectedPreset ? \"Laws\" : \"Pick Laws\",\n      color: (selectedPreset === \"classic\"\n        ? \"amber\"\n        : selectedPreset === \"quick\"\n          ? \"blue\"\n          : selectedPreset === \"terrainiffic\"\n            ? \"emerald\"\n            : selectedPreset\n              ? \"red\"\n              : \"slate\") as any,\n      path: \"/play/setup?step=2\",\n      value: selectedPreset,\n    },\n  ];\n\n  // isComplete means every selected value is present\n  const isComplete = items.every(\n    (item) => item.value !== null && item.value !== undefined,\n  );\n\n  const handleStart = () => {\n    // Only trigger game start if clicking the swords/equal section OR the container background\n    // if it's the container, let's just make sure it's complete.\n    // If they click an icon, it should navigate instead.\n    if (multiplayer?.roomId) {\n      navigate(`/game/${multiplayer.roomId}`);\n      return;\n    }\n    if (isComplete && selectedBoard && selectedPreset) {\n      onStartGame(selectedBoard, selectedPreset, playerConfig);\n    }\n  };\n\n  if (items.length === 0)\n    return (\n      <div className=\"h-8 flex font-black uppercase tracking-[0.25em] text-[10px] items-center text-slate-500/50\">\n        \"Select your path\"\n      </div>\n    );\n\n  const canStart = isComplete || !!multiplayer?.roomId;\n\n  return (\n    <div className=\"flex items-center gap-2 mt-4 animate-in fade-in slide-in-from-top-2 duration-500\">\n      <div\n        className={`\n          flex items-center gap-1.5 p-1.5 px-3 rounded-full\n          bg-slate-100/50 dark:bg-slate-900/40 backdrop-blur-md\n          border border-slate-200/50 dark:border-white/5 shadow-inner\n          transition-all\n        `}\n        title={\n          canStart\n            ? multiplayer?.roomId\n              ? \"RESUME BATTLE\"\n              : \"COMMENCE BATTLE\"\n            : \"Your current configuration\"\n        }\n      >\n        {items.map((item, idx) => (\n          <React.Fragment key={idx}>\n            <div\n              className={`\n                relative flex items-center justify-center p-1.5 rounded-xl\n                ${item.color === \"red\" ? \"bg-brand-red/10 text-brand-red border-brand-red/20\" : \"\"}\n                ${item.color === \"blue\" ? \"bg-brand-blue/10 text-brand-blue border-brand-blue/20\" : \"\"}\n                ${item.color === \"emerald\" ? \"bg-emerald-500/10 text-emerald-500 border-emerald-500/20\" : \"\"}\n                ${item.color === \"amber\" ? \"bg-amber-500/10 text-amber-500 border-amber-500/20\" : \"\"}\n                ${item.color === \"slate\" ? \"bg-slate-500/10 text-slate-500 border-slate-500/20\" : \"\"}\n                border shadow-sm transition-all hover:scale-110 cursor-pointer hover:bg-white/20 dark:hover:bg-white/10\n              `}\n              title={`Change ${item.label}`}\n              onClick={(e) => {\n                e.stopPropagation();\n                navigate(item.path);\n              }}\n            >\n              {item.icon}\n              {item.badge !== undefined && (\n                <div className=\"absolute -top-1.5 -right-1.5 w-[14px] h-[14px] rounded-full bg-slate-800 border border-slate-600 flex items-center justify-center text-[9px] font-bold text-white shadow-sm\">\n                  {item.badge}\n                </div>\n              )}\n            </div>\n            {idx < items.length - 1 && (\n              <div className=\"text-slate-400 dark:text-slate-600 font-black text-xs mx-0.5\">\n                +\n              </div>\n            )}\n          </React.Fragment>\n        ))}\n\n        {canStart && (\n          <>\n            <div className=\"text-slate-400 dark:text-slate-600 font-black text-xs mx-1\">\n              =\n            </div>\n            <div\n              className=\"flex items-center justify-center p-1.5 rounded-xl bg-slate-500/10 text-slate-500 border border-slate-500/20 shadow-sm cursor-pointer hover:scale-110 hover:bg-brand-blue/20 transition-all group/swords\"\n              onClick={handleStart}\n              title={multiplayer?.roomId ? \"RESUME BATTLE\" : \"COMMENCE BATTLE\"}\n            >\n              <DualToneSwords\n                size={18}\n                className=\"group-hover/swords:rotate-12 transition-transform\"\n              />\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RouteBreadcrumbs;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/organisms/RouteDetailModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/organisms/RoutePageFooter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/organisms/RoutePageHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/templates/InteractiveGuide.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":18,"messageId":"unexpectedAny","endLine":18,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[719,722],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[719,722],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":66,"messageId":"unexpectedAny","endLine":129,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4040,4043],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4040,4043],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, useRef } from \"react\";\nimport { useRouteContext } from \"@/app/context/RouteContext\";\nimport SectionDivider from \"@molecules/SectionDivider\";\nimport RoutePageHeader from \"@/app/routes/shared/components/organisms/RoutePageHeader\";\nimport RoutePageLayout from \"@/app/routes/shared/components/templates/RoutePageLayout\";\nimport ForwardButton from \"@molecules/ForwardButton\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\n\nexport interface Slide {\n  id: string;\n  title: string;\n  subtitle?: string;\n  description: React.ReactNode;\n  leftContent?: React.ReactNode;\n  icon: React.ElementType;\n  sideContent?: React.ReactNode;\n  infoContent?: React.ReactNode;\n  previewConfig: any;\n  color: \"red\" | \"blue\" | \"emerald\" | \"amber\" | \"slate\" | \"indigo\";\n  topLabel?: string;\n}\n\ninterface InteractiveGuideProps {\n  slides: Slide[];\n  title: string;\n  onBack: () => void;\n  labelColor?: \"red\" | \"blue\" | \"emerald\" | \"amber\" | \"slate\" | \"indigo\";\n  footerForward?: {\n    label: string;\n    onClick: () => void;\n    icon: React.ElementType;\n  };\n  onSlideChange?: (id: string) => void;\n}\n\nconst colorMaps = {\n  red: {\n    border: \"border-brand-red/30 hover:border-brand-red/50\",\n    topBg: \"bg-brand-red/70\",\n    iconBg: \"bg-brand-red/20\",\n    iconText: \"text-brand-red\",\n    iconBorder: \"border-brand-red/30\",\n    indicatorOn: \"bg-brand-red scale-125\",\n  },\n  blue: {\n    border: \"border-brand-blue/30 hover:border-brand-blue/50\",\n    topBg: \"bg-brand-blue/70\",\n    iconBg: \"bg-brand-blue/20\",\n    iconText: \"text-brand-blue\",\n    iconBorder: \"border-brand-blue/30\",\n    indicatorOn: \"bg-brand-blue scale-125\",\n  },\n  emerald: {\n    border: \"border-emerald-500/30 hover:border-emerald-500/50\",\n    topBg: \"bg-emerald-600\",\n    iconBg: \"bg-emerald-500/20\",\n    iconText: \"text-emerald-500\",\n    iconBorder: \"border-emerald-500/30\",\n    indicatorOn: \"bg-emerald-500 scale-125\",\n  },\n  amber: {\n    border: \"border-amber-500/30 hover:border-amber-500/50\",\n    topBg: \"bg-amber-600\",\n    iconBg: \"bg-amber-500/20\",\n    iconText: \"text-amber-500\",\n    iconBorder: \"border-amber-500/30\",\n    indicatorOn: \"bg-amber-500 scale-125\",\n  },\n  slate: {\n    border: \"border-slate-500/30 hover:border-slate-500/50\",\n    topBg: \"bg-slate-600\",\n    iconBg: \"bg-slate-500/20\",\n    iconText: \"text-slate-500\",\n    iconBorder: \"border-slate-500/30\",\n    indicatorOn: \"bg-slate-500 scale-125\",\n  },\n  indigo: {\n    border: \"border-indigo-500/30 hover:border-indigo-500/50\",\n    topBg: \"bg-indigo-600\",\n    iconBg: \"bg-indigo-500/20\",\n    iconText: \"text-indigo-500\",\n    iconBorder: \"border-indigo-500/30\",\n    indicatorOn: \"bg-indigo-500 scale-125\",\n  },\n};\n\nconst InteractiveGuide: React.FC<InteractiveGuideProps> = ({\n  slides,\n  title,\n  onBack,\n  labelColor = \"red\",\n  footerForward,\n  onSlideChange,\n}) => {\n  const { setPreviewConfig, darkMode } = useRouteContext();\n  const [currentSlideIndex, setCurrentSlideIndex] = useState(0);\n\n  const currentSlide = slides[currentSlideIndex];\n\n  const onSlideChangeRef = useRef(onSlideChange);\n  useEffect(() => {\n    onSlideChangeRef.current = onSlideChange;\n  }, [onSlideChange]);\n\n  useEffect(() => {\n    if (currentSlide) {\n      setPreviewConfig(currentSlide.previewConfig);\n      if (onSlideChangeRef.current) {\n        onSlideChangeRef.current(currentSlide.id);\n      }\n    }\n    // Cleanup if unmounted to a default state?\n    // MenuLayout usually defaults it when not hovered, but here we enforce it persistently.\n    return () => setPreviewConfig({ mode: null });\n  }, [currentSlide, setPreviewConfig]);\n\n  const textColor = darkMode ? \"text-slate-100\" : \"text-slate-800\";\n  const subtextColor = darkMode ? \"text-slate-400\" : \"text-slate-500\";\n  const cardBg = darkMode ? \"bg-slate-900/50\" : \"bg-white/70\";\n\n  if (!currentSlide) return null;\n\n  const cmap = colorMaps[currentSlide.color] || colorMaps.red;\n\n  return (\n    <RoutePageLayout className=\"pb-8\">\n      <RoutePageHeader\n        label={title}\n        color={labelColor === \"indigo\" ? \"blue\" : (labelColor as any)}\n        onBackClick={onBack}\n        className=\"mb-0\"\n      />\n\n      <div className=\"w-full flex items-center justify-between gap-4 px-4 lg:px-0 mt-8\">\n        <button\n          onClick={() =>\n            setCurrentSlideIndex(\n              (currentSlideIndex - 1 + slides.length) % slides.length,\n            )\n          }\n          className=\"guide-nav-button\"\n        >\n          <ChevronLeft size={32} />\n        </button>\n\n        <div className=\"flex-1 max-w-4xl mx-auto\">\n          <div className={`guide-card group ${cardBg} ${cmap.border}`}>\n            <div className=\"flex flex-col w-full gap-8 mt-0\">\n              {/* Row 1: Header */}\n              <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-8 pb-8 border-b border-slate-200/10\">\n                <div className=\"flex items-center gap-6\">\n                  <div\n                    className={`p-4 rounded-[1.5rem] border-2 shadow-xl ${cmap.iconBg} ${cmap.iconText} ${cmap.iconBorder} flex items-center justify-center w-24 h-24 shrink-0 transition-transform hover:scale-105 duration-500`}\n                  >\n                    <currentSlide.icon size={48} />\n                  </div>\n                  <div className=\"flex flex-col\">\n                    {currentSlide.topLabel && (\n                      <p\n                        className={`text-sm font-bold ${subtextColor} uppercase tracking-widest mb-1`}\n                      >\n                        {currentSlide.topLabel}\n                      </p>\n                    )}\n                    <h3\n                      className={`text-5xl font-black uppercase tracking-tight ${textColor}`}\n                    >\n                      {currentSlide.title}\n                    </h3>\n                  </div>\n                </div>\n\n                {currentSlide.leftContent && (\n                  <div className=\"shrink-0\">{currentSlide.leftContent}</div>\n                )}\n              </div>\n\n              {/* Row 2: Visuals & Description */}\n              <div className=\"flex flex-col lg:flex-row items-center lg:items-center justify-around gap-12 w-full\">\n                {currentSlide.sideContent && (\n                  <div\n                    className={`flex flex-col items-center justify-center ${currentSlide.description ? \"flex-1\" : \"w-full\"}`}\n                  >\n                    {currentSlide.sideContent}\n                  </div>\n                )}\n                {/* Description (Simple List) */}\n                {currentSlide.description && (\n                  <div\n                    className={`flex flex-col justify-center text-left ${currentSlide.sideContent ? \"flex-1\" : \"w-full\"}`}\n                  >\n                    {currentSlide.description}\n                  </div>\n                )}\n              </div>\n\n              {/* Row 4: Info/Legend (Bottom Row) */}\n              {currentSlide.infoContent && (\n                <div className=\"w-full mt-4 border-t border-slate-200/10 pt-8\">\n                  {currentSlide.infoContent}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <button\n          onClick={() =>\n            setCurrentSlideIndex((currentSlideIndex + 1) % slides.length)\n          }\n          className=\"guide-nav-button\"\n        >\n          <ChevronRight size={32} />\n        </button>\n      </div>\n\n      {/* Slide indicators */}\n      <div className=\"flex gap-4 mt-10\">\n        {slides.map((_, idx) => (\n          <button\n            key={idx}\n            onClick={() => setCurrentSlideIndex(idx)}\n            className={`guide-indicator ${idx === currentSlideIndex ? cmap.indicatorOn : \"bg-slate-300 dark:bg-slate-700 hover:bg-slate-400 dark:hover:bg-slate-600\"}`}\n          />\n        ))}\n      </div>\n\n      {footerForward && (\n        <div className=\"relative w-full max-w-7xl mt-16 space-y-2\">\n          <SectionDivider label=\"\" />\n          <ForwardButton\n            onClick={footerForward.onClick}\n            label={footerForward.label}\n            className=\"float-right\"\n            Icon={footerForward.icon}\n          />\n        </div>\n      )}\n    </RoutePageLayout>\n  );\n};\n\nexport default InteractiveGuide;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/templates/RouteGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/templates/RouteLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/shared/components/templates/RoutePageLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/stats/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":260,"column":36,"messageId":"unexpectedAny","endLine":260,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11019,11022],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11019,11022],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\nimport { ArrowLeft, Target, Shield, Crosshair } from \"lucide-react\";\nimport { useNavigate } from \"react-router-dom\";\nimport statsDataObj from \"@/assets/statistics.json\";\nimport {\n  PIECES,\n  unitColorMap,\n  UNIT_DETAILS,\n  INITIAL_ARMY,\n} from \"@engineConfigs/unitDetails\";\nimport { TERRAIN_DETAILS, TERRAIN_TYPES } from \"@engineConfigs/terrainDetails\";\nimport { useRouteContext } from \"@/app/context/RouteContext\";\nimport type { PieceStyle } from \"@constants/unit.constants\";\n\n// Cast the imported JSON to our type\nconst statsData = statsDataObj as unknown as Record<\n  string,\n  Record<\n    string,\n    {\n      total: number;\n      captures: number;\n      rate: number;\n      terrainStats: Record<\n        string,\n        {\n          total: number;\n          captures: number;\n          rate: number;\n        }\n      >;\n    }\n  >\n>;\n\nconst getUnitIcon = (type: string, pieceStyle: PieceStyle) => {\n  const armyUnit = INITIAL_ARMY.find((u) => u.type === type);\n  if (!armyUnit) return null;\n\n  if (pieceStyle === \"lucide\") {\n    const Icon = armyUnit.lucide;\n    return <Icon className=\"w-full h-full\" />;\n  }\n  if (pieceStyle === \"custom\") {\n    const Icon = armyUnit.custom;\n    return <Icon className=\"w-full h-full\" />;\n  }\n\n  return (\n    <span className=\"text-lg leading-none\">\n      {armyUnit[pieceStyle as \"emoji\" | \"bold\" | \"outlined\"]}\n    </span>\n  );\n};\n\nconst StatBar = ({\n  rate,\n  colorClass,\n}: {\n  rate: number;\n  colorClass: string;\n}) => {\n  return (\n    <div className=\"w-full h-3 bg-white/5 rounded-full overflow-hidden mt-2 border border-white/10 shadow-inner\">\n      <div\n        className={`h-full rounded-full transition-all duration-1000 ease-out ${colorClass}`}\n        style={{ width: `${Math.max(rate, 2)}%` }} // Minimum width to show it's 0 if needed, but actual % width\n      />\n    </div>\n  );\n};\n\nexport const StatsView = () => {\n  const navigate = useNavigate();\n  const { pieceStyle } = useRouteContext();\n  const [selectedPiece, setSelectedPiece] = useState<string>(PIECES.PAWN);\n\n  const pieceKeys = Object.values(PIECES);\n\n  const currentStats = statsData[selectedPiece];\n  const selectedColor = unitColorMap[selectedPiece];\n\n  return (\n    <div className=\"min-h-screen pt-24 pb-12 px-6 flex flex-col items-center animate-fade-in text-white z-10 relative\">\n      <div className=\"w-full max-w-4xl mx-auto space-y-8\">\n        {/* Header */}\n        <div className=\"flex items-center gap-4 border-b border-white/10 pb-6\">\n          <button\n            onClick={() => navigate(-1)}\n            className=\"p-3 bg-white/5 hover:bg-white/10 rounded-full transition-colors border border-white/10 focus:outline-none focus:ring-2 focus:ring-brand-blue\"\n          >\n            <ArrowLeft className=\"w-6 h-6\" />\n          </button>\n          <div>\n            <h1 className=\"text-4xl font-black uppercase tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-500 drop-shadow-sm\">\n              Combat Statistics\n            </h1>\n            <p className=\"text-sm text-gray-400 capitalize font-medium tracking-wide mt-1\">\n              Threat Geometry & Capture Rates\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-8\">\n          {/* Piece Selector (Sidebar) */}\n          <div className=\"lg:col-span-4 bg-white/5 border border-white/10 rounded-2xl p-4 flex flex-col gap-2 backdrop-blur-md\">\n            <h2 className=\"text-lg font-bold text-gray-300 uppercase tracking-wide mb-2 px-2 flex items-center gap-2\">\n              <Crosshair className=\"w-5 h-5 text-gray-500\" /> Choose Unit\n            </h2>\n            {pieceKeys.map((piece) => {\n              const isActive = selectedPiece === piece;\n              const color = unitColorMap[piece];\n\n              return (\n                <button\n                  key={piece}\n                  onClick={() => setSelectedPiece(piece)}\n                  className={`flex items-center gap-4 w-full p-4 rounded-xl transition-all duration-300 text-left relative overflow-hidden group ${\n                    isActive\n                      ? `${color.bg} border-2 ${color.border} ${color.shadow}`\n                      : \"hover:bg-white/10 border-2 border-transparent\"\n                  }`}\n                >\n                  {isActive && (\n                    <div\n                      className={`absolute left-0 top-0 bottom-0 w-1 ${color.ribbonBg}`}\n                    />\n                  )}\n                  <div\n                    className={`p-2 rounded-lg flex items-center justify-center w-10 h-10 ${isActive ? color.bg : \"bg-white/5 group-hover:bg-white/10\"} ${isActive ? color.text : \"text-gray-400\"}`}\n                  >\n                    {getUnitIcon(piece, pieceStyle)}\n                  </div>\n                  <div>\n                    <div\n                      className={`font-bold capitalize text-lg ${isActive ? \"text-white\" : \"text-gray-300\"}`}\n                    >\n                      {UNIT_DETAILS[piece]?.title || piece}\n                    </div>\n                    <div className=\"text-xs text-gray-500 capitalize tracking-wider font-semibold\">\n                      {piece}\n                    </div>\n                  </div>\n                </button>\n              );\n            })}\n          </div>\n\n          {/* Stats Display (Main Content) */}\n          <div className=\"lg:col-span-8 space-y-6\">\n            <div\n              className={`space-y-8 rounded-2xl border bg-black/40 backdrop-blur-xl p-8 relative overflow-hidden border-t-4 shadow-2xl ${selectedColor?.border}`}\n            >\n              <div\n                className={`absolute top-0 right-0 p-8 opacity-10 ${selectedColor?.text}`}\n              >\n                <Target className=\"w-32 h-32\" />\n              </div>\n\n              <div className=\"relative z-10 flex items-center gap-6 mb-8 pb-8 border-b border-white/10\">\n                <div\n                  className={`p-6 rounded-2xl flex items-center justify-center w-20 h-20 ${selectedColor?.bg} ${selectedColor?.text} ${selectedColor?.shadow} ${selectedColor?.ring} ring-1 text-4xl`}\n                >\n                  {getUnitIcon(selectedPiece, pieceStyle)}\n                </div>\n                <div>\n                  <h2 className=\"text-gray-400 text-sm font-bold uppercase tracking-widest mb-1\">\n                    Threat Profile\n                  </h2>\n                  <h3 className=\"text-4xl font-black text-white capitalize drop-shadow-md\">\n                    {UNIT_DETAILS[selectedPiece]?.title || selectedPiece}\n                  </h3>\n                  <p className=\"text-sm text-gray-300 italic mt-2 opacity-80\">\n                    {UNIT_DETAILS[selectedPiece]?.role ||\n                      \"Tactical Combat Unit.\"}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"space-y-6 relative z-10\">\n                <h4 className=\"text-sm text-gray-400 font-bold uppercase tracking-widest flex items-center gap-2\">\n                  <Shield className=\"w-4 h-4\" /> Advantage Against\n                </h4>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {pieceKeys.map((defender) => {\n                    const matchStats = currentStats[defender];\n                    const defenderColor = unitColorMap[defender];\n                    const rate = matchStats?.rate || 0;\n\n                    return (\n                      <div\n                        key={defender}\n                        className=\"bg-white/5 border border-white/5 rounded-xl p-4 hover:border-white/10 transition-colors group\"\n                      >\n                        <div className=\"flex justify-between items-center mb-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <div\n                              className={`p-1.5 rounded-md flex items-center justify-center w-8 h-8 ${defenderColor.bg} ${defenderColor.text}`}\n                            >\n                              {getUnitIcon(defender, pieceStyle)}\n                            </div>\n                            <span className=\"font-semibold text-gray-200 capitalize group-hover:text-white transition-colors\">\n                              {defender}\n                            </span>\n                          </div>\n                          <div className=\"text-right\">\n                            <span\n                              className={`text-xl font-bold ${rate > 10 ? \"text-green-400\" : rate > 4 ? \"text-yellow-400\" : \"text-red-400\"}`}\n                            >\n                              {rate.toFixed(1)}%\n                            </span>\n                          </div>\n                        </div>\n                        <StatBar\n                          rate={rate}\n                          colorClass={\n                            rate > 10\n                              ? \"bg-gradient-to-r from-green-500 to-green-400 shadow-[0_0_10px_rgba(74,222,128,0.5)]\"\n                              : rate > 4\n                                ? \"bg-gradient-to-r from-yellow-500 to-yellow-400 shadow-[0_0_10px_rgba(250,204,21,0.5)]\"\n                                : \"bg-gradient-to-r from-red-500 to-red-400 shadow-[0_0_10px_rgba(248,113,113,0.5)]\"\n                          }\n                        />\n                        <div className=\"mt-2 text-[10px] text-gray-500 font-medium tracking-wide uppercase flex justify-between\">\n                          <span>Threat</span>\n                          <span>\n                            {(matchStats?.captures || 0).toLocaleString()} of{\" \"}\n                            {(matchStats?.total || 1).toLocaleString()}{\" \"}\n                            simulations\n                          </span>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n\n              {/* Trench Advantage Analysis */}\n              <div className=\"flex items-center gap-2 mb-6\">\n                <div className=\"p-2 bg-indigo-500/20 rounded-lg\">\n                  <Shield className=\"w-5 h-5 text-indigo-400\" />\n                </div>\n                <div>\n                  <h4 className=\"text-xs font-black uppercase tracking-[0.2em] text-indigo-400/80\">\n                    Trench Advantage\n                  </h4>\n                  <p className=\"text-[10px] text-slate-500 uppercase tracking-widest font-bold\">\n                    Performance gain vs Flat Ground\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {TERRAIN_DETAILS.map((terrain) => {\n                  const sanctuaryList =\n                    UNIT_DETAILS[selectedPiece]?.levelUp?.sanctuaryTerrain ||\n                    [];\n                  const isSanctuary = sanctuaryList.includes(\n                    terrain.key as any,\n                  );\n\n                  // Aggregate stats for this piece starting on this terrain across ALL defenders\n                  const allDefenders = Object.values(currentStats);\n                  const tStats = allDefenders.map(\n                    (d) => d.terrainStats[terrain.key],\n                  );\n                  const flatStats = allDefenders.map(\n                    (d) => d.terrainStats[TERRAIN_TYPES.FLAT],\n                  );\n\n                  const totalT = tStats.reduce((acc, s) => acc + s.total, 0);\n                  const capsT = tStats.reduce((acc, s) => acc + s.captures, 0);\n                  const rateT = totalT > 0 ? (capsT / totalT) * 100 : 0;\n\n                  const totalF = flatStats.reduce((acc, s) => acc + s.total, 0);\n                  const capsF = flatStats.reduce(\n                    (acc, s) => acc + s.captures,\n                    0,\n                  );\n                  const rateF = totalF > 0 ? (capsF / totalF) * 100 : 0;\n\n                  const advantage = rateT - rateF;\n\n                  return (\n                    <div\n                      key={terrain.key}\n                      className={`p-4 rounded-xl border transition-all duration-300 ${\n                        isSanctuary\n                          ? \"bg-emerald-500/5 border-emerald-500/20 shadow-[0_0_15px_rgba(16,185,129,0.05)]\"\n                          : \"bg-white/[0.02] border-white/5\"\n                      }`}\n                    >\n                      <div className=\"flex justify-between items-start mb-3\">\n                        <div className=\"flex items-center gap-3\">\n                          <div\n                            className={`p-2 rounded-lg ${terrain.color.bg} ${terrain.color.text}`}\n                          >\n                            <terrain.icon className=\"w-4 h-4\" />\n                          </div>\n                          <div>\n                            <div className=\"text-sm font-bold text-white flex items-center gap-2\">\n                              {terrain.label}\n                              {isSanctuary && (\n                                <span className=\"text-[8px] bg-emerald-500 text-black px-1.5 py-0.5 rounded-full font-black uppercase tracking-tighter\">\n                                  Sanctuary\n                                </span>\n                              )}\n                            </div>\n                            <div className=\"text-[9px] text-slate-500 font-bold uppercase tracking-tight\">\n                              {totalT.toLocaleString()} sims\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div\n                            className={`text-lg font-black ${advantage > 0 ? \"text-emerald-400\" : advantage < 0 ? \"text-rose-400\" : \"text-slate-400\"}`}\n                          >\n                            {advantage > 0 ? \"+\" : \"\"}\n                            {advantage.toFixed(1)}%\n                          </div>\n                          <div className=\"text-[9px] text-slate-600 font-bold uppercase\">\n                            vs flat\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex justify-between text-[10px] items-center\">\n                        <span className=\"text-slate-500\">Capture Rate</span>\n                        <span className=\"text-slate-300 font-mono\">\n                          {rateT.toFixed(1)}%\n                        </span>\n                      </div>\n                      <div className=\"w-full h-1 bg-white/5 rounded-full mt-2 overflow-hidden\">\n                        <div\n                          className={`h-full transition-all duration-1000 ${advantage > 0 ? \"bg-emerald-500 shadow-[0_0_5px_rgba(16,185,129,0.5)]\" : \"bg-white/10\"}`}\n                          style={{ width: `${Math.min(rateT * 2, 100)}%` }}\n                        />\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default StatsView;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/stats/lazy.routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/_lazy.routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/atoms/LogicDivider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/atoms/NavButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/atoms/PanelCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/atoms/SectionRibbon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/atoms/StatBullet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/atoms/TerrainBadge.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":54,"messageId":"unexpectedAny","endLine":36,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1089,1092],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1089,1092],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { ShieldPlus, X } from \"lucide-react\";\n\ninterface TerrainBadgeProps {\n  icon: React.ReactNode;\n  bg: string;\n  text: string;\n  border: string;\n  ring: string;\n  isProtected: boolean;\n  canTraverse: boolean;\n  isActive: boolean;\n  onClick: () => void;\n  shieldBorderColor?: string;\n  shieldTextColor?: string;\n}\n\nexport const TerrainBadge: React.FC<TerrainBadgeProps> = ({\n  icon,\n  bg,\n  text,\n  border,\n  ring,\n  isProtected,\n  canTraverse,\n  isActive,\n  onClick,\n  shieldBorderColor,\n  shieldTextColor,\n}) => {\n  return (\n    <div\n      onClick={onClick}\n      className={`p-2.5 rounded-2xl ${bg} ${text} border ${border} shadow-sm backdrop-blur-md relative transition-all group/t cursor-pointer hover:scale-110 hover:shadow-lg hover:border-white/20 ${isActive ? \"opacity-100\" : !canTraverse ? \"opacity-[0.42] grayscale-[0.5]\" : \"opacity-[0.85]\"} ${isActive ? `ring-2 ${ring} scale-110 shadow-lg` : \"\"} ${isProtected ? \"border-double border-4\" : !canTraverse ? \"border-dotted border-4\" : \"\"}`}\n    >\n      {React.cloneElement(icon as React.ReactElement<any>, {\n        size: 24,\n        className: \"fill-current/10\",\n      })}\n\n      {/* Shield Badge for Protection */}\n      {isProtected && (\n        <div\n          className={`absolute -top-2 -right-2 p-1 rounded-full bg-white dark:bg-slate-900 border-2 ${shieldBorderColor || \"\"} shadow-lg z-10 flex items-center justify-center animate-pulse`}\n          title=\"Protected in this terrain\"\n        >\n          <ShieldPlus size={10} className={shieldTextColor} strokeWidth={4} />\n        </div>\n      )}\n\n      {/* Red X Badge for Untraversable Terrain */}\n      {!canTraverse && (\n        <div className=\"absolute -top-1 -right-1 p-0.5 rounded-full bg-brand-red/10 border border-brand-red/20 shadow-sm z-10 flex items-center justify-center\">\n          <X size={8} className=\"text-brand-red\" strokeWidth={6} />\n        </div>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/atoms/Typography.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/molecules/LayoutPicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/molecules/MiniMovePreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/molecules/StatList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/molecules/TerrainAffinityBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/molecules/UnitIconSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/molecules/UnitIdentityHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/organisms/SimulationPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/organisms/UnitPortfolio.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":12,"messageId":"unexpectedAny","endLine":13,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[586,589],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[586,589],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":11,"messageId":"unexpectedAny","endLine":14,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[601,604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[601,604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":9,"messageId":"unexpectedAny","endLine":15,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[614,617],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[614,617],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":19,"messageId":"unexpectedAny","endLine":18,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[685,688],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[685,688],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":19,"messageId":"unexpectedAny","endLine":19,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[708,711],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[708,711],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport { UserPlus } from \"lucide-react\";\nimport { PanelCard } from \"../atoms/PanelCard\";\nimport { UnitIdentityHeader } from \"../molecules/UnitIdentityHeader\";\nimport { UnitIconSelector } from \"../molecules/UnitIconSelector\";\nimport { MiniMovePreview } from \"../molecules/MiniMovePreview\";\nimport { StatList } from \"../molecules/StatList\";\nimport { TerrainAffinityBar } from \"../molecules/TerrainAffinityBar\";\nimport type { TerrainAffinityItem } from \"../molecules/TerrainAffinityBar\";\n\ninterface UnitPortfolioProps {\n  selectedUnit: string | null;\n  details: any;\n  colors: any;\n  unit: any;\n  prevUnitType: string;\n  nextUnitType: string;\n  prevUnitColors: any;\n  nextUnitColors: any;\n  PrevIcon?: React.ElementType;\n  NextIcon?: React.ElementType;\n  handlePrevUnit: () => void;\n  handleNextUnit: () => void;\n  terrainItems: TerrainAffinityItem[];\n  selectedTerrainIdx: number;\n  onTerrainSelect: (idx: number) => void;\n  textColor: string;\n  subtextColor: string;\n  cardBg: string;\n  borderColor: string;\n  panelBorderStyle: string;\n  darkMode: boolean;\n}\n\nexport const UnitPortfolio: React.FC<UnitPortfolioProps> = ({\n  selectedUnit,\n  details,\n  colors,\n  unit,\n  prevUnitColors,\n  nextUnitColors,\n  PrevIcon,\n  NextIcon,\n  handlePrevUnit,\n  handleNextUnit,\n  terrainItems,\n  selectedTerrainIdx,\n  onTerrainSelect,\n  textColor,\n  subtextColor,\n  cardBg,\n  borderColor,\n  panelBorderStyle,\n  darkMode,\n}) => {\n  if (!selectedUnit || !details || !unit || !colors) {\n    return (\n      <div className=\"h-full flex flex-col relative group/panel\">\n        <PanelCard\n          className={`p-8 border-4 ${borderColor} ${cardBg} items-center justify-center text-center opacity-60`}\n        >\n          <div className=\"p-6 rounded-full bg-slate-100 dark:bg-slate-800 mb-4\">\n            <UserPlus size={48} className={subtextColor} />\n          </div>\n          <h3 className={`text-2xl font-black uppercase ${textColor}`}>\n            Select A Unit\n          </h3>\n          <p className={`text-sm font-bold ${subtextColor} max-w-[200px]`}>\n            Choose a unit from the top bar to view its capabilities.\n          </p>\n        </PanelCard>\n      </div>\n    );\n  }\n\n  const IconComp = unit.lucide;\n\n  return (\n    <div className=\"h-full flex flex-col relative group/panel\">\n      <PanelCard\n        className={`p-8 ${panelBorderStyle} ${cardBg} ${colors.border} gap-6`}\n      >\n        {/* Background decoration */}\n        <div\n          className={`absolute -right-20 -top-20 w-64 h-64 rounded-full ${colors.bg} blur-lg opacity-20`}\n        />\n\n        <div className=\"flex-1 flex flex-col items-center z-10 text-center w-full\">\n          <UnitIdentityHeader\n            role={details.role}\n            title={details.title}\n            subtitle={details.subtitle}\n            Icon={UserPlus}\n            colors={colors}\n            textColor={textColor}\n          />\n\n          <div className=\"flex flex-row items-center gap-10 mb-6\">\n            <UnitIconSelector\n              Icon={IconComp}\n              colors={colors}\n              onPrev={handlePrevUnit}\n              onNext={handleNextUnit}\n              PrevIcon={PrevIcon}\n              NextIcon={NextIcon}\n              prevUnitColors={prevUnitColors}\n              nextUnitColors={nextUnitColors}\n            />\n\n            <div className=\"flex flex-col items-center gap-2\">\n              <MiniMovePreview\n                movePattern={details.movePattern}\n                newMovePattern={details.newMovePattern}\n                attackPattern={details.attackPattern}\n              />\n            </div>\n          </div>\n\n          {details.levelUp && (\n            <StatList\n              stats={details.levelUp.stats}\n              colors={colors}\n              subtextColor={subtextColor}\n            />\n          )}\n\n          <TerrainAffinityBar\n            items={terrainItems}\n            selectedIndex={selectedTerrainIdx}\n            onSelect={onTerrainSelect}\n            subtextColor={subtextColor}\n            darkMode={darkMode}\n            shieldBorderColor={colors.border}\n            shieldTextColor={colors.text}\n          />\n        </div>\n      </PanelCard>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/components/templates/TutorialPageLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/app/routes/tutorial/index.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/xopher/www/x/battle-chess/src/app/routes/tutorial/index.tsx:52:34\n  50 |       try {\n  51 |         const data = JSON.parse(stored);\n> 52 |         if (Array.isArray(data)) setAllSeeds(data);\n     |                                  ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  53 |       } catch (e) {\n  54 |         console.error(\"Failed to parse seeds\", e);\n  55 |       }","line":52,"column":34,"endLine":52,"endColumn":45},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":275,"column":44,"messageId":"unexpectedAny","endLine":275,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8642,8645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8642,8645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":284,"column":45,"messageId":"unexpectedAny","endLine":284,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8927,8930],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8927,8930],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/xopher/www/x/battle-chess/src/app/routes/tutorial/index.tsx:79:5\n  77 |   useEffect(() => {\n  78 |     // eslint-disable-next-line react-hooks/set-state-in-effect\n> 79 |     setActiveLayoutIdx(-1);\n     |     ^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  80 |   }, [selectedTerrainIdx]);\n  81 |\n  82 |   const handlePrevLayout = () => {","line":79,"column":5,"endLine":79,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\n * Copyright (c) 2006 - 2026 Hall of the Gods, Inc.\n * All Rights Reserved.\n *\n * Interactive Tutorial Page\n * Using new 5-column layout.\n */\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport { INITIAL_ARMY } from \"@engineConfigs/unitDetails\";\nimport { isUnitProtected } from \"@logic/gameLogic\";\nimport { canUnitTraverseTerrain } from \"@setup/terrainCompat\";\nimport { UNIT_DETAILS, unitColorMap } from \"@engineConfigs/unitDetails\";\nimport { TERRAIN_LIST } from \"@constants/terrain.constants\";\nimport type { PieceType, TerrainType } from \"@engineTypes/game\";\nimport { deserializeGame } from \"@/shared/utils/serialization\";\nimport TerrainDetailsPanel from \"@/app/routes/game/components/organisms/TerrainDetailsPanel\";\nimport InteractiveHeader from \"@/shared/components/organisms/InteractiveHeader\";\nimport CopyrightFooter from \"@/shared/components/molecules/CopyrightFooter\";\nimport { UnitPortfolio } from \"./components/organisms/UnitPortfolio\";\nimport { SimulationPreview } from \"./components/organisms/SimulationPreview\";\nimport { LogicDivider } from \"./components/atoms/LogicDivider\";\nimport { TutorialPageLayout } from \"./components/templates/TutorialPageLayout\";\nimport type { TerrainAffinityItem } from \"./components/molecules/TerrainAffinityBar\";\n\ninterface SeedItem {\n  id: string;\n  name: string;\n  seed: string;\n  mode: string;\n  createdAt: string;\n}\n\ninterface LearnTutorialViewProps {\n  onBack: () => void;\n  darkMode: boolean;\n}\n\nexport const LearnTutorialView: React.FC<LearnTutorialViewProps> = ({\n  onBack,\n  darkMode,\n}) => {\n  const [selectedUnit, setSelectedUnit] = useState<string | null>(null);\n  const [selectedTerrainIdx, setSelectedTerrainIdx] = useState<number>(-1);\n  const [allSeeds, setAllSeeds] = useState<SeedItem[]>([]);\n  const [activeLayoutIdx, setActiveLayoutIdx] = useState<number>(-1);\n\n  useEffect(() => {\n    const stored = localStorage.getItem(\"trenchess_seeds\");\n    if (stored) {\n      try {\n        const data = JSON.parse(stored);\n        if (Array.isArray(data)) setAllSeeds(data);\n      } catch (e) {\n        console.error(\"Failed to parse seeds\", e);\n      }\n    }\n  }, []);\n\n  const activeTerrainTypeKey =\n    selectedTerrainIdx >= 0\n      ? TERRAIN_LIST[selectedTerrainIdx].terrainTypeKey\n      : null;\n  const filteredSeeds = useMemo(() => {\n    return allSeeds.filter((item) => {\n      const data = deserializeGame(item.seed);\n      if (!data) return false;\n      const { terrain } = data;\n      for (let r = 0; r < terrain.length; r++) {\n        for (let c = 0; c < terrain[r].length; c++) {\n          if (terrain[r][c] === activeTerrainTypeKey) return true;\n        }\n      }\n      return false;\n    });\n  }, [allSeeds, activeTerrainTypeKey]);\n\n  useEffect(() => {\n    // eslint-disable-next-line react-hooks/set-state-in-effect\n    setActiveLayoutIdx(-1);\n  }, [selectedTerrainIdx]);\n\n  const handlePrevLayout = () => {\n    if (filteredSeeds.length === 0) return;\n    setActiveLayoutIdx((prev) => {\n      if (prev <= -1) return filteredSeeds.length - 1;\n      return prev - 1;\n    });\n  };\n  const handleNextLayout = () => {\n    if (filteredSeeds.length === 0) return;\n    setActiveLayoutIdx((prev) => {\n      if (prev >= filteredSeeds.length - 1) return -1;\n      return prev + 1;\n    });\n  };\n\n  const activeLayoutLabel =\n    activeLayoutIdx === -1\n      ? \"Default\"\n      : filteredSeeds[activeLayoutIdx]?.name || \"Saved Layout\";\n\n  const terrainPositions = useMemo<Set<string> | undefined>(() => {\n    if (\n      activeLayoutIdx === -1 ||\n      !filteredSeeds[activeLayoutIdx] ||\n      !activeTerrainTypeKey\n    )\n      return undefined;\n    const data = deserializeGame(filteredSeeds[activeLayoutIdx].seed);\n    if (!data) return undefined;\n    const positions = new Set<string>();\n    const { terrain } = data;\n    for (let r = 0; r < terrain.length; r++) {\n      for (let c = 0; c < terrain[r].length; c++) {\n        if (terrain[r][c] === activeTerrainTypeKey) {\n          positions.add(`${r},${c}`);\n        }\n      }\n    }\n    return positions.size > 0 ? positions : undefined;\n  }, [activeLayoutIdx, filteredSeeds, activeTerrainTypeKey]);\n\n  const textColor = darkMode ? \"text-slate-100\" : \"text-slate-800\";\n  const subtextColor = darkMode ? \"text-slate-400\" : \"text-slate-500\";\n  const cardBg = darkMode ? \"bg-slate-900/50\" : \"bg-white/70\";\n  const borderColor = darkMode ? \"border-white/10\" : \"border-slate-200\";\n\n  const unitTypes = Object.keys(UNIT_DETAILS);\n\n  const handlePrevUnit = () => {\n    const idx = selectedUnit ? unitTypes.indexOf(selectedUnit) : 0;\n    const newIdx = (idx - 1 + unitTypes.length) % unitTypes.length;\n    setSelectedUnit(unitTypes[newIdx]);\n  };\n\n  const handleNextUnit = () => {\n    const idx = selectedUnit ? unitTypes.indexOf(selectedUnit) : 0;\n    const newIdx = (idx + 1) % unitTypes.length;\n    setSelectedUnit(unitTypes[newIdx]);\n  };\n\n  const handlePrevTerrain = () => {\n    setSelectedTerrainIdx(\n      (prev) => (prev - 1 + TERRAIN_LIST.length) % TERRAIN_LIST.length,\n    );\n  };\n\n  const handleNextTerrain = () => {\n    setSelectedTerrainIdx((prev) => (prev + 1) % TERRAIN_LIST.length);\n  };\n\n  const getPortfolioProps = () => {\n    if (!selectedUnit) return null;\n\n    const details = UNIT_DETAILS[selectedUnit];\n    const colors = unitColorMap[selectedUnit];\n    const unit = INITIAL_ARMY.find((u) => u.type === selectedUnit);\n\n    if (!details || !unit || !colors) return null;\n\n    const unitIsProtected =\n      selectedTerrainIdx >= 0 &&\n      isUnitProtected(\n        selectedUnit as PieceType,\n        activeTerrainTypeKey as TerrainType,\n      );\n    const unitCanTraverse =\n      selectedTerrainIdx >= 0\n        ? canUnitTraverseTerrain(\n            selectedUnit as PieceType,\n            TERRAIN_LIST[selectedTerrainIdx].terrainTypeKey as TerrainType,\n          )\n        : true;\n    const panelBorderStyle = unitIsProtected\n      ? \"border-8 border-double\"\n      : !unitCanTraverse\n        ? \"border-8 border-dotted\"\n        : \"border-4\";\n\n    const idx = unitTypes.indexOf(selectedUnit);\n    const prevUnitType =\n      unitTypes[(idx - 1 + unitTypes.length) % unitTypes.length];\n    const nextUnitType = unitTypes[(idx + 1) % unitTypes.length];\n    const prevUnit = INITIAL_ARMY.find((u) => u.type === prevUnitType);\n    const nextUnit = INITIAL_ARMY.find((u) => u.type === nextUnitType);\n\n    const terrainItems: TerrainAffinityItem[] = TERRAIN_LIST.map((t) => ({\n      name: t.name,\n      icon: t.icon,\n      bg: t.bg,\n      text: t.text,\n      border: t.border,\n      ring: t.ring,\n      isProtected: isUnitProtected(\n        selectedUnit as PieceType,\n        t.terrainTypeKey as TerrainType,\n      ),\n      canTraverse: canUnitTraverseTerrain(\n        selectedUnit as PieceType,\n        t.terrainTypeKey as TerrainType,\n      ),\n    }));\n\n    return {\n      selectedUnit,\n      details,\n      colors,\n      unit,\n      prevUnitType,\n      nextUnitType,\n      prevUnitColors: unitColorMap[prevUnitType],\n      nextUnitColors: unitColorMap[nextUnitType],\n      PrevIcon: prevUnit?.lucide,\n      NextIcon: nextUnit?.lucide,\n      handlePrevUnit,\n      handleNextUnit,\n      terrainItems,\n      selectedTerrainIdx,\n      onTerrainSelect: setSelectedTerrainIdx,\n      textColor,\n      subtextColor,\n      cardBg,\n      borderColor,\n      panelBorderStyle,\n      darkMode,\n    };\n  };\n\n  const portfolioProps = getPortfolioProps();\n\n  const portfolioSlot = portfolioProps ? (\n    <UnitPortfolio {...portfolioProps} />\n  ) : (\n    <UnitPortfolio\n      selectedUnit={null}\n      details={null}\n      colors={null}\n      unit={null}\n      prevUnitType=\"\"\n      nextUnitType=\"\"\n      prevUnitColors={null}\n      nextUnitColors={null}\n      handlePrevUnit={handlePrevUnit}\n      handleNextUnit={handleNextUnit}\n      terrainItems={[]}\n      selectedTerrainIdx={-1}\n      onTerrainSelect={() => {}}\n      textColor={textColor}\n      subtextColor={subtextColor}\n      cardBg={cardBg}\n      borderColor={borderColor}\n      panelBorderStyle=\"\"\n      darkMode={darkMode}\n    />\n  );\n\n  const terrainDetailsSlot = (\n    <TerrainDetailsPanel\n      darkMode={darkMode}\n      terrainTypeKey={\n        selectedTerrainIdx >= 0\n          ? TERRAIN_LIST[selectedTerrainIdx].terrainTypeKey\n          : \"\"\n      }\n      selectedUnit={selectedUnit || undefined}\n      onUnitSelect={setSelectedUnit}\n      onPrev={handlePrevTerrain}\n      onNext={handleNextTerrain}\n      prevTerrainIcon={\n        selectedTerrainIdx >= 0\n          ? React.cloneElement(\n              TERRAIN_LIST[\n                (selectedTerrainIdx - 1 + TERRAIN_LIST.length) %\n                  TERRAIN_LIST.length\n              ].icon as React.ReactElement<any>,\n              { size: 20 },\n            )\n          : undefined\n      }\n      nextTerrainIcon={\n        selectedTerrainIdx >= 0\n          ? React.cloneElement(\n              TERRAIN_LIST[(selectedTerrainIdx + 1) % TERRAIN_LIST.length]\n                .icon as React.ReactElement<any>,\n              { size: 20 },\n            )\n          : undefined\n      }\n      prevTerrainColors={\n        selectedTerrainIdx >= 0\n          ? {\n              bg: TERRAIN_LIST[\n                (selectedTerrainIdx - 1 + TERRAIN_LIST.length) %\n                  TERRAIN_LIST.length\n              ].bg,\n              text: TERRAIN_LIST[\n                (selectedTerrainIdx - 1 + TERRAIN_LIST.length) %\n                  TERRAIN_LIST.length\n              ].text,\n              border:\n                TERRAIN_LIST[\n                  (selectedTerrainIdx - 1 + TERRAIN_LIST.length) %\n                    TERRAIN_LIST.length\n                ].border,\n            }\n          : undefined\n      }\n      nextTerrainColors={\n        selectedTerrainIdx >= 0\n          ? {\n              bg: TERRAIN_LIST[(selectedTerrainIdx + 1) % TERRAIN_LIST.length]\n                .bg,\n              text: TERRAIN_LIST[(selectedTerrainIdx + 1) % TERRAIN_LIST.length]\n                .text,\n              border:\n                TERRAIN_LIST[(selectedTerrainIdx + 1) % TERRAIN_LIST.length]\n                  .border,\n            }\n          : undefined\n      }\n    />\n  );\n\n  const simulationPreviewSlot = (\n    <SimulationPreview\n      darkMode={darkMode}\n      selectedUnit={selectedUnit || \"\"}\n      selectedTerrainIdx={selectedTerrainIdx}\n      terrainPositions={terrainPositions}\n      activeLayoutLabel={activeLayoutLabel}\n      activeLayoutIdx={activeLayoutIdx}\n      filteredSeedsLength={filteredSeeds.length}\n      handlePrevLayout={handlePrevLayout}\n      handleNextLayout={handleNextLayout}\n      cardBg={cardBg}\n    />\n  );\n\n  return (\n    <TutorialPageLayout\n      darkMode={darkMode}\n      HeaderSlot={\n        <InteractiveHeader\n          darkMode={darkMode}\n          selectedUnit={selectedUnit || \"\"}\n          onUnitSelect={setSelectedUnit}\n          selectedTerrainIdx={selectedTerrainIdx}\n          onTerrainSelect={setSelectedTerrainIdx}\n          onBack={onBack}\n        />\n      }\n      PortfolioSlot={portfolioSlot}\n      TerrainDetailsSlot={terrainDetailsSlot}\n      SimulationPreviewSlot={simulationPreviewSlot}\n      Divider1={<LogicDivider label=\"+\" />}\n      Divider2={<LogicDivider label=\"=\" />}\n      FooterSlot={<CopyrightFooter />}\n    />\n  );\n};\n\nexport default LearnTutorialView;\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/constants/ai.constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/constants/core.constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/constants/intel.constants.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/constants/terrain.constants.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/constants/unit.constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/ai/aiLogic.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/ai/engine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/ai/evaluation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/ai/minimax.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/ai/stockfish.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":19,"messageId":"unexpectedAny","endLine":7,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[269,272],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[269,272],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":17,"column":7,"messageId":"tsDirectiveCommentRequiresDescription","endLine":17,"endColumn":26}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Stockfish from \"fairy-stockfish-nnue.wasm/stockfish.js\";\nimport type { BoardPiece } from \"@engineTypes/game\";\nimport { BOARD_SIZE } from \"@constants/core.constants\";\nimport { PIECES } from \"@engineConfigs/unitDetails\";\n\nclass StockfishEngine {\n  private engine: any = null;\n  private ready: Promise<void>;\n  private onResolveBestMove: ((move: string) => void) | null = null;\n\n  constructor() {\n    this.ready = this.init();\n  }\n\n  private async init() {\n    try {\n      // @ts-expect-error\n      this.engine = await Stockfish({\n        mainScriptUrlOrBlob:\n          (typeof window !== \"undefined\" ? window.location.origin : \"\") +\n          \"/stockfish.js\",\n        locateFile: (path: string) => {\n          const origin =\n            typeof window !== \"undefined\" ? window.location.origin : \"\";\n          if (path.endsWith(\".wasm\")) return origin + \"/stockfish.wasm\";\n          if (path.endsWith(\".worker.js\"))\n            return origin + \"/stockfish.worker.js\";\n          if (path.endsWith(\".js\")) return origin + \"/stockfish.js\";\n          return path;\n        },\n      });\n\n      // Setup listener\n      this.engine.addMessageListener((line: string) => {\n        console.log(\"SF:\", line);\n        if (line.startsWith(\"bestmove\")) {\n          const moveStr = line.split(\" \")[1];\n          if (this.onResolveBestMove) {\n            this.onResolveBestMove(moveStr);\n            this.onResolveBestMove = null;\n          }\n        }\n      });\n\n      // Feed variants.ini\n      try {\n        const response = await fetch(\"/variants.ini\");\n        if (!response.ok) throw new Error(\"variants.ini not found\");\n        const text = await response.text();\n        // Write to virtual filesystem\n        this.engine.FS.writeFile(\"/variants.ini\", text);\n\n        // Initialize UCI\n        this.engine.postMessage(\"uci\");\n        this.engine.postMessage(\n          \"setoption name VariantsFile value /variants.ini\",\n        );\n        this.engine.postMessage(\"setoption name MultiVariant value trenchess\");\n        this.engine.postMessage(\"isready\");\n      } catch (err) {\n        console.error(\"Failed to load variants.ini\", err);\n      }\n    } catch (err) {\n      console.error(\"Stockfish initialization failed:\", err);\n      this.engine = null;\n    }\n  }\n\n  public async getBestMove(\n    board: (BoardPiece | null)[][],\n    turn: string,\n  ): Promise<{ from: [number, number]; to: [number, number]; score: number }> {\n    await this.ready;\n\n    if (!this.engine) {\n      throw new Error(\"Stockfish engine not initialized\");\n    }\n\n    const fen = this.boardToFen(board, turn);\n    this.engine.postMessage(`position fen ${fen}`);\n    this.engine.postMessage(\"go depth 8\");\n\n    return new Promise((resolve) => {\n      this.onResolveBestMove = (moveStr: string) => {\n        const move = this.uciToMove(moveStr);\n        resolve({ ...move, score: 0 });\n      };\n    });\n  }\n\n  private uciToMove(uci: string): {\n    from: [number, number];\n    to: [number, number];\n  } {\n    const fromFile = uci.charCodeAt(0) - 97; // 'a'\n    const fromRank = parseInt(uci.substring(1, uci.length - 2));\n    const toFile = uci.charCodeAt(uci.length - 2) - 97;\n    const toRank = parseInt(uci.substring(uci.length - 1));\n\n    return {\n      from: [12 - fromRank, fromFile],\n      to: [12 - toRank, toFile],\n    };\n  }\n\n  private boardToFen(board: (BoardPiece | null)[][], turn: string): string {\n    let fen = \"\";\n    for (let r = 0; r < BOARD_SIZE; r++) {\n      let empty = 0;\n      for (let c = 0; c < BOARD_SIZE; c++) {\n        const p = board[r][c];\n        if (!p) {\n          empty++;\n        } else {\n          if (empty > 0) {\n            fen += empty;\n            empty = 0;\n          }\n          let char = \"\";\n          switch (p.type) {\n            case PIECES.PAWN:\n              char = \"p\";\n              break;\n            case PIECES.KNIGHT:\n              char = \"n\";\n              break;\n            case PIECES.BISHOP:\n              char = \"b\";\n              break;\n            case PIECES.ROOK:\n              char = \"r\";\n              break;\n            case PIECES.QUEEN:\n              char = \"q\";\n              break;\n            case PIECES.KING:\n              char = \"k\";\n              break;\n          }\n\n          if (p.player === \"red\" || p.player === \"green\") {\n            fen += char.toUpperCase();\n          } else {\n            fen += char.toLowerCase();\n          }\n        }\n      }\n      if (empty > 0) fen += empty;\n      if (r < BOARD_SIZE - 1) fen += \"/\";\n    }\n\n    const side = turn === \"red\" || turn === \"green\" ? \"w\" : \"b\";\n    fen += ` ${side} - - 0 1`;\n\n    return fen;\n  }\n}\n\nexport const engineService = new StockfishEngine();\n","usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/ai/stockfishLogic.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/configs/defaultSeeds.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/configs/terrainDetails.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/configs/unitDetails.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/logic/gameLogic.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/logic/gameState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/logic/movement.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/logic/terrain.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/scripts/streamSimulation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/setup/TerraForm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/setup/boardLayouts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/setup/logic/coreHelpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/setup/logic/formations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/setup/logic/initialization.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/setup/logic/randomization.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/setup/logic/styling.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/setup/logic/territory.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/setup/logic/validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/setup/setupLogic.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/setup/terrainCompat.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/types/fairy-stockfish.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/types/game.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/engine/types/guide.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/atoms/Badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/atoms/Box.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/atoms/Flex.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/atoms/GlassPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/atoms/Grid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/atoms/Heading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/atoms/IconButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/atoms/Text.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/atoms/TrenchessText.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/atoms/UnitIcons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/atoms/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/molecules/BackButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/molecules/Breadcrumbs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/molecules/CopyrightFooter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/molecules/ForwardButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/molecules/GameLogo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/molecules/LoadingFallback.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/molecules/SectionDivider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/molecules/SegmentedControl.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/molecules/ThemeControls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/molecules/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/organisms/ChiLayoutModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/organisms/ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/organisms/Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/organisms/InteractiveHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/organisms/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/templates/PageHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/templates/PageLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/components/templates/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/core/useBgioSync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/core/useBoardInteraction.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/core/useBoardState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/core/useGameConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/core/useGameLifecycle.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/core/useMoveExecution.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/core/usePlacementManager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/core/useSetupActions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/core/useTurnState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/core/useUrlSync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/useBoardPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/useComputerOpponent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/useDeployment.ts","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/xopher/www/x/battle-chess/src/shared/hooks/useDeployment.ts:61:13\n  59 |           if (Array.isArray(data)) {\n  60 |             // eslint-disable-next-line react-hooks/set-state-in-effect\n> 61 |             setLibrarySeeds(\n     |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  62 |               data.sort(\n  63 |                 (a, b) =>\n  64 |                   new Date(b.createdAt).getTime() -","line":61,"column":13,"endLine":61,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/useGameState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/useGameTheme.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/hooks/useMultiplayer.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/xopher/www/x/battle-chess/src/shared/hooks/useMultiplayer.tsx:143:5\n  141 |   useEffect(() => {\n  142 |     // eslint-disable-next-line react-hooks/set-state-in-effect\n> 143 |     refreshRooms();\n      |     ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  144 |   }, [refreshRooms]);\n  145 |\n  146 |   const joinGame = useCallback(","line":143,"column":5,"endLine":143,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/utils/gameUrl.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/utils/room-code.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/xopher/www/x/battle-chess/src/shared/utils/serialization.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
